(self.modernJsonp=self.modernJsonp||[]).push([["55759"],{338991:function(e,t,i){i.r(t),i.d(t,{default:()=>E});var n=i(659541),o=i(968827),a=i(667294),r=i(312048),s=i(740097),l=i(943564),d=i(724985),c=i(290852),p=i(689157),u=i(752031),m=i(746868),h=i(470205),g=i(935059),x=i(765603),y=i(774838),v=i(575820),w=i(200619),f=i(601871),C=i(15392),b=i(113759),j=i(632492),_=i(510755),P=i(328299),S=i(9065),k=i(785893);let T=(0,S.Z)(()=>Promise.all([i.e("25418"),i.e("68710"),i.e("42725"),i.e("98677"),i.e("64701")]).then(i.bind(i,785177)),void 0,e=>785177,"SaveAffordance",e=>["25418","68710","42725","98677","64701"]),I=(0,S.Z)(()=>i.e("73301").then(i.bind(i,225406)),void 0,e=>225406,"PostDownloadUpsellPopover",e=>["73301"]),B=(0,S.Z)(()=>Promise.resolve().then(i.bind(i,64897)),void 0,e=>64897,"SecondarySendButtonCommon",e=>[]),Z=(0,S.Z)(()=>Promise.all([i.e("25418"),i.e("96415")]).then(i.bind(i,872901)),void 0,e=>872901,"ReactionPickerContainer",e=>["25418","96415"]),D=(0,S.Z)(()=>i.e("8419").then(i.bind(i,78316)),void 0,e=>78316,"CloseupCommentButton",e=>["8419"]);function A(e){return!e}let E=!function(){let e=(0,n.l)()?.experimentsClient;return"enabled_react_compiler"===e?.checkExperiment("webpack_react_profiler").group}()?function({goBack:e,gridDescription:t,isDeletedStoryPin:i,inCommentsImprovedDropdownExp:n,inCommentsPopoverExp:o,isEligibleForAggregatedComments:S,isEligibleForPinReactions:A,isOnSecretBoard:E,onEditSubmit:R,pin:L,viewParameter:M,viewType:O,onSaveButtonClick:z,showRepinOnInitialRender:U,isStoryPin:W,actionBarContainerRef:F,outerPaddingSize:K=C.g9,maxWidth:G,showLeadPin:H,scrollContainerRef:Y}){let N=(0,r.TH)(),$=(0,w.Z)(),{showEnabledSaveBehavior:q}=(0,P.Yh)(!0),{imgSrc:J}=(0,u.G)(),{clientTrackingParams:X,showCloseupContentRight:Q,closeupWithinMasonryEnabled:V,peekCloseupEnabled:ee}=(0,b.x4)(),{viewType:et,viewParameter:ei}=(0,m.SU)(),en=(0,g.Z)(),eo=(0,f.q6)(en,L?.pinner?.id,$),ea=(0,p.Z)({showProductDetailPage:!!L.is_eligible_for_pdp}),[er,es]=(0,a.useState)(!!(0,v.mB)(N.search).share),[el,ed]=(0,a.useState)(!1),{shareFromPostDownloadUpsell:ec,setShareFromPostDownloadUpsell:ep,saveToBoardFromPostDownloadUpsell:eu,setSaveToBoardFromPostDownloadUpsell:em}=(0,l.tS)();ec&&(es(!0),ep(!1));let eh=(0,a.useCallback)(e=>ed(e),[]),eg=(0,a.useCallback)(()=>es(!1),[]),ex=(0,a.useCallback)(()=>es(e=>!e),[]),ey=L.board?.owner?.id||L.pinner?.id,{aggregated_pin_data:ev,comments_disabled:ew,reaction_counts:ef}=L,{isRTL:eC}=(0,y.B)(),eb=V?G:G||C.Gg,ej=(0,c.Z)({pinKey:{type:"Legacy",data:L},orbacActingAs:$,viewer:en}),e_=!!Object.keys(ef||{}).length,eP=ev?.did_it_data?.images_count??0,eS=(ev?.comment_count??0)+eP,ek=E||i?null:(0,k.jsx)(h.Z,{name:"CloseupActionBar_SecondarySendButton",children:(0,k.jsx)(B,{closeupWithinMasonryEnabled:V,controllerOptions:{flyoutDisplayOptions:V?{shownWithinProfileHeader:!0,idealDirection:"down",forceDirection:!0}:{wrapperPosition:"fixed"},isFlyoutOpen:er,loggingOptions:{component:194,element:72,viewParameter:M||ei,viewType:O||et},onFlyoutDismiss:eg,onToggleFlyout:ex,sendObject:{type:"pin",description:t,id:L.id,imageUrl:J,ownerId:ey,url:`/pin/${L.id}/`,clientTrackingParams:X}},showSendAnimation:!0})}),eT=(0,k.jsx)(s.xu,{alignItems:"center",color:V?"transparent":"default","data-test-id":"closeup-action-items",display:"flex",justifyContent:"between",maxWidth:eb,role:"list",rounding:2,children:(0,k.jsxs)(s.kC,{alignItems:"stretch",gap:2*!!V,justifyContent:"start",children:[!eo&&!!A&&(0,k.jsx)(h.Z,{name:"CloseupActionBar_ReactionPickerContainer",children:(0,k.jsxs)(s.xu,{alignItems:"center",display:"flex",marginEnd:2*!!e_,role:"listitem",children:[(0,k.jsx)(Z,{clientTrackingParams:X,handleReactionTrayHover:eh,idealDirection:V?"down":void 0,pinId:L.id,reactionByMe:L.reaction_by_me,showTooltip:!0,viewParameter:M,viewType:O}),(0,k.jsx)(x.Z,{pinId:L.id,reactionCounts:ef,showPrettyNumber:!0})]})}),V&&!(n&&ew)&&(0,k.jsx)(D,{inCommentsImprovedDropdownExp:!!n,inCommentsPopoverExp:!!o,isEligibleForAggregatedComments:!!S,pinKey:{type:"Legacy",data:L},scrollContainerRef:Y,shouldShowCommentCount:!ew&&!!eS&&(!!o||!!n),totalCommentCount:eS,viewParameter:M,viewType:O}),(0,k.jsx)(s.xu,{role:"listitem",children:ek}),(0,k.jsx)(s.xu,{"data-test-id":"closeup-more-options",role:"listitem",children:(0,k.jsx)(d.Z,{carouselSlotCurrentIndex:L&&L.carousel_data&&L.carousel_data.index,clientTrackingParams:X,closeupWithinMasonryEnabled:V,goBack:e,isReactionTrayOpen:el,onEditSubmit:R,pinKey:{type:"Legacy",data:L},showEditPin:!i&&ej,viewParameter:M,viewType:O})})]})}),eI=V?void 0:K,eB=(0,k.jsxs)(s.xu,{ref:F,color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:K/2,paddingRight:eC?void 0:eI,paddingLeft:eC?eI:void 0,paddingBottom:V?K/2:void 0,borderRadius:W?"0px 32px 32px 32px":Q?"0px 32px 32px 0":void 0}},"data-test-id":"closeup-body-sticky-content",marginTop:V?0:W?-5:0,width:V?"100%":void 0,children:[(0,k.jsx)(s.xu,{"data-test-id":"closeupActionBar",marginStart:ea?-3:void 0,children:(0,k.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"between",children:[eT,(0,k.jsx)(s.kC,{alignItems:"center",gap:2,children:!i&&!eo&&(0,k.jsx)(s.xu,{marginStart:3*!V,children:(0,k.jsx)(T,{boardCount:en.isAuth?en.boardCount:0,clientTrackingParams:X,onClickCallback:z,pinKey:{type:"Legacy",data:L},saveToBoardFromPostDownloadUpsell:eu,setSaveToBoardFromPostDownloadUpsell:em,showEnabledSaveBehavior:q,showRepinOnInitialRender:U,variant:"closeup",viewParameter:M,viewType:O})})})]})}),(0,k.jsx)(I,{})]});if(H||V)return eB;let eZ=W&&!ee?_.cI+4:_.hu;return ee&&(eZ=0),(0,k.jsx)(s.Le,{top:eZ,zIndex:j.mS,children:eB})}:function(e){let t,i,n,S,E,R,L,M,O,z,U,W,F,K,G,H,Y,N,$,q,J,X,Q,V,ee,et,ei,en=(0,o.c)(119),{goBack:eo,gridDescription:ea,isDeletedStoryPin:er,inCommentsImprovedDropdownExp:es,inCommentsPopoverExp:el,isEligibleForAggregatedComments:ed,isEligibleForPinReactions:ec,isOnSecretBoard:ep,onEditSubmit:eu,pin:em,viewParameter:eh,viewType:eg,onSaveButtonClick:ex,showRepinOnInitialRender:ey,isStoryPin:ev,actionBarContainerRef:ew,outerPaddingSize:ef,maxWidth:eC,showLeadPin:eb,scrollContainerRef:ej}=e,e_=void 0===ef?C.g9:ef,eP=(0,r.TH)(),eS=(0,w.Z)(),{showEnabledSaveBehavior:ek}=(0,P.Yh)(!0);en[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,u.G)(),en[0]=t):t=en[0];let{imgSrc:eT}=t,{clientTrackingParams:eI,showCloseupContentRight:eB,closeupWithinMasonryEnabled:eZ,peekCloseupEnabled:eD}=(0,b.x4)(),{viewType:eA,viewParameter:eE}=(0,m.SU)();en[1]!==eS||en[2]!==em.pinner?.id?(n=(0,g.Z)(),i=(0,f.q6)(n,em?.pinner?.id,eS),en[1]=eS,en[2]=em.pinner?.id,en[3]=i,en[4]=n):(i=en[3],n=en[4]);let eR=i,eL=!!em.is_eligible_for_pdp;en[5]!==eL?(S={showProductDetailPage:eL},en[5]=eL,en[6]=S):S=en[6];let eM=(0,p.Z)(S);en[7]!==eP.search?(E=(0,v.mB)(eP.search),en[7]=eP.search,en[8]=E):E=en[8];let[eO,ez]=(0,a.useState)(!!E.share),[eU,eW]=(0,a.useState)(!1),{shareFromPostDownloadUpsell:eF,setShareFromPostDownloadUpsell:eK,saveToBoardFromPostDownloadUpsell:eG,setSaveToBoardFromPostDownloadUpsell:eH}=(0,l.tS)();eF&&(ez(!0),eK(!1)),en[9]===Symbol.for("react.memo_cache_sentinel")?(R=e=>eW(e),en[9]=R):R=en[9];let eY=R;en[10]===Symbol.for("react.memo_cache_sentinel")?(L=()=>ez(!1),en[10]=L):L=en[10];let eN=L;en[11]===Symbol.for("react.memo_cache_sentinel")?(M=()=>ez(A),en[11]=M):M=en[11];let e$=M,eq=em.board?.owner?.id||em.pinner?.id,{aggregated_pin_data:eJ,comments_disabled:eX,reaction_counts:eQ}=em,{isRTL:eV}=(0,y.B)(),e0=eZ?eC:eC||C.Gg;en[12]!==em?(O={type:"Legacy",data:em},en[12]=em,en[13]=O):O=en[13],en[14]!==eS||en[15]!==O||en[16]!==n?(z={pinKey:O,orbacActingAs:eS,viewer:n},en[14]=eS,en[15]=O,en[16]=n,en[17]=z):z=en[17];let e1=(0,c.Z)(z);en[18]!==eQ?(U=Object.keys(eQ||{}),en[18]=eQ,en[19]=U):U=en[19];let e2=!!U.length,e9=!er&&e1,e7=eJ?.did_it_data?.images_count??0,e5=(eJ?.comment_count??0)+e7,e3=!eX&&!!e5&&(!!el||!!es);en[20]!==eI||en[21]!==eZ||en[22]!==eE||en[23]!==eA||en[24]!==ea||en[25]!==er||en[26]!==eO||en[27]!==ep||en[28]!==eq||en[29]!==em.id||en[30]!==eh||en[31]!==eg?(W=ep||er?null:(0,k.jsx)(h.Z,{name:"CloseupActionBar_SecondarySendButton",children:(0,k.jsx)(B,{closeupWithinMasonryEnabled:eZ,controllerOptions:{flyoutDisplayOptions:eZ?{shownWithinProfileHeader:!0,idealDirection:"down",forceDirection:!0}:{wrapperPosition:"fixed"},isFlyoutOpen:eO,loggingOptions:{component:194,element:72,viewParameter:eh||eE,viewType:eg||eA},onFlyoutDismiss:eN,onToggleFlyout:e$,sendObject:{type:"pin",description:ea,id:em.id,imageUrl:eT,ownerId:eq,url:`/pin/${em.id}/`,clientTrackingParams:eI}},showSendAnimation:!0})}),en[20]=eI,en[21]=eZ,en[22]=eE,en[23]=eA,en[24]=ea,en[25]=er,en[26]=eO,en[27]=ep,en[28]=eq,en[29]=em.id,en[30]=eh,en[31]=eg,en[32]=W):W=en[32];let e8=W,e6=eZ?"transparent":"default",e4=2*!!eZ;en[33]!==eI||en[34]!==eZ||en[35]!==e2||en[36]!==ec||en[37]!==eR||en[38]!==em.id||en[39]!==em.reaction_by_me||en[40]!==eQ||en[41]!==eh||en[42]!==eg?(F=!eR&&!!ec&&(0,k.jsx)(h.Z,{name:"CloseupActionBar_ReactionPickerContainer",children:(0,k.jsxs)(s.xu,{alignItems:"center",display:"flex",marginEnd:2*!!e2,role:"listitem",children:[(0,k.jsx)(Z,{clientTrackingParams:eI,handleReactionTrayHover:eY,idealDirection:eZ?"down":void 0,pinId:em.id,reactionByMe:em.reaction_by_me,showTooltip:!0,viewParameter:eh,viewType:eg}),(0,k.jsx)(x.Z,{pinId:em.id,reactionCounts:eQ,showPrettyNumber:!0})]})}),en[33]=eI,en[34]=eZ,en[35]=e2,en[36]=ec,en[37]=eR,en[38]=em.id,en[39]=em.reaction_by_me,en[40]=eQ,en[41]=eh,en[42]=eg,en[43]=F):F=en[43],en[44]!==eZ||en[45]!==eX||en[46]!==es||en[47]!==el||en[48]!==ed||en[49]!==em||en[50]!==ej||en[51]!==e3||en[52]!==e5||en[53]!==eh||en[54]!==eg?(K=eZ&&!(es&&eX)&&(0,k.jsx)(D,{inCommentsImprovedDropdownExp:!!es,inCommentsPopoverExp:!!el,isEligibleForAggregatedComments:!!ed,pinKey:{type:"Legacy",data:em},scrollContainerRef:ej,shouldShowCommentCount:e3,totalCommentCount:e5,viewParameter:eh,viewType:eg}),en[44]=eZ,en[45]=eX,en[46]=es,en[47]=el,en[48]=ed,en[49]=em,en[50]=ej,en[51]=e3,en[52]=e5,en[53]=eh,en[54]=eg,en[55]=K):K=en[55],en[56]!==e8?(G=(0,k.jsx)(s.xu,{role:"listitem",children:e8}),en[56]=e8,en[57]=G):G=en[57];let te=em&&em.carousel_data&&em.carousel_data.index;en[58]!==em?(H={type:"Legacy",data:em},en[58]=em,en[59]=H):H=en[59],en[60]!==eI||en[61]!==eZ||en[62]!==eo||en[63]!==eU||en[64]!==eu||en[65]!==e9||en[66]!==te||en[67]!==H||en[68]!==eh||en[69]!==eg?(Y=(0,k.jsx)(s.xu,{"data-test-id":"closeup-more-options",role:"listitem",children:(0,k.jsx)(d.Z,{carouselSlotCurrentIndex:te,clientTrackingParams:eI,closeupWithinMasonryEnabled:eZ,goBack:eo,isReactionTrayOpen:eU,onEditSubmit:eu,pinKey:H,showEditPin:e9,viewParameter:eh,viewType:eg})}),en[60]=eI,en[61]=eZ,en[62]=eo,en[63]=eU,en[64]=eu,en[65]=e9,en[66]=te,en[67]=H,en[68]=eh,en[69]=eg,en[70]=Y):Y=en[70],en[71]!==e4||en[72]!==F||en[73]!==K||en[74]!==G||en[75]!==Y?(N=(0,k.jsxs)(s.kC,{alignItems:"stretch",gap:e4,justifyContent:"start",children:[F,K,G,Y]}),en[71]=e4,en[72]=F,en[73]=K,en[74]=G,en[75]=Y,en[76]=N):N=en[76],en[77]!==e0||en[78]!==e6||en[79]!==N?($=(0,k.jsx)(s.xu,{alignItems:"center",color:e6,"data-test-id":"closeup-action-items",display:"flex",justifyContent:"between",maxWidth:e0,role:"list",rounding:2,children:N}),en[77]=e0,en[78]=e6,en[79]=N,en[80]=$):$=en[80];let tt=$,ti=eZ?void 0:e_,tn=e_/2,to=eV?void 0:ti,ta=eV?ti:void 0,tr=eZ?e_/2:void 0,ts=ev?"0px 32px 32px 32px":eB?"0px 32px 32px 0":void 0;en[81]!==tn||en[82]!==to||en[83]!==ta||en[84]!==tr||en[85]!==ts?(q={__style:{paddingTop:tn,paddingRight:to,paddingLeft:ta,paddingBottom:tr,borderRadius:ts}},en[81]=tn,en[82]=to,en[83]=ta,en[84]=tr,en[85]=ts,en[86]=q):q=en[86];let tl=eZ?0:ev?-5:0,td=eZ?"100%":void 0,tc=eM?-3:void 0;en[87]!==eI||en[88]!==eZ||en[89]!==er||en[90]!==eR||en[91]!==ex||en[92]!==em||en[93]!==eG||en[94]!==eH||en[95]!==ek||en[96]!==ey||en[97]!==eh||en[98]!==eg||en[99]!==n?(J=!er&&!eR&&(0,k.jsx)(s.xu,{marginStart:3*!eZ,children:(0,k.jsx)(T,{boardCount:n.isAuth?n.boardCount:0,clientTrackingParams:eI,onClickCallback:ex,pinKey:{type:"Legacy",data:em},saveToBoardFromPostDownloadUpsell:eG,setSaveToBoardFromPostDownloadUpsell:eH,showEnabledSaveBehavior:ek,showRepinOnInitialRender:ey,variant:"closeup",viewParameter:eh,viewType:eg})}),en[87]=eI,en[88]=eZ,en[89]=er,en[90]=eR,en[91]=ex,en[92]=em,en[93]=eG,en[94]=eH,en[95]=ek,en[96]=ey,en[97]=eh,en[98]=eg,en[99]=n,en[100]=J):J=en[100],en[101]!==J?(X=(0,k.jsx)(s.kC,{alignItems:"center",gap:2,children:J}),en[101]=J,en[102]=X):X=en[102],en[103]!==tt||en[104]!==X?(Q=(0,k.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"between",children:[tt,X]}),en[103]=tt,en[104]=X,en[105]=Q):Q=en[105],en[106]!==tc||en[107]!==Q?(V=(0,k.jsx)(s.xu,{"data-test-id":"closeupActionBar",marginStart:tc,children:Q}),en[106]=tc,en[107]=Q,en[108]=V):V=en[108],en[109]===Symbol.for("react.memo_cache_sentinel")?(ee=(0,k.jsx)(I,{}),en[109]=ee):ee=en[109],en[110]!==ew||en[111]!==q||en[112]!==tl||en[113]!==td||en[114]!==V?(et=(0,k.jsxs)(s.xu,{ref:ew,color:"default",dangerouslySetInlineStyle:q,"data-test-id":"closeup-body-sticky-content",marginTop:tl,width:td,children:[V,ee]}),en[110]=ew,en[111]=q,en[112]=tl,en[113]=td,en[114]=V,en[115]=et):et=en[115];let tp=et;if(eb||eZ)return tp;let tu=ev&&!eD?_.cI+4:_.hu;return eD&&(tu=0),en[116]!==tp||en[117]!==tu?(ei=(0,k.jsx)(s.Le,{top:tu,zIndex:j.mS,children:tp}),en[116]=tp,en[117]=tu,en[118]=ei):ei=en[118],ei}},765603:function(e,t,i){i.d(t,{Z:()=>x});var n=i(667294),o=i(740097),a=i(361004),r=i(104999),s=i(24246),l=i(507006),d=i(729586),c=i(518596),p=i(825605),u=i(785893);function m(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let h=(0,n.lazy)(()=>i.e("25993").then(i.bind(i,581897)));class g extends n.PureComponent{constructor(...e){super(...e),m(this,"state",{displayAggregationModal:!1}),m(this,"showAggregationModal",()=>{let{disableModal:e,logContextEvent:t}=this.props;e||(this.setState({displayAggregationModal:!0}),t({event_type:101,view_type:3,view_parameter:139,component:13458,element:11435,aux_data:{objectId:this.props.pinId}}))}),m(this,"hideAggregationModal",()=>{this.setState({displayAggregationModal:!1})})}render(){let{displayAggregationModal:e}=this.state,{isBold:t,isStoryPin:i,paddingY:n,pinId:r,reactionCounts:s,showPrettyNumber:m,size:g}=this.props,x=s?(0,c.At)(s):null,y=s?(0,c.Ud)(s):0,v=!!x&&x.length>0&&x.filter(e=>!!d.GY[e]).map((e,t)=>{let i=e&&d.GY[e]?d.GY[e]:"",{label:n,gridAsset:a}=(0,d.fW)(i,this.props.i18n);return(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginRight:2}},children:(0,u.jsx)(o.xu,{height:19,width:19,children:a&&(0,u.jsx)(o.Ee,{alt:n??"",fit:"cover",naturalHeight:1,naturalWidth:1,src:a})})},t)});return(0,u.jsxs)(o.xu,{children:[(0,u.jsx)(o.iP,{accessibilityLabel:`${y} reactions`,dataTestId:"reactions-count-button",onTap:this.showAggregationModal,children:!!v&&(0,u.jsx)(o.xu,{"data-test-id":"aggregated-reactions-container",display:"inlineBlock",children:m?(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},children:(0,u.jsx)(o.xe,{size:g??a.n,weight:"bold",children:(0,u.jsx)(l.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:y})})}):(0,u.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},"data-test-id":"aggregated-reactions-container",direction:"row",display:"flex",height:i?"auto":19,paddingY:n??6*!i,children:[(0,u.jsx)(o.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:v}),(0,u.jsx)(o.xu,{paddingX:1,children:(0,u.jsx)(o.xe,{color:t?"default":"subtle",size:g??a.n,weight:t?"bold":"normal",children:(0,u.jsx)(l.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:y})})})]})})}),e&&y&&(0,u.jsx)(p.Z,{children:(0,u.jsx)(h,{aggregatedReactions:v,onDismiss:this.hideAggregationModal,pinId:r,totalReactionCount:y})})]})}}m(g,"defaultProps",{isBold:!0});let x=function(e){let t=(0,s.Z)(),i=(0,r.Z)();return(0,u.jsx)(g,{...e,i18n:t,logContextEvent:i})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupActionBarCommon-0fac376b6adf18de.mjs.map