(self.modernJsonp=self.modernJsonp||[]).push([["98677"],{647363:function(e,t,a){var i,n,l,r;a.r(t),a.d(t,{default:()=>o});let s={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:n=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheckQuery_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},r],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c881f56582aebd78b7f3f625abfe959aa6d034bcd97439d6b4224d46c1c5f8cc",metadata:{},name:"AlreadyPinnedCheckQuery",operationKind:"query",text:null}};s.hash="0b5f077c08e31de36594b6918e128d12";let o=s},678853:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="6bb1a587f71f85424aa51845831862d4";let n=i},217115:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheck_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="3caf9424c2af74d2b11a6ea682b57d1b";let n=i},757191:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],type:"Pin",abstractKey:null};i.hash="18c3db3fbed169f50cffd214f66ddd8e";let n=i},488623:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};i.hash="f12c153dafdb70970e02775ea0db67c2";let n=i},314821:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPicker_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="76215b7b40cb02e76b77e58c8765d0d1";let n=i},52911:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardsPane_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPicker_pin"}],type:"Pin",abstractKey:null};i.hash="56f620fbd63abf8f7cb32f9a378198f8";let n=i},222078:function(e,t,a){var i,n;a.r(t),a.d(t,{default:()=>r});let l=(n=[i={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CallToAction_advisoryAction",selections:[{alias:null,args:null,concreteType:"AdvisoryButton",kind:"LinkedField",name:"button",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},i],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"title",plural:!1,selections:n,storageKey:null}],type:"AdvisoryAction",abstractKey:null});l.hash="6ddea2ecd3dff2e1001c1e4d037cc858";let r=l},5755:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DefaultNotice_advisoryNotice",selections:[{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"textTags",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"HyperlinkFormatText_textTag"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:"actionId",args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CallToAction_advisoryAction"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"AdvisoryNotice",abstractKey:null};i.hash="5879c4710b107f258f42156bf3e47e37";let n=i},53713:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DrawerImageGroup_board",selections:[{args:null,kind:"FragmentSpread",name:"SendBoardButton_board"}],type:"Board",abstractKey:null};i.hash="0e2c441822700a6145ea7cd142c0425b";let n=i},943751:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DrawerImageGroup_coverPin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"crop",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}],type:"CoverPin",abstractKey:null};i.hash="35b139c2e951baaa6624b30e45f913ce";let n=i},52950:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"HyperlinkFormatText_textTag",selections:[{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tagType",storageKey:null}],type:"TextTag",abstractKey:null};i.hash="4970946a36017d9ad0c751fd70cc512c";let n=i},90486:function(e,t,a){var i,n,l;a.r(t),a.d(t,{default:()=>s});let r=(n=[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],l=[i],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LegoNotice_advisoryNotice",selections:[{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:[i,{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"textTags",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"HyperlinkFormatText_textTag"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryFooter",kind:"LinkedField",name:"footer",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:"actionId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"AdvisoryButton",kind:"LinkedField",name:"button",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"title",plural:!1,selections:l,storageKey:null}],storageKey:null}],type:"AdvisoryNotice",abstractKey:null});r.hash="fa2efeb6b4c660680d9f3a0e156c8007";let s=r},88058:function(e,t,a){var i,n,l,r,s,o;a.r(t),a.d(t,{default:()=>c});let d=(i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},s=[l={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],o=[{alias:null,args:null,kind:"ScalarField",name:"boardId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"localPinId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sectionId",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},l],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinBetterSave_pin",selections:[i,{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},n,i,l,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[i],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinRecommendationReason",kind:"LinkedField",name:"recommendationReason",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[n,i,l],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"474x")'},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"PinSaveRequestRepinWithSectionSuggestions_pin"},{args:null,kind:"FragmentSpread",name:"PinToBoard_pin"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedInfo",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedCutout",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"selectedItem",plural:!1,selections:o,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null}]}],type:"Pin",abstractKey:null});d.hash="09fbcefa1cef908739da123ebf62a14b";let c=d},784502:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinBetterSave_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"cutoutImages_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'cutoutImages(spec:"236x")'},{args:null,kind:"FragmentSpread",name:"PinSaveRequestRepinWithSectionSuggestions_shuffle_asset"},{args:null,kind:"FragmentSpread",name:"PinToBoard_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};i.hash="1f53887e43dccddcc1fb109a988e5c3d";let n=i},379066:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheck_pin"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null}]}],type:"Pin",abstractKey:null};i.hash="d928a4e793c8e81567357b1faa71d2e3";let n=i},611637:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};i.hash="1a4583782792fbfe92015cb2dbe50f70";let n=i},934627:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequestRepinWithSectionSuggestions_pin",selections:[{args:null,kind:"FragmentSpread",name:"PinSaveRequest_pin"}],type:"Pin",abstractKey:null};i.hash="03aa6b9cad1d5fb9b12a7c896ccdaffd";let n=i},852501:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequestRepinWithSectionSuggestions_shuffle_asset",selections:[{args:null,kind:"FragmentSpread",name:"PinSaveRequest_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};i.hash="6bd1eb83cfe5391288164b17cc5d85b7";let n=i},709869:function(e,t,a){var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_pin",selections:[{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null}]}],type:"Pin",abstractKey:null};n.hash="bfa270bf437ef1e9195cafe07b0b3631";let l=n},150501:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"ShuffleAsset",abstractKey:null};i.hash="58c24e25a76e7a1c4533f3b07f490517";let n=i},892341:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"PinPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardsPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_pin"}],type:"Pin",abstractKey:null};i.hash="616d5be8fea6092b51f23b548a1a5dca";let n=i},591418:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_shuffle_asset",selections:[{args:null,kind:"FragmentSpread",name:"PinPane_shuffle_asset"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};i.hash="4435ca5e135b834ea8a6425f68eb2f7a";let n=i},413044:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SendBoardButton_board",selections:[{args:null,kind:"FragmentSpread",name:"SendBoardFlyout_board"}],type:"Board",abstractKey:null};i.hash="8d95294efe15498023c69669c6a41e71";let n=i},954881:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SendBoardFlyout_board",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageCoverUrl",storageKey:null}],type:"Board",abstractKey:null};i.hash="f459445ee8d1ea0db022e490ef5a2e80";let n=i},566436:function(e,t,a){var i,n,l;a.r(t),a.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SensitiveNotice_sensitivity",selections:[{alias:null,args:null,kind:"ScalarField",name:"advisory",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"severity",storageKey:null},{alias:null,args:null,concreteType:"AdvisoryNotice",kind:"LinkedField",name:"notices",plural:!0,selections:[{alias:"noticeId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"content_image_url",args:null,kind:"ScalarField",name:"contentImageUrl",storageKey:null},{alias:"suggested_resource",args:null,kind:"ScalarField",name:"suggestedResource",storageKey:null},{alias:"image_type",args:null,kind:"ScalarField",name:"imageType",storageKey:null},l={alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:n=[i={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:"actionId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"AdvisoryButton",kind:"LinkedField",name:"button",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},i,{alias:"contact_type",args:null,kind:"ScalarField",name:"contactType",storageKey:null}],storageKey:null},l,{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"title",plural:!1,selections:n,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],type:"Sensitivity",abstractKey:null};r.hash="6e21ec048bb4ac7d621865a42cf02a6c";let s=r},932334:function(e,t,a){var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedFiltersContext_oneBarModules",selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"moduleType",storageKey:null},{alias:null,args:null,concreteType:"OneBarModuleAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,concreteType:"FilterOption",kind:"LinkedField",name:"filters",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isSelected",storageKey:null},i,{alias:null,args:null,concreteType:"OneBarModuleDisplay",kind:"LinkedField",name:"display",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayText",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"OneBarModuleAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"feedUrl",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"OneBarModule",abstractKey:null};n.hash="92b841173868ce353dd00b5fce287546";let l=n},64219:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedPinRepDefaultPinRep_parentPin",selections:[{args:null,kind:"FragmentSpread",name:"PinRep_parentPin"}],type:"Pin",abstractKey:null};i.hash="cb2594cad81be6eec825977b7bcb2003";let n=i},268047:function(e,t,a){var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[{kind:"RootArgument",name:"isCloseupRelatedModulesFeedQuery"},{defaultValue:!1,kind:"LocalArgument",name:"shouldShowSeoDrawerOption"},{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"UnifiedPinRepDefaultPinRep_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:i=[{args:null,kind:"FragmentSpread",name:"PinRepInner_board"}],storageKey:null},{condition:"isCloseupRelatedModulesFeedQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:i,storageKey:null}]},{args:[{kind:"Variable",name:"shouldShowSeoDrawerOption",variableName:"shouldShowSeoDrawerOption"},{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"PinRep_pin"}],type:"Pin",abstractKey:null};n.hash="4706485911e34fec99070a2a4c272d94";let l=n},128851:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedPinRepVariant_parentPin",selections:[{args:null,kind:"FragmentSpread",name:"UnifiedPinRepDefaultPinRep_parentPin"}],type:"Pin",abstractKey:null};i.hash="970c9e8a0b93cdd43095e6934563c7eb";let n=i},748100:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"shouldShowSeoDrawerOption"},{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"UnifiedPinRepVariant_pin",selections:[{args:[{kind:"Variable",name:"shouldShowSeoDrawerOption",variableName:"shouldShowSeoDrawerOption"},{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"UnifiedPinRepDefaultPinRep_pin"}],type:"Pin",abstractKey:null};i.hash="cf7ae619f5ec8cf58cf3302e69136b1d";let n=i},46354:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"shouldShowSeoDrawerOption"},{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"UnifiedPinRep_pin",selections:[{args:[{kind:"Variable",name:"shouldShowSeoDrawerOption",variableName:"shouldShowSeoDrawerOption"},{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"UnifiedPinRepDefaultPinRep_pin"}],type:"Pin",abstractKey:null};i.hash="bb4e0fc2e1a319a6b7c65cb9ad5c8cb6";let n=i},339442:function(e,t,a){var i,n;a.r(t),a.d(t,{default:()=>r});let l={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"boardId"}],kind:"Fragment",metadata:null,name:"collab_AcceptInvite_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3AcceptBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"collab_AcceptInvite_Mutation",selections:n},params:{id:"781c41132fefa007ebde7bcd8c49840ce1768ed6f6781fd72e3904bd35fb576f",metadata:{},name:"collab_AcceptInvite_Mutation",operationKind:"mutation",text:null}};l.hash="7005ce437a6a6ff33741ab44aa02cf61";let r=l},917436:function(e,t,a){var i,n;a.r(t),a.d(t,{default:()=>r});let l={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_ApproveInvite_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3ApproveBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"collab_ApproveInvite_Mutation",selections:n},params:{id:"472a584df4a467181ed32ec33d235ef2f2e6d53fdb4c7a43d11156b6d51dcd50",metadata:{},name:"collab_ApproveInvite_Mutation",operationKind:"mutation",text:null}};l.hash="40ae8061007ba5f53a4570e43e4ca864";let r=l},932522:function(e,t,a){var i,n,l,r;a.r(t),a.d(t,{default:()=>o});let s={fragment:{argumentDefinitions:[i={defaultValue:null,kind:"LocalArgument",name:"ban"},n={defaultValue:null,kind:"LocalArgument",name:"boardId"},l={defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:r=[{alias:null,args:[{fields:[{kind:"Variable",name:"ban",variableName:"ban"},{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3DeclineOrDeleteBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,l,i],kind:"Operation",name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:r},params:{id:"ff3059743c1d13d4f1c2ef07e10d2b29925c7b330db4103e55e9e65c380c0ce5",metadata:{},name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",operationKind:"mutation",text:null}};s.hash="c62e5df78917dd238b70f366f358d487";let o=s},10028:function(e,t,a){var i,n,l,r,s,o,d,c;a.r(t),a.d(t,{default:()=>h});let u={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"board"},{defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"}],kind:"Fragment",metadata:null,name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:n=[{fields:[{kind:"Variable",name:"board",variableName:"board"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"collaboratorCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null}],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},d={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[r,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[s,o,c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null},c],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},d],storageKey:null}]},params:{id:"83dd1206102cffdd460f8c072df0ca515d27c8fcf3798423f1657afabdf467ac",metadata:{},name:"collab_RemoveBoardCollaborators_Mutation",operationKind:"mutation",text:null}};u.hash="2c3e1508650962adfff1171e950fa419";let h=u},905709:function(e,t,a){var i,n,l,r,s,o,d,c,u,h;a.r(t),a.d(t,{default:()=>p});let _=(i=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"message"}],n=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s=[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],o={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},u={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"},h=[r,c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:s,storageKey:null},o,d,c,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:s,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},u],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:h,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:h,storageKey:null},o,d,c,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:h,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},u],storageKey:null}]},params:{id:"ff45f353c3246c417487b54a02f0669dbc6c45761df9567395537bf1f7875a9f",metadata:{},name:"collab_RequestToJoin_Mutation",operationKind:"mutation",text:null}});_.hash="9aa22a7713214239538142ad2c957cc3";let p=_},286796:function(e,t,a){var i,n;a.r(t),a.d(t,{default:()=>r});let l={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"emails"},{defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_emails_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"emails",variableName:"emails"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorEmailMutationv2",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"collab_emails_Mutation",selections:n},params:{id:"b71dbcb22ec2462fa0cde080403e4f9001df6f822511fd94b0fb3eae0c6b3fd4",metadata:{},name:"collab_emails_Mutation",operationKind:"mutation",text:null}};l.hash="de392a939a95d05f7ee889fe77a9e52d";let r=l},497818:function(e,t,a){var i,n,l,r;a.r(t),a.d(t,{default:()=>o});let s={fragment:{argumentDefinitions:[i={defaultValue:null,kind:"LocalArgument",name:"boardId"},n={defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"},l={defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_users_Mutation",selections:r=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorsMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,i,l],kind:"Operation",name:"collab_users_Mutation",selections:r},params:{id:"42ceaa3423a096a27613e5738f83aaadcee449c55d4dd03624d2f08a6b6dca04",metadata:{},name:"collab_users_Mutation",operationKind:"mutation",text:null}};s.hash="850c5de9834cac0edfdd5652a78bffbf";let o=s},464788:function(e,t,a){a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"hasSensitivityNotices_sensitivity",selections:[{alias:null,args:null,concreteType:"AdvisoryNotice",kind:"LinkedField",name:"notices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"advisory",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"severity",storageKey:null}],type:"Sensitivity",abstractKey:null};i.hash="547e5abdb645851996d6a1b1a4027c56";let n=i},433100:function(e,t,a){a.d(t,{f:()=>S,l:()=>x});var i=a(667294),n=a(178226),l=a(735243),r=a(477738),s=a(148),o=a(252974),d=a(250182),c=a(655068),u=a(531624),h=a(515511),_=a(213491),p=a(360033),g=a(986475),f=a(640200),m=a(785893);let b=(e,t,a)=>{let i=t?.find(({action:e})=>e?.filter?.product_filter_type===a);if(!i)return;let n=(0,g.Z)(f.Z,!0)(i),l=e.findIndex(({action:e})=>e?.filter?.productFilterType===a);e[l]?e[l]=n:e.push(n)},y=(e,t,a,i)=>{let n=i.find(({action:t})=>"number"==typeof t?.filter?.productFilterType&&e.has(t.filter.productFilterType));if(n?.action?.filter){let e=n.action.filter.filterOptions;n.action.filter.appliedFilterOptions="string"==typeof t?e?.filter(e=>e?.[a]&&t.split(",").includes(String(e[a]))).map(e=>({...e,selected:!0})):[]}},{Provider:v,get:x}=(0,_.Z)("OneBarProductFilters");function S({children:e}){let[t,a]=(0,i.useState)([]),[_,g]=(0,i.useState)(null),f=function(){let{scope:e}=(0,s.n)();return[r.lw.BOARDS,r.lw.PINS_BUYABLE,r.lw.PINS_VIDEO,r.lw.USERS].includes(e)}(),x=(0,u.Z)(),S=(0,d.Z)(),P=(0,n.Z)(),A=(0,l.Z)(),w=(0,c.Z)(),k=(0,i.useCallback)(({oneBarModules:e,baseCacheKey:i})=>{let n=e?.filter(({module_type:e})=>17===e||0===e);if(!n||n?.length===0||!i)return;let l=i!==_,r=l?[]:t;(l||!f)&&b(r,n,4),(l||!x)&&b(r,n,1),(l||!S)&&b(r,n,0),(l||!P)&&b(r,n,3),(l||!A)&&b(r,n,6),(l||!w)&&[7,8,9].forEach(e=>{b(r,n,e)}),(0,p.ZP)(r,t)||(a(r),g(i))},[t,P,A,f,S,w,x,_]),C=(0,o.Z)(),{priceMax:I,priceMin:T,scope:j,brands:z,onSale:E,colors:B,domains:R}=(0,s.n)();(0,i.useEffect)(()=>{if(!C||0===t.length)return;let e=(0,h.Z)(t);if(j!==r.lw.PINS){let t=(0,r.gi)(j),a=e.find(({moduleType:e})=>0===e);a?.action?.filter&&(a.action.filter.appliedFilterOptions=[...a.action.filter.filterOptions||[]].filter(Boolean).map(e=>{let{searchType:a}=e;return{searchType:a,selected:a===t}}))}if("string"==typeof I||"string"==typeof T){let t=e.find(({action:e})=>e?.filter?.productFilterType===1);t?.action?.filter&&(t.action.filter.appliedFilterOptions=[t.action.filter.filterOptions?.[0]?{...t.action.filter.filterOptions[0],numericValue:Number(T)}:null,t.action.filter.filterOptions?.[1]?{...t.action.filter.filterOptions[1],numericValue:Number(I)}:null].filter(Boolean))}y(new Set([3]),z,"stringValue",e),y(new Set([6]),B,"stringValue",e),y(new Set([0]),R,"stringValue",e),y(new Set([7,8,9]),E,"numericValue",e),(0,p.ZP)(e,t)||a(e)},[t,C,I,T,j,z,B,R,E]);let F=(0,i.useMemo)(()=>({cachedProductFilterOneBarModules:t,cacheOneBarModules:k}),[t,k]);return(0,m.jsx)(v,{value:F,children:e})}},310878:function(e,t,a){a.d(t,{N$:()=>E,wy:()=>R,VA:()=>j});var i,n=a(667294),l=a(167912),r=a(433100),s=a(675450),o=a(17832),d=a(856853);let c=(e,t,a)=>a&&(0,o.nZ)(a,t)?s.v.MODIFIED:(0,o.B1)(t,e)||a&&(0,o.Uv)(a,e)||(0,o.Uv)(t,e)?s.v.CLEARED:s.v.APPLIED;function u(e,t){(0,o.ph)(t);let a=e.find(e=>e?.id===t.id),i=a?.rules,n=a?.filter_options?.find(e=>"selectedOptionId"in t&&e.id===t.selectedOptionId)?.rules||i;if(!n)return[e,[]];let l=[],r=[];return e.forEach(e=>{void 0!==e.product_filter_type&&n.includes(e.product_filter_type)?l.push(e):r.push(e)}),[l,r]}function h(e,t){switch(t.type){case"RESET_FILTERS":let[a,i]=t.payload,n=a,l=(0,d.Z)(i)?(0,o.iP)(a):i;return Object.values(l).forEach(e=>{let[t]=u(n,e);n=t}),{models:a,availableFilterModels:n,appliedFilters:i,filters:l,isFetching:!1,pendingDeletedSelections:{},status:c(a,i,l)};case"CLEAR_FILTERS":let r=e.models,h=(0,o.P5)(e.models);return Object.values(h).forEach(e=>{let[t]=u(r,e);r=t}),{...e,filters:h,availableFilterModels:r,pendingDeletedSelections:{},status:c(e.models,e.appliedFilters,h)};case"UPDATE_FILTER":let{payload:_}=t,[p,g]=u(e.models,_),f={...e.filters,[_.id]:_},m={...e.pendingDeletedSelections};return p.forEach(e=>{if(!e.id)return;let t=m[e.id];t&&(f[e.id]=t,delete m[e.id])}),g.forEach(e=>{if(!e.id)return;let t=f[e.id];t&&(m[e.id]=t,delete f[e.id])}),(0,o.ph)(_,e.models.find(e=>e.id===_.id))&&delete f[_.id],{...e,availableFilterModels:p,filters:f,pendingDeletedSelections:m,status:c(e.models,e.appliedFilters,f)};case"SUBMIT_FILTER":return{...e,pendingDeletedSelections:{},status:s.v.SUBMITTED};case"SUBMIT_FAILED":return{...e,status:s.v.FAILED};case"SUBMIT_COMPLETE":let{filters:b}=e;return{...e,appliedFilters:b,pendingDeletedSelections:{},status:c(e.models,b)};case"LOADING":return{...e,isFetching:!0};case"LOADING_COMPLETED_OR_FAILED":return{...e,isFetching:!1};default:return e}}var _=a(178226),p=a(735243),g=a(250182),f=a(655068),m=a(531624),b=a(360033);let y=new Set([1,0,3,6,7,8,9]),v=(e,t,a)=>{let i=t?.find(({product_filter_type:e})=>e===a);if(!i)return;let n=e.findIndex(({product_filter_type:e})=>e===a);e[n]?e[n]=i:e.push(i)},x=(e,t,a)=>{let i=t?.find(({product_filter_type:e})=>e===a);if(!i)return e;let n=e.findIndex(({product_filter_type:e})=>e===a);return e[n]?e[n]=i:e.push(i),e};var S=a(252974),P=a(213491),A=a(661376),w=a(148),k=a(657476),C=a(785893);let I=()=>{},{Provider:T,getMaybe:j}=(0,P.Z)("UnifiedFiltersContext"),z=({applyInitFilters:e,children:t,filterModels:a,filters:i,isFetching:l,refreshFiltersData:r})=>{let{query:d}=(0,w.n)(),c=(0,S.Z)(),{getCachedFilters:u,cacheUnifiedFilterModelsWithProductFilters:P}=function(){let[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(null),l=(0,m.Z)(),r=(0,g.Z)(),s=(0,_.Z)(),o=(0,p.Z)(),d=(0,f.Z)(),c=(0,n.useCallback)(({unifiedFilterModels:n,baseCacheKey:c})=>{let u=n?.filter(({product_filter_type:e})=>void 0!==e&&y.has(e));if(!u||u?.length===0||!c)return;let h=c!==a,_=h?[]:e;(h||!l)&&v(_,u,1),(h||!r)&&v(_,u,0),(h||!s)&&v(_,u,3),(h||!o)&&v(_,u,6),(h||!d)&&[7,8,9].forEach(e=>{v(_,u,e)}),(0,b.ZP)(_,e)||(t(_),i(c))},[e,s,o,r,d,l,a]);return{getCachedFilters:(0,n.useCallback)(t=>{if(!t||t?.length===0)return[];let a=[...t];return l&&(a=x(a,e,1)),r&&(a=x(a,e,0)),s&&(a=x(a,e,3)),o&&(a=x(a,e,6)),d&&[7,8,9].forEach(t=>{a=x(a,e,t)}),a},[e,s,o,r,d,l]),cacheUnifiedFilterModelsWithProductFilters:c}}(),A=e?.(a)||i||{},[k,I]=(0,n.useReducer)(h,{models:a,availableFilterModels:a,appliedFilters:A,filters:A,pendingDeletedSelections:{},isFetching:l,status:(0,o.B1)(A,a)||(0,o.Uv)(A,a)?s.v.CLEARED:s.v.APPLIED}),[j,z]=(0,n.useState)(a);(0,n.useEffect)(()=>{l&&I({type:"LOADING"})},[l]),(0,n.useEffect)(()=>{if(l||k.isFetching&&0===a.length)return;if(!(0,o.a$)(j,a))return void I({type:"LOADING_COMPLETED_OR_FAILED"});let t=a;c||(t=u([...a]),P({unifiedFilterModels:[...a],baseCacheKey:d})),I({type:"RESET_FILTERS",payload:[t,e?.(t)||{}]}),z(a)},[e,a,j,l,k.isFetching,u,P,d,c]);let E=(0,n.useMemo)(()=>({filterState:k,dispatch:I,refreshFiltersData:r}),[k,r]);return(0,C.jsx)(T,{value:E,children:t})},E=({bookmark:e="",children:t,generateInitFilterCb:a})=>{let i=(0,S.Z)(),{data:n=null,refresh:l,isLoaded:s}=(0,A.Z)(!i&&e?{name:"ApiResource",options:{url:"/v3/filters/",data:{bookmark_string:e}}}:null),{cachedProductFilterOneBarModules:d}=(0,r.l)(),c=d.map(o.tx).filter(Boolean);return(0,C.jsx)(z,{applyInitFilters:a,filterModels:(i?c:n)||[],isFetching:i?0===c.length:!s||!e,refreshFiltersData:l,children:t})},B=(void 0!==i||(i=a(932334)).hash&&"92b841173868ce353dd00b5fce287546"!==i.hash&&console.error("The definition of 'UnifiedFiltersContext_oneBarModules' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),R=({children:e,oneBarModulesKey:t})=>{let{data:a,isFetching:i,isLoaded:r}=(0,k.Z)(),{oneBarModules:o}=a||{},d=(0,l.useFragment)(B,t),c=(0,n.useMemo)(()=>({dispatch:()=>{},filterState:{models:[],availableFilterModels:[],appliedFilters:{},filters:{},isFetching:i,pendingDeletedSelections:{},status:s.v.CLEARED},refreshFiltersData:I}),[i]),u=(d?[d]:o?.map(e=>e&&{action:e.action?{filters:e.action.filters?e.action.filters.map(e=>({isSelected:e.is_selected??null,id:e.id??null,display:e.display?{displayText:e.display.display_text??null}:null,action:e.action?{feedUrl:e.action.feed_url??null}:null})):null}:null,id:e.id??null,moduleType:e.module_type??null}))?.find(({moduleType:e})=>0===e),h=u?.action?.filters;if(!u||!h)return(0,C.jsx)(T,{value:c,children:e});let _=u.id||"",p={[_]:{id:_,selectedOptionId:h.find((e,t)=>e?.isSelected&&0!==t)?.id||"",type:"single",lastChangedLocation:1}};return(0,C.jsx)(z,{filterModels:[{filter_component_type:2,filter_options:h.map((e,t)=>({label:e?.display?.displayText||"",id:e?.id||"",string_value:e?.action?.feedUrl||"",is_selected:"boolean"==typeof e?.isSelected?e.isSelected:0===t})),id:_,title:"",product_filter_type:4}],filters:p,isFetching:!r,refreshFiltersData:I,children:e})}},675450:function(e,t,a){a.d(t,{$:()=>i,v:()=>n});let i=50,n={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},190665:function(e,t,a){a.d(t,{Z:()=>c});var i=a(433100),n=a(310878),l=a(17832),r=a(986475),s=a(537701),o=a(629724),d=a(148);function c(){let{brands:e,colors:t,domains:a,onSale:c,priceMax:u,priceMin:h}=(0,d.n)(),_=(0,n.VA)(),{cachedProductFilterOneBarModules:p}=(0,i.l)(),g=Number((0,o.Z)().filter_location);if(1===g){let{filterState:e}=_||{};return e?(0,l.Ax)(e.appliedFilters,e.models):null}if(0===g){let i=(0,r.Z)(s.Z,!0)(p.map(e=>e.action?.filter).filter(Boolean));return(0,l.vJ)({brandsParam:e,colorsParam:t,domainsParam:a,onSaleParam:c,priceMaxParam:u,priceMinParam:h,unifiedFilterModels:i})}return null}},178226:function(e,t,a){a.d(t,{Z:()=>l});var i=a(312048),n=a(575820);function l(){return!!(0,n.mB)((0,i.TH)().search).brands}},735243:function(e,t,a){a.d(t,{Z:()=>r});var i=a(312048),n=a(501010),l=a(575820);function r(){let{checkExperiment:e}=(0,n.Z)(),t=(0,i.TH)(),{colors:a}=(0,l.mB)(t.search);return!!a&&!!e("shopping_onebar_color_filter",{dangerouslySkipActivation:!0}).anyEnabled}},252974:function(e,t,a){a.d(t,{Z:()=>n});var i=a(501010);function n(){let{checkExperiment:e}=(0,i.Z)();return e("dweb_search_shopping_filter_sds_dep_removal_v2",{dangerouslySkipActivation:!0}).anyEnabled}},250182:function(e,t,a){a.d(t,{Z:()=>l});var i=a(312048),n=a(575820);function l(){return!!(0,n.mB)((0,i.TH)().search).domains}},531624:function(e,t,a){a.d(t,{Z:()=>l});var i=a(312048),n=a(575820);function l(){let e=(0,i.TH)(),{price_max:t,price_min:a}=(0,n.mB)(e.search);return!!(a??t)}},17832:function(e,t,a){a.d(t,{Ak:()=>P,Ax:()=>v,B1:()=>h,LG:()=>S,P5:()=>g,UP:()=>A,Uv:()=>_,a$:()=>c,eF:()=>w,i7:()=>m,iP:()=>p,nZ:()=>d,ph:()=>u,rc:()=>y,tx:()=>x,vJ:()=>b});var i=a(675450),n=a(360033),l=a(477738);let r=e=>e.map(({filter_component_type:e,filter_options:t,title:a})=>({filter_component_type:e,filter_options:t?.map(({id:e,label:t,count:a,image_url:i,is_verified:n,numeric_value:l,string_value:r,unit:s})=>({id:e,label:t,count:a,image_url:i,is_verified:n,numeric_value:l,string_value:r,unit:s})),title:a})),s=(e,t)=>{if(!e&&!t)return!1;if(!e||!t)return!0;if("single"===e.type&&"single"===t.type)return e.selectedOptionId!==t.selectedOptionId;if("multi"===e.type&&"multi"===t.type)return!(0,n.ZP)(e.selectedOptionIds,t.selectedOptionIds);if("range"===e.type&&"range"===t.type)return e.min!==t.min||e.max!==t.max;throw Error("Filter type specific return must be specified")},o=e=>!e||!Object.keys(e).length,d=(e,t)=>{if(o(e)&&o(t))return!1;if(o(e)||o(t)||e&&t&&Object.entries(e).length!==Object.entries(t).length)return!0;for(let a in e)if(s(e[a],t?.[a]))return!0;return!1},c=(e,t)=>!(0,n.ZP)(r(e),r(t)),u=(e,t)=>{if("single"===e.type)return!e.selectedOptionId;if("multi"===e.type)return 0===e.selectedOptionIds.size;if("range"===e.type)return!!t?.filter_options&&e.min===t.filter_options[0]?.numeric_value&&e.max===t.filter_options[2]?.numeric_value;throw Error("Filter type specific return must be specified")},h=(e,t)=>{try{for(let a in e){let i=e[a],n=t.find(e=>e.id===i?.id);if(i&&!u(i,n))return!1}return!0}catch(e){return!0}},_=(e,t)=>{if(!t||0===t.length)return!1;let a=t[0];if(!a)return!1;switch(a?.filter_component_type){case 2:let i=a.filter_options?.[0];for(let t in e){let a=e[t];if(!a)break;if("selectedOptionId"in a&&a.selectedOptionId===i?.id)return!0}return!1;case 1:for(let t in e){let i=e[t];if(!i)break;if(i.id===a.id&&"selectedOptionIds"in i&&0===i.selectedOptionIds.size)return!0}return!1;default:return!1}},p=e=>e.map(e=>{switch(e.filter_component_type){case 2:let t=e.filter_options?.find(e=>e.is_selected)?.id;return t?{selectedOptionId:t,id:e.id,type:"single"}:null;case 1:let a=e.filter_options?.filter(e=>e.is_selected).map(({id:e})=>e);return a&&a.length>0?{selectedOptionIds:new Set(a),id:e.id,type:"multi"}:null;default:return null}}).reduce((e,t)=>t?{...e,[t.id]:t}:e,{}),g=e=>{if(!e||0===e.length)return{};let t=e[0];switch(t?.filter_component_type){case 2:let a=t.filter_options?.[0]?.id;return a&&"string"==typeof t.id?{[t.id]:{selectedOptionId:a,lastChangedLocation:1,id:t.id,type:"single"}}:{};case 1:return"string"==typeof t.id?{[t.id]:{selectedOptionIds:new Set,lastChangedLocation:1,id:t.id,type:"multi"}}:{};default:return{}}},f=e=>e.map(e=>{let{filter_id:t,filter_options:a,product_filter_type:i}=e,n=t;return"number"==typeof i&&(n+=`_${i}`),a.length>0&&(n+=":",a.forEach((e,t)=>{let{filter_option_id:i,numeric_value:l,string_value:r,unit:s}=e;n+=`${i}`,"number"==typeof l&&(n+=`_${l}`),"string"==typeof r&&(n+=`_${r}`),"string"==typeof s&&(n+=`_${s}`),t<a.length-1&&(n+=",")})),n}).join("|"),m=({brands:e,colors:t,domains:a,onSale:i,priceMax:n,priceMin:r,scope:s,unifiedFilterModels:o})=>{let d={};for(let{filter_options:c,id:u,product_filter_type:h}of o)if(u&&c?.length){if(1===h&&("number"==typeof r||"number"==typeof n)){let[e,t,a,i]=c,l=r??a?.numeric_value??e?.numeric_value??0,s=n??i?.numeric_value??t?.numeric_value??100;d[u]={min:l,max:s,id:u,type:"range",lastChangedLocation:1}}if(0===h&&a&&a.length>0){let e=a.map(e=>{let t=c.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);e.length>0&&(d[u]={id:u,lastChangedLocation:1,selectedOptionIds:new Set(e),type:"multi"})}if(3===h&&e&&e.length>0){let t=e.map(e=>{let t=c.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);t.length>0&&(d[u]={id:u,lastChangedLocation:1,selectedOptionIds:new Set(t),type:"multi"})}if(6===h&&t&&t.length>0){let e=t.map(e=>{let t=c.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);e.length>0&&(d[u]={id:u,lastChangedLocation:1,selectedOptionIds:new Set(e),type:"multi"})}if(4===h&&s){let e=(0,l.gi)(s),t=c.find(({search_type:t})=>t===e);t?.id&&(d[u]={id:u,lastChangedLocation:1,selectedOptionId:t.id,type:"single"})}if("number"==typeof h&&new Set([7,8,9]).has(h)&&i){let e=c[0]?.id;e&&(d[u]={id:u,lastChangedLocation:1,selectedOptionId:e,type:"single"})}}return d},b=({brandsParam:e,colorsParam:t,domainsParam:a,onSaleParam:i,priceMaxParam:n,priceMinParam:l,unifiedFilterModels:r})=>{let s=[],o=Number(l),d=Number(n),c=Number.isNaN(o)?void 0:o,u=Number.isNaN(d)?void 0:d,h=a?.split(",").filter(Boolean)??[],_=e?.split(",").filter(Boolean)??[],p=t?.split(",").filter(Boolean)??[];for(let{filter_options:e,id:t,product_filter_type:a}of r)if(t&&e?.length){if(1===a&&"number"==typeof c&&"number"==typeof u){let i={filter_id:t,filter_options:e.slice(0,2).filter(e=>void 0!==e.id).map((e,t)=>({filter_option_id:e.id,numeric_value:0===t?c:u,unit:e.unit||"USD"})),location:0,product_filter_type:a};s.push(i)}if(0===a&&h&&h.length>0){let i=h.map(t=>{let a=e.find(e=>e.string_value===t);return a?a.id:null}).filter(Boolean);if(i.length>0){let e={filter_id:t,filter_options:i.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:a};s.push(e)}}if(3===a&&_&&_.length>0){let i=_.map(t=>{let a=e.find(e=>e.string_value===t);return a?a.id:null}).filter(Boolean);if(i.length>0){let e={filter_id:t,filter_options:i.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:a};s.push(e)}}if(6===a&&p&&p.length>0){let i=p.map(t=>{let a=e.find(e=>e.string_value?.toLowerCase()===t.toLowerCase());return a?a.id:null}).filter(Boolean);if(i.length>0){let e={filter_id:t,filter_options:i.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:a};s.push(e)}}if(7===a&&i){let n=e[0]?.id;if(n){let e={filter_id:t,filter_options:[{filter_option_id:n,numeric_value:Number(i)}],location:0,product_filter_type:a};s.push(e)}}}return 0===s.length?null:f(s)},y=({filterMap:e,isInWebHundredPercentProductLoadExp:t,models:a})=>{let i=null,n=null,r=!1,s=null,o=null,d=null,c=null,u=null;for(let h in e){let _=e[h];if(_){let e=a.find(e=>e.id===_.id);if(e)if("range"===_.type&&1===e.product_filter_type)d=_.min,o=_.max;else if("multi"===_.type&&0===e.product_filter_type){let t=e.filter_options?.filter(e=>_.selectedOptionIds.has(e.id||""));s=t?.map(e=>e.string_value).filter(Boolean)}else if("multi"===_.type&&3===e.product_filter_type){let t=e.filter_options?.filter(e=>_.selectedOptionIds.has(e.id||""));i=t?.map(e=>e.string_value).filter(Boolean)}else if("multi"===_.type&&6===e.product_filter_type){let t=e.filter_options?.filter(e=>_.selectedOptionIds.has(e.id||""));n=t?.map(e=>e.string_value).filter(Boolean)}else if("single"===_.type&&4===e.product_filter_type){let a=e.filter_options?.find(e=>_.selectedOptionId===e.id),i=a&&void 0!==a.search_type?(0,l.zh)(a.search_type):l.lw.PINS;u=i,t&&(u=i===l.lw.PINS_BUYABLE?l.lw.PINS:i,r=i===l.lw.PINS_BUYABLE)}else"single"===_.type&&7===e.product_filter_type&&(c=e.filter_options?.[0]?.numeric_value)}}let h=a.find(e=>4===e.product_filter_type),_=h?.filter_options?.find(e=>e.is_selected);return null===u&&"number"==typeof _?.search_type&&(u=(0,l.zh)(_.search_type)),{brands:i,colors:n,commerce_only:r,domains:s,max:o,min:d,on_sale:c,scope:u}},v=(e,t)=>{let a=[];return(Object.entries(e).forEach(([e,i])=>{let n=t.find(e=>e.id===i.id);if(!n||4===n.product_filter_type||"number"!=typeof n.product_filter_type||!n.filter_options)return;let l=[];if("range"===i.type){let[e,t]=n.filter_options;if(!e?.id||!t?.id)return;l=[{filter_option_id:e.id,numeric_value:i.min,unit:e.unit},{filter_option_id:t.id,numeric_value:i.max,unit:t.unit}]}if("single"===i.type){let e=n.filter_options.find(e=>e.id===i.selectedOptionId);if(!e?.id)return;l=[{filter_option_id:e.id,numeric_value:e.numeric_value,string_value:e.string_value}]}if("multi"===i.type){let e=n.filter_options.filter(e=>e.id&&i.selectedOptionIds.has(e.id));if(0===e.length)return;l=e.filter(e=>void 0!==e.id).map(e=>({filter_option_id:e.id,numeric_value:e.numeric_value,string_value:e.string_value}))}a.push({filter_id:e,filter_options:l,location:i.lastChangedLocation,product_filter_type:n.product_filter_type})}),a&&0!==a.length)?f(a):null},x=e=>{let{filter:t,title:a}=e.action||{},{title:i}=t||{},n=a||i;if(!t||!n)return null;let{filterComponentType:l,productFilterType:r,id:s}=t,o=(t.filterOptions||[]).filter(Boolean);if(void 0===l||void 0===o||0===o.length||null==r||null==s)return null;let d=(e=>{let t=e.map(e=>{if(!e)return null;let{auxData:t,id:a,imageUrl:i,isVerified:n,label:l,numericValue:r,searchType:s,stringValue:o,unit:d,rules:c}=e;return null===i||null===i||null===r||null===n||null===o||null===d?null:{id:a||"",label:l||"",count:0,image_url:i,is_verified:n,numeric_value:r,...c?{rules:[...c]}:{},..."number"==typeof s?{search_type:s}:{},string_value:o,unit:d,..."string"==typeof t?.moduleId?{aux_data:{module_id:t.moduleId}}:{}}}).filter(Boolean);return t.length>0?t:null})(o);return d?{filter_component_type:l,filter_options:[...d],id:s||"",product_filter_type:r,title:n}:null};function S(e,t,a){let[n,l,r,s]=a,{numeric_value:o=0}=s??n??{},{numeric_value:d=o+i.$}=r??l??{},{unit:c="USD"}=n??{},u=e.filters[t]?.type==="range"?e.filters[t]:{min:o,max:d,id:t,type:"range",lastChangedLocation:1};return{defaultMax:d,defaultMin:o,unit:c,range:u}}function P(e){return"multi"!==e.type?e:{...e,selectedOptionIds:new Set}}function A(e,t){let a=[];return Object.entries(t).forEach(([t,i])=>{let n=e.find(e=>e?.id===t);if(n){let e=n.aux_data?.module_id;e&&a.push(e);let t=("multi"===i.type?Array.from(i.selectedOptionIds):"single"===i.type?[i.selectedOptionId]:[]).map(e=>{let t=n.filter_options?.find(t=>t.id===e);return t?.aux_data?.module_id||""}).filter(Boolean);a.push(...t)}}),a}function w(e,t){let a=[];return Object.keys(t).forEach(t=>{let i=e.find(e=>e?.id===t);if(i){let e=i.product_filter_type;e&&a.push(e)}}),a}},34531:function(e,t,a){a.d(t,{g:()=>o,h:()=>s});var i=a(686659),n=a(667294),l=a(785893);let r=(0,n.createContext)(void 0);function s({children:e}){(0,n.useEffect)(()=>{(0,i.Z)("VisitButtonAnimationContext","/app/common/react/components/closeup/VisitButtonAnimationContext.tsx")},[]);let[t,a]=(0,n.useState)(!1),s=(0,n.useRef)(null),o=()=>{null!==s.current&&(window.clearTimeout(s.current),s.current=null)};(0,n.useEffect)(()=>()=>o(),[]);let d=(0,n.useCallback)(()=>{o(),a(!0),s.current=window.setTimeout(()=>{a(!1),s.current=null},2e3)},[]),c=(0,n.useMemo)(()=>({animateVisitSite:t,triggerVisitButtonAnimation:d}),[t,d]);return(0,l.jsx)(r.Provider,{value:c,children:e})}function o(){return(0,n.use)(r)||{animateVisitSite:!1,triggerVisitButtonAnimation:()=>{}}}},552841:function(e,t,a){a.d(t,{H7:()=>_,CB:()=>p});var i=a(667294),n=a(213491),l=a(686659),r=a(740097),s=a(47755),o=a(465784),d=a(24246),c=a(785893);let u=({onConfirm:e})=>{(0,i.useEffect)(()=>{(0,l.Z)("EmailVerificationReminderModal","/app/packages/EmailVerificationReminderModal/EmailVerificationReminderModal.tsx")},[]);let t=(0,d.Z)(),[a,n]=(0,i.useState)(!1),u=()=>{n(!0),(0,s.Z)({url:"/v3/users/email/verify/resend/",method:"POST"})};return(0,c.jsx)(o.ZP,{accessibilityModalLabel:t._('Verify your email', 'Accessible label for email verification being required', 'Accessible label for email verification being required'),footer:(0,c.jsxs)(r.kC,{gap:{row:2,column:0},justifyContent:"end",children:[a?(0,c.jsx)(r.zx,{color:"gray",disabled:a,fullWidth:!0,onClick:u,size:"lg",text:t._('Email sent', 'Button text for verification email being sent', 'Button text for verification email being sent')}):(0,c.jsx)(r.zx,{color:"gray",disabled:a,fullWidth:!0,onClick:u,size:"lg",text:t._('Resend email', 'Button text for resending email verification email', 'Button text for resending email verification email')}),(0,c.jsx)(r.zx,{color:"red",fullWidth:!0,onClick:e,size:"lg",text:t._('Got it', 'Button text for acknowledging email verificaiton is required', 'Button text for acknowledging email verificaiton is required')})]}),heading:t._('Verify your email', 'Accessible label for email verification being required', 'Accessible label for email verification being required'),onDismiss:e,role:"alertdialog",children:(0,c.jsx)(r.xu,{padding:8,children:(0,c.jsx)(r.xe,{align:"center",size:"300",children:t._('Keep your account secure by verifying your email address. Check the inbox associated with this account for an email from us to continue using Pinterest.', 'Inform users that they need to verify their email to keep their account secure and continue using Pinterest', 'Inform users that they need to verify their email to keep their account secure and continue using Pinterest')})})})},{Provider:h,get:_}=(0,n.Z)("EmailVerificationReminderModal");function p({children:e}){let[t,a]=(0,i.useState)(!1),n=(0,i.useMemo)(()=>({showEmailVerificationReminderModal:()=>{a(!0)}}),[]);return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(h,{value:n,children:e}),t&&(0,c.jsx)(u,{onConfirm:()=>{a(!1)}})]})}},335357:function(e,t,a){a.d(t,{Z:()=>l});let i=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},n=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};n.prototype.set=function(e,t){let a=this._uidToData[e];a||(a=new i(e,t),this._uidToData[e]=a,this._numItems+=1),this._moveToFront(a),this._numItems>this._maxNumItems&&this._evict()},n.prototype.get=function(e){let t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},n.prototype.remove=function(e){let t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},n.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},n.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};let l=n},538985:function(e,t,a){a.d(t,{Cd:()=>f,G:()=>S,IA:()=>w,M5:()=>A,ML:()=>u,Oh:()=>v,Pe:()=>c,Tv:()=>p,Uy:()=>h,Xf:()=>y,cO:()=>m,ew:()=>_,nN:()=>b,p9:()=>x,yo:()=>g});var i=a(423234),n=a(112274),l=a(943271),r=a(245563),s=a(216975),o=a(841270),d=a(767415);let c=e=>e._('Make sure this age is accurate. Your birthdate is required for personalization, community safety and as part of our terms of service. For business accounts, use your own birthdate.', 'birthdateConfirmation.HelperText', 'Helper text notifying users to input their own birthday'),u=e=>e._('Use your own birthday, even if this a business account', 'birthdateConfirmation.HelperText.ownBirthday', 'Helper text notifying users to input their own birthday'),h=e=>e._('Oops! Please use a valid age to sign up.', 'existingUser.birthdaycollection.error.overage', 'Error message shown when overage (age over 120) user tries to register'),_=(e,t)=>{let{locale:a}=t.getLocaleData(),i=(0,r.Z)(e),n=i.toLocaleString(a,{month:"long"}),l=i.getDate().toString(),o=i.getFullYear();return(0,s.nk)(t._('Is {{month}} {{day}}, {{year}} your birthday?', 'birthdateConfirmation.heading', 'Header for the confirmation model verifying the age for the birthdate that the user inputted, month: month inputted into the fields, day: day inputted into the fields, year: year inputted into the fields'),{month:n,day:l,year:o})},p=(e,t,a,i,n=!1)=>{let l=(0,s.nk)(n?e._('Oops! Please enter a valid {{dayError}}{{monthError}}{{yearError}}.', 'settings birthday error message', 'label for settings birthday error message. dayError: Incorrect day. monthError: Incorrect month. yearError: Incorrect year.'):e._('Oops! Please enter a valid {{dayError}}{{monthError}}{{yearError}} to sign up.', 'signup birthday error message', 'label for sign up birthday error message'),{dayError:t?e._('day', 'dayError keyword placeholder', 'label for dayError keyword place holder'):"",monthError:a?e._('month', 'monthError keyword placeholder', 'label for monthError keyword place holder'):"",yearError:i?e._('year', 'monthError keyword placeholder', 'label for monthError keyword place holder'):""}).filter(e=>0!==e.length);return 3===l.length?l.join(""):l[0]+l.slice(1,-1).join(", ")+l[l.length-1]},g=({country:e})=>e&&e in o.T3?o.T3[e]:o.Ur,f=(e,t)=>{let a=new Date,i=new Date(a.getFullYear()-t,a.getMonth(),a.getDate());return new Date(e)<=i},m=new Date().getFullYear(),b=new Date().getFullYear()-120,y=12,v=1,x=1,S=31,P="yyyy-MM-dd",A=e=>{let t=new Date,a=new Date(b,t.getMonth(),t.getDate()),i=f(e,5),n=new Date(e)>a;return i&&n};function w(e){let t=(0,i.Z)(e,P,new Date);if((0,n.Z)(t))return e;let a=new Date(e);try{return(0,l.Z)(a,P)}catch{return(0,d.nP)("webapp.birthday_validation_error",{sampleRate:1,tags:{birthdate:e}}),e}}},59355:function(e,t,a){a.d(t,{Q:()=>o,Z:()=>d});var i=a(667294),n=a(104999),l=a(746868),r=a(730056),s=a(774838);function o(e,t){let{setViewContextData:a}=(0,l.A$)(),{requestIdentifier:o}=(0,s.B)(),d=(0,n.Z)(),{viewData:c}=(0,l.SU)();(0,i.useEffect)(()=>{e&&(a({viewType:e.view_type??1,viewParameter:e.view_parameter,viewData:e.view_data?(0,r.Z)(c,e.view_data):c,component:e.component,element:e.element,objectIdStr:e.object_id_str,auxData:e.aux_data,clientTrackingParams:e.clientTrackingParams}),d({...e,event_type:13,request_identifier:o}))},[t])}function d(e){let{children:t,log:a}=e;return o(a),t||null}},245563:function(e,t,a){a.d(t,{Z:()=>i});let i=e=>{let t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}},281215:function(e,t,a){a.d(t,{Z:()=>o});var i=a(167912),n=a(244311),l=a(369666),r=a(667294),s=a(360033);let o=function({strategy:e,query:t,variables:a,options:o,useGetLegacyResource:d,useGetLegacyPaginatedResource:c,useGetLegacyData:u}){let h;if("GraphQL"===e){let e=(0,n.getRequest)(t);return(0,i.useLazyLoadQuery)(e,a,o)}if(null!=d&&null!=c&&null!=u)throw Error(`Only pass one of those calls from the list: 
[useGetLegacyResource, useGetLegacyPaginatedResource, useGetLegacyData]
to useLazyLoadQueryOrLegacy`);let{actualVariables:_,refetch:p}=function(e,t){let a=(0,r.useRef)(e),i=(0,r.useRef)(null),[,n]=(0,r.useState)({}),l=(0,s.ZP)(e,a.current)?null==i.current?a.current:i.current:(a.current=e,i.current=null,a.current),o=(0,r.useCallback)(e=>{let a={...l,...e||{}};(0,s.ZP)(l,a)&&t(),i.current=a,n({})},[l,t]);return{actualVariables:l,refetch:o}}(a,()=>{h()});if(null!=u){let e=u(_);if(!e)return null;let{selections:a}=(0,n.getRequest)(t).fragment;return h=()=>{},(0,l.Z)(a,{kind:"LegacyData",singularLegacyData:e,refetchInfo:{refetch:p},paginationInfo:null})}if(null!=d){let e=d(_),{data:a}=e;if(h=e.refresh,null==a)return null;let{selections:i}=(0,n.getRequest)(t).fragment;return(0,l.Z)(i,{kind:"LegacyData",singularLegacyData:a,refetchInfo:{refetch:p},paginationInfo:null})}if(null!=c){let e=c(_),{data:a,isFetching:i,isAtEnd:r,fetchMore:s}=e;if(h=e.refresh,null==a)return null;let{selections:o}=(0,n.getRequest)(t).fragment;return(0,l.Z)(o,{kind:"PaginationLegacyData",paginationLegacyData:a,refetchInfo:{refetch:p},paginationInfo:{isLoadingNext:i,hasNext:!r,loadNext:s}},null)}throw Error("useGetLegacyData or useGetLegacyResource must be provided")}},907939:function(e,t,a){a.d(t,{Z:()=>i});function i(e,t){return({CANCEL:t._('Cancel', 'business.strings', 'A generic translation for \'Cancel\' used for labeling, CTAs, and buttons'),LEARN_MORE:t._('Learn more', 'business.strings', 'A generic translation for \'Learn more\' used for labeling, CTAs, and buttons'),OK:t._('OK', 'business.strings', 'A generic translation for \'OK\' used for labeling, CTAs, and buttons'),DONE:t._('Done', 'business.strings', 'A generic translation for \'Done\' used for labeling, CTAs, and buttons'),NEXT:t._('Next', 'business.strings', 'A generic translation for \'Next\' used for labeling, CTAs, and buttons'),SAVE_ACTION:t._('Save', 'business.strings', 'A generic translation for \'Save\', the action, used for labeling, CTAs, and buttons'),SAVE_NOUN:t._('Save', 'business.strings', 'A generic translation for \'Save\', the noun, used for labeling, CTAs, and buttons'),LOADING:t._('Loading', 'business.strings', 'A generic translation for \'Loading\' used for labeling, CTAs, and buttons'),ALL:t._('All', 'business.strings', 'A generic translation for \'All\' used for labeling, CTAs, and buttons'),EDIT:t._('Edit', 'business.strings', 'A generic translation for \'Edit\' used for labeling, CTAs, and buttons'),BACK:t._('Back', 'business.strings', 'A generic translation for \'Back\' used for labeling, CTAs, and buttons'),DELETE:t._('Delete', 'business.strings', 'A generic translation for \'Delete\' used for labeling, CTAs, and buttons'),NONE:t._('None', 'business.strings', 'A generic translation for \'None\' used for labeling, CTAs, and buttons'),IMPRESSIONS:t._('Impressions', 'business.strings', 'A generic translation for \'Impressions\' used for labeling, CTAs, and buttons'),SEARCH_ACTION:t._('Search', 'business.strings', 'A generic translation for \'Search\', the action,  used for labeling, CTAs, and buttons'),SEARCH_NOUN:t._('Search', 'business.strings', 'A generic translation for \'Search\', the noun,  used for labeling, CTAs, and buttons'),ACTIVE:t._('Active', 'business.strings', 'A generic translation for \'Active\' used for labeling, CTAs, and buttons'),VIDEO:t._('Video', 'business.strings', 'A generic translation for \'Video\' used for labeling, CTAs, and buttons'),SAVES_ACTION:t._('Saves', 'business.strings', 'A generic translation for \'Saves\', the action, used for labeling, CTAs, and buttons'),SAVES_NOUN:t._('Saves', 'business.strings', 'A generic translation for \'Saves\', the noun,  used for labeling, CTAs, and buttons'),CONTINUE:t._('Continue', 'business.strings', 'A generic translation for \'Continue\' used for labeling, CTAs, and buttons'),NO:t._('No', 'business.strings', 'A generic translation for \'No\' used for labeling, CTAs, and buttons'),STATUS:t._('Status', 'business.strings', 'A generic translation for \'Status\' used for labeling, CTAs, and buttons'),PROMOTE:t._('Promote', 'business.strings', 'A generic translation for \'Promote\' used for labeling, CTAs, and buttons'),NAME:t._('Name', 'business.strings', 'A generic translation for \'Name\' used for labeling, CTAs, and buttons'),SUBMIT:t._('Submit', 'business.strings', 'A generic translation for \'Submit\' used for labeling, CTAs, and buttons'),PAUSED:t._('Paused', 'business.strings', 'A generic translation for \'Paused\' used for labeling, CTAs, and buttons'),SEE_MORE:t._('See more', 'business.strings', 'A generic translation for \'See more\' used for labeling, CTAs, and buttons'),FOLLOWING:t._('Following', 'business.strings', 'A generic translation for \'Following\' used for labeling, CTAs, and buttons'),CLOSE:t._('Close', 'business.strings', 'A generic translation for \'Close\' used for labeling, CTAs, and buttons'),INSTALL_TAG:t._('Install tag', 'business.strings', 'A generic translation for \'Install tag\' used for labeling, CTAs, and buttons'),PIN_CLICKS:t._('Pin clicks', 'business.strings', 'A generic translation for \'Pin clicks\' used for labeling, CTAs, and buttons'),CONVERSIONS:t._('Conversions', 'business.strings', 'A generic translation for \'Conversions\' used for labeling, CTAs, and buttons'),SEND:t._('Send', 'business.strings', 'A generic translation for \'Send\' used for labeling, CTAs, and buttons'),KEYWORDS:t._('Keywords', 'business.strings', 'A generic translation for \'Keywords\' used for labeling, CTAs, and buttons'),CREATE:t._('Create', 'business.strings', 'A generic translation for \'Create\' used for labeling, CTAs, and buttons'),REPORT_ACTION:t._('Report', 'business.strings', 'A generic translation for \'Report\', the action, used for labeling, CTAs, and buttons'),REPORT_NOUN:t._('Report', 'business.strings', 'A generic translation for \'Report\', the noun,  used for labeling, CTAs, and buttons'),BOARDS:t._('Boards', 'business.strings', 'A generic translation for \'Boards\' used for labeling, CTAs, and buttons'),PINS:t._('Pins', 'business.strings', 'A generic translation for \'Pins\' used for labeling, CTAs, and buttons'),LINK_CLICKS:t._('Link clicks', 'business.strings', 'A generic translation for \'Link clicks\' used for labeling, CTAs, and buttons'),COMPLETED:t._('Completed', 'business.strings', 'A generic translation for \'Completed\' used for labeling, CTAs, and buttons'),PENDING:t._('Pending', 'business.strings', 'A generic translation for \'Pending\' used for labeling, CTAs, and buttons'),SELECT:t._('Select', 'business.strings', 'A generic translation for \'Select\' used for labeling, CTAs, and buttons'),ARCHIVED:t._('Archived', 'business.strings', 'A generic translation for \'Archived\' used for labeling, CTAs, and buttons'),ACTIONS:t._('Actions', 'business.strings', 'A generic translation for \'Actions\' used for labeling, CTAs, and buttons'),PRODUCT_GROUPS:t._('Product groups', 'business.strings', 'A generic translation for \'Product groups\' used for labeling, CTAs, and buttons'),CUSTOM:t._('Custom', 'business.strings', 'A generic translation for \'Custom\' used for labeling, CTAs, and buttons'),CREATE_PIN:t._('Create Pin', 'business.strings', 'A generic translation for \'Create Pin\' used for labeling, CTAs, and buttons'),COUNTRY:t._('Country', 'business.strings', 'A generic translation for \'Country\' used for labeling, CTAs, and buttons'),VIDEO_VIEWS:t._('Video views', 'business.strings', 'A generic translation for \'Video views\' used for labeling, CTAs, and buttons'),REMOVE:t._('Remove', 'business.strings', 'A generic translation for \'Remove\' used for labeling, CTAs, and buttons'),EMAIL_ADDRESS:t._('Email address', 'business.strings', 'A generic translation for \'Email address\' used for labeling, CTAs, and buttons'),PINTEREST:t._('Pinterest', 'business.strings', 'A generic translation for \'Pinterest\' used for labeling, CTAs, and buttons'),PRIVACY_POLICY:t._('Privacy Policy', 'business.strings', 'A generic translation for \'Privacy Policy\' used for labeling, CTAs, and buttons'),OTHER:t._('Other', 'business.strings', 'A generic translation for \'Other\' used for labeling, CTAs, and buttons'),REQUIRED:t._('Required', 'business.strings', 'A generic translation for \'Required\' used for labeling, CTAs, and buttons'),CLICKS_ACTION:t._('Clicks', 'business.strings', 'A generic translation for \'Clicks\', the action used for labeling, CTAs, and buttons'),CLICKS_NOUN:t._('Clicks', 'business.strings', 'A generic translation for \'Clicks\', the noun, used for labeling, CTAs, and buttons'),ENGAGEMENT:t._('Engagement', 'business.strings', 'A generic translation for \'Engagement\' used for labeling, CTAs, and buttons'),NOT_NOW:t._('Not now', 'business.strings', 'A generic translation for \'Not now\' used for labeling, CTAs, and buttons'),ADS:t._('Ads', 'business.strings', 'A generic translation for \'Ads\' used for labeling, CTAs, and buttons'),ERROR:t._('Error', 'business.strings', 'A generic translation for \'Error\' used for labeling, CTAs, and buttons'),CAMPAIGNS:t._('Campaigns', 'business.strings', 'A generic translation for \'Campaigns\' used for labeling, CTAs, and buttons'),VISIT_ACTION:t._('Visit', 'business.strings', 'A generic translation for \'Visit\', the action, used for labeling, CTAs, and buttons'),VISIT_NOUN:t._('Visit', 'business.strings', 'A generic translation for \'Visit\', the noun, used for labeling, CTAs, and buttons'),OUTBOUND_CLICKS:t._('Outbound clicks', 'business.strings', 'A generic translation for \'Outbound clicks\' used for labeling, CTAs, and buttons'),ADD:t._('Add', 'business.strings', 'A generic translation for \'Add\' used for labeling, CTAs, and buttons'),DESCRIPTION:t._('Description', 'business.strings', 'A generic translation for \'Description\' used for labeling, CTAs, and buttons'),SPEND_ACTION:t._('Spend', 'business.strings', 'A generic translation for \'Spend\', the action, used for labeling, CTAs, and buttons'),SPEND_NOUN:t._('Spend', 'business.strings', 'A generic translation for \'Spend\', the noun, used for labeling, CTAs, and buttons'),CREATE_AD:t._('Create ad', 'business.strings', 'A generic translation for \'Create ad\' used for labeling, CTAs, and buttons'),EXPAND:t._('Expand', 'business.strings', 'A generic translation for \'Expand\' used for labeling, CTAs, and buttons'),MEASURE_YOUR_AD_PERFORMANCE:t._('Measure your ad performance', 'business.strings', 'A generic translation for \'Measure your ad performance\' used for labeling, CTAs, and buttons'),CREATE_BOARD:t._('Create board', 'business.strings', 'A generic translation for \'Create board\' used for labeling, CTAs, and buttons'),SELECTED:t._('Selected', 'business.strings', 'A generic translation for \'Selected\' used for labeling, CTAs, and buttons'),PEOPLE:t._('People', 'business.strings', 'A generic translation for \'People\' used for labeling, CTAs, and buttons'),YES:t._('Yes', 'business.strings', 'A generic translation for \'Yes\' used for labeling, CTAs, and buttons'),TOTAL:t._('Total', 'business.strings', 'A generic translation for \'Total\' used for labeling, CTAs, and buttons'),AUDIENCE_INSIGHTS:t._('Audience insights', 'business.strings', 'A generic translation for \'Audience insights\' used for labeling, CTAs, and buttons'),DISMISS:t._('Dismiss', 'business.strings', 'A generic translation for \'Dismiss\' used for labeling, CTAs, and buttons'),PHONE_NUMBER:t._('Phone number', 'business.strings', 'A generic translation for \'Phone number\' used for labeling, CTAs, and buttons'),TODAY:t._('Today', 'business.strings', 'A generic translation for \'Today\' used for labeling, CTAs, and buttons'),GOT_IT:t._('Got it', 'business.strings', 'A generic translation for \'Got it\' used for labeling, CTAs, and buttons'),SUCCESS:t._('Success', 'business.strings', 'A generic translation for \'Success\' used for labeling, CTAs, and buttons'),AD_GROUPS:t._('Ad groups', 'business.strings', 'A generic translation for \'Ad groups\' used for labeling, CTAs, and buttons')})[e]}},289450:function(e,t,a){a.d(t,{Z:()=>i});function i(e){let t=!1;return{promise:new Promise((a,i)=>{e.then(e=>t?i({isCanceled:!0}):a(e),e=>t?i({isCanceled:!0}):i(e))}),cancel(){t=!0}}}},890678:function(e,t,a){a.d(t,{Z:()=>l});var i=a(629972),n=a(957547);function l(e){let{enabledRouteRefresh:t,headers:a,name:l,noCache:r,options:s,schema:o}=e??{name:i.fY,options:null},d=!e,{fetchResource:c,ref:u,fetchMore:h,isFetching:_,isLoaded:p,isRefreshing:g,refresh:f}=(0,n.Z)({enabledRouteRefresh:t,headers:a,name:l,noCache:r,options:s,schema:o},d,!1);return d||c(),{ref:u,fetchMore:h,isFetching:_,isLoaded:p,isRefreshing:g,refresh:f}}},346632:function(e,t,a){a.d(t,{Z:()=>l});var i=a(667294),n=a(338334);function l({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:a,resourceName:l,resourceOptions:r,value:s}){let o=(0,n.Z)({allowSearchOnMount:e,resourceName:l,resourceOptions:r,value:s});return(0,i.useEffect)(()=>{o?.length&&a(o)},[o]),t||null}},338334:function(e,t,a){a.d(t,{Z:()=>r});var i=a(667294),n=a(335357),l=a(57887);function r({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:a={},value:r}){let s=(0,i.useRef)(!1),o=(0,i.useRef)({}),[d,c]=(0,i.useState)([]),u=function({resourceName:e,resourceOptions:t}){let a=(0,l.vL)(),r=(0,i.useRef)(void 0);return r.current||(r.current=function({resourceCreator:e,resourceName:t,resourceOptions:a}){let i=e(t,{...a,count:"count"in a?a.count:5}),l=new n.Z,r=()=>{i.abort()},s=async(e,t)=>{if(i.isCalling()){let a=i.options?.term,n=i.options?.pin_scope;if(e===a&&t===n)return;r()}let{bookmarks:a,...n}=i.options||{};i.options={...n,term:e,pin_scope:t};let{data:s}=(await i.callGet({showError:!1})).resource_response,o=s?.items,d=s?.hint||{};return l.set(`${t}-${e}`,{hint:d,items:o}),{term:e,items:o,hint:d}};return async function(e,t){let a=l.get(`${t}-${e}`);if(a){let{items:t}=a;if(t&&t.length){r();let{hint:i}=a;return{hint:i,items:t,term:e}}}return e.length>=0?s(e,t):{hint:{},items:[],term:e}}}({resourceCreator:a,resourceName:e,resourceOptions:t})),r.current}({resourceName:t,resourceOptions:a}),h=a.pin_scope||"pins",_=`${h}-${r}`;return(0,i.useEffect)(()=>{(async()=>{if(null!=r&&""!==r&&(e||s.current))if(_ in o.current)c(o.current[_]);else try{let e=await u(r,h);if(e){let{items:t}=e;o.current[_]=t,c(t)}}catch(e){if("Resource call aborted"===e)return;throw e}s.current||(s.current=!0)})()},[r,h,_]),d}},42676:function(e,t,a){a.d(t,{Tb:()=>o,vW:()=>s});var i=a(575820),n=a(99737),l=a(405897),r=a(34550);function s({searchParams:e,sourceUrl:t,isDesktop:a,isAuthenticated:i,appliedUnifiedFilters:n}){let{autoCorrectionDisabled:l,bubbleId:r,category:s,currentlyAppliedFiltersParamTerm:o,domains:c,guidedSearchQuery:u,inGlobalSearch:h,journeyDepth:_,personalizationPinSig:p,priceMax:g,priceMin:f,query:m,requestParams:b,rs:y,scope:v,selectedOneBarModules:x,sourceId:S,sourceModuleId:P,topPinIds:A,user:w}=e;return function(e){let{selectedOneBarModules:t,currentlyAppliedFiltersParamTerm:a,personalizationPinSig:i,inGlobalSearch:n,appliedUnifiedFilters:l,initialCategory:r,initialDomains:s,initialMaxPrice:o,initialMinPrice:c,isDuplo:u,...h}=e,_=t?.split(","),p={...h,filters:a,selectedOneBarModules:_,selectedPinImgSig:i};if(n)return d(p);let g={...p,appliedUnifiedFilters:l,appliedProductFilters:function({category:e,domains:t,maxPrice:a,minPrice:i}){return[e,t,a,i].map(e=>e??"").join("-")}({category:r,domains:s,maxPrice:o,minPrice:c})};return u&&(g.domains=s,g.priceMax=o?parseInt(o,10):void 0,g.priceMin=c?parseInt(c,10):void 0),d(g)}({appliedUnifiedFilters:n,autoCorrectionDisabled:l,bubbleId:r,currentlyAppliedFiltersParamTerm:o,guidedSearchQuery:u,inGlobalSearch:h,initialCategory:s,initialDomains:c,initialMaxPrice:g,initialMinPrice:f,isDuplo:!i||!a,journeyDepth:_,personalizationPinSig:p,query:m,requestParams:b,rs:y,scope:v,selectedOneBarModules:x,sourceId:S,sourceModuleId:P,sourceUrl:t,topPinIds:A,user:w})}function o({appliedProductFilters:e,applied_unified_filters:t,auto_correction_disabled:a,filters:i,journey_depth:n,query:l,rs:r,scope:s,selected_one_bar_modules:o,query_pin_sigs:d,source_id:c,source_module_id:u,top_pin_ids:h,user:_}){let p=[e,i,n,l,r,s,o,d,c,u,t,h,_].map(e=>e??"").join(":");return a?"auto-correction-disabled:"+p:p}function d(e){return{name:"BaseSearchResource",options:(e=>{let{query:t="",scope:a="pins",appliedUnifiedFilters:s=null,appliedProductFilters:o=null,filters:d=null,domains:c=null,priceMax:u=null,priceMin:h=null,rs:_=l.i.DIRECT_NAVIGATION,journeyDepth:p=null,sourceId:g=null,sourceModuleId:f=null,sourceUrl:m=null,selectedOneBarModules:b=null,selectedPinImgSig:y=null,user:v=null,autoCorrectionDisabled:x=!1,seoDrawerEnabled:S=!1,bubbleId:P=null,pageSize:A=null,requestParams:w=null,topPinIds:k=null}=e,C="undefined"!=typeof window?(0,r.M0)().getItem("pwt_performance_testing"):null,I=m&&m.includes("pwt_performance_testing"),T=!!(!0===C||"true"===C||I);return{query:t,scope:a,appliedProductFilters:o,domains:c,user:v,seoDrawerEnabled:S,applied_unified_filters:s,auto_correction_disabled:x,journey_depth:p,source_id:g,source_module_id:f,source_url:function(e){if(!e)return"";let t=new Set,a=e.split("?")[1];a&&a.split("&").forEach(e=>{e.includes("=")||t.add(e)});let{directory:l,queryKey:r}=(0,n.Z)((0,i.Gw)(e,["request_params"])),s=Object.keys(r).sort().map(e=>t.has(e)?e:`${e}=${r[e]}`).join("&");return s?`${l}?${s}`:l}(m),static_feed:T,selected_one_bar_modules:b,query_pin_sigs:y,page_size:A,price_max:u,price_min:h,request_params:w,top_pin_ids:k,article:P,corpus:y?"personalize":null,customized_rerank_type:y?"manas_graph_sage_only_wand_rewrite":null,filters:d,rs:_,redux_normalize_feed:!0}})({...e,autoCorrectionDisabled:!!e.autoCorrectionDisabled})}}},269941:function(e,t,a){a.d(t,{Z:()=>n});let i=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,n=e=>i.test(e)},537701:function(e,t,a){a.d(t,{Z:()=>i});function i(e,t){let a=t?.separateNumbers?/([A-Z]|\d)/g:/([A-Z])/g;return e.replace(a,(e,t)=>"_"+t.toLowerCase())}},314598:function(e,t,a){a.d(t,{Z:()=>i});function i(e,t){if(!t)return e;let a=new RegExp(/http(s?):/);if(!a.test(e)){let i=a.exec(t);i&&i.length&&(e=i[0]+e)}return e}},174481:function(e,t,a){a.d(t,{Z:()=>o});var i=a(667294);let n=null,l=!1,r=0,s=()=>{n&&clearTimeout(n),l=!0,n=setTimeout(()=>{l=!1},100)},o=()=>{let[e,t]=(0,i.useState)(!1),a=(0,i.useRef)(null);(0,i.useEffect)(()=>(0===r&&window.addEventListener("scroll",s),r+=1,()=>{a.current&&clearTimeout(a.current),(r-=1)||window.removeEventListener("scroll",s)}),[]);let n=e=>{a.current&&clearTimeout(a.current),a.current=e&&l?setTimeout(()=>n(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:(0,i.useRef)({onMouseOver:()=>n(!0),onMouseLeave:()=>n(!1)}).current}}},771690:function(e,t,a){a.d(t,{Z:()=>l});var i=a(667294),n=a(289450);function l(){let e=(0,i.useRef)([]),t=(0,i.useRef)({});return(0,i.useEffect)(()=>()=>{[...Object.keys(t.current).map(e=>t.current[e]),...e.current].forEach(e=>e())},[]),function(a,i){if(i){let e=t.current[i];e&&(e(),delete t.current[i])}let{cancel:l,promise:r}=(0,n.Z)(a);return i?t.current[i]=l:e.current=[...e.current,l],r}}},209179:function(e,t,a){a.d(t,{Z:()=>n});let i=/^(?:https?:\/\/)?([^\s\/?#."]+\.)+([^\s\/?#."]+)(\/[^\s?#]*)?(#[^\s]*)?(\?[^"]*)?$/;function n(e,t){return!!e&&i.test(e)&&(e.startsWith("http://")||e.startsWith("https://")||!!t?.protocolIsOptional)}},496883:function(e,t,a){a.d(t,{Bh:()=>p,C9:()=>A,CU:()=>d,ES:()=>w,FU:()=>z,GT:()=>c,Gy:()=>v,J_:()=>I,Jx:()=>m,Ks:()=>E,MZ:()=>x,Pg:()=>b,U2:()=>R,VC:()=>f,VG:()=>u,ZA:()=>h,Zt:()=>y,a3:()=>B,aH:()=>o,fS:()=>_,nw:()=>P,oR:()=>k,qA:()=>g,qp:()=>T,sG:()=>S,vd:()=>j,xk:()=>C});var i=a(538985),n=a(99737),l=a(209179);let r={January:31,February:29,March:31,April:30,May:31,June:30,July:31,August:31,September:30,October:31,November:30,December:31},s=e=>{let t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":" "},a=String(e).split("");return a.forEach((e,i)=>{let n=t[e];n&&(a[i]=n)}),a.join("")};function o(e){return(t,a)=>{let i=[];t&&/\S/.test(t)||i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}let d=RegExp("(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*|^\"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*\")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$","i");function c(e){return(t,a)=>{t=t&&t.trim();let i=[];t.match(d)||i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function u(e){return(t,a)=>{t=t&&t.trim();let i=[];t.match(/^[^0-9].*$/)||i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function h(e){return(t,a)=>{let i=[];if(t){let a=parseInt(t,10);Number.isNaN(a)?i.push(e.invalidAgeString):(e.ageTooShortString&&a<10&&i.push(e.ageTooShortString),a<=0||a>120?i.push(e.invalidAgeString):e.checkUnderAgeWithString&&a<18&&i.push(e.checkUnderAgeWithString))}let n={errors:i,warnings:[]};return a&&a(n),n}}function _(e){return(t,a)=>{let i=[],[n,l]=t.split(" ");if(n)if(n.match(/^[0-9]+$/)){let t=parseInt(n,10);(Number.isNaN(t)||t>31||t>r[l])&&i.push(e.invaliddobDateString)}else i.push(e.invaliddobDateString);let s={errors:i,warnings:[]};return a&&a(s),s}}function p(e){return(t,a)=>{let i=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),n=[],l=!1!==e.checkLength&&i.length<7;t&&(!t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)||l)&&n.push(e.message);let r={errors:n,warnings:[]};return a&&a(r),r}}function g(e){return(t,a)=>{let i=[];"number"==typeof t||"string"==typeof t&&(t=s(t=t&&t.trim()))&&!t.match(/^\d+$/)&&i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function f(e){return(t,a)=>{let i=[];"number"==typeof t||"string"==typeof t&&(t=s(t=t&&t.trim()))&&!t.match(/^[\d\ -]+$/)&&i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function m({message:e}){return(t,a)=>{let i=[];t&&!(0,l.Z)(t,{protocolIsOptional:!0})&&i.push(e);let n={errors:i,warnings:[]};return a&&a(n),n}}function b(e){return(t,a)=>{let i={errors:t&&!/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t)?[e.message]:[],warnings:[]};return a&&a(i),i}}function y(e){return(t,a)=>{let i=[];if(t)try{let a=(0,n.Z)(t);a&&a.protocol&&("http"!==a.protocol||"localhost"===a.hostname)||i.push(e.message)}catch(t){i.push(e.message)}let l={errors:i,warnings:[]};return a&&a(l),l}}function v(e){return(t,a)=>{let i=e.should_trim||!1,n=[];i&&(t=t&&t.trim());let l=t.length;"min"in e&&e.min>0&&l<e.min?n.push(e.minErrorString):"max"in e&&e.max>0&&l>e.max&&n.push(e.maxErrorString);let r={errors:n,warnings:[]};return a&&a(r),r}}function x(e){return(t,a)=>{let i=!e.checkExclusion,{substrings:n}=e,l=[];(i&&!n.some(e=>t.includes(e))||!i&&n.some(e=>t.includes(e)))&&l.push(e.message);let r={errors:l,warnings:[]};return a&&a(r),r}}function S(e){return(t,a)=>{let i=e&&e.targetValue,n=[];t!==i&&n.push(e.message);let l={errors:n,warnings:[]};return a&&a(l),l}}function P(e){return(t,a)=>{let i=[];(t?parseFloat(t):0)<e.value&&i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function A(e){return(t,a)=>{let i=new Date(t),n=[];e.date instanceof Date&&i instanceof Date&&e.date<i&&n.push(e.message);let l={errors:n,warnings:[]};return a&&a(l),l}}function w(e){return(t,a)=>{let n=new Date(t),l=e.date instanceof Date&&n instanceof Date,r=[];(l&&e.date<n||!(0,i.M5)(t))&&r.push(e.message);let s={errors:r,warnings:[]};return a&&a(s),s}}function k(e){return(t,a)=>{let i=[];/^[\x20-\x7E]*$/.test(t)||i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function C(e){return(t,a)=>{let i=2;if(e.hasFractionalCents)i=3;else if(e.currencyCode){let{maximumFractionDigits:t}=new Intl.NumberFormat(void 0,{style:"currency",currency:e.currencyCode}).resolvedOptions();i=t}let n=new RegExp(i?`^\\d*(\\.\\d{1,${i}})?$`:"^\\d*$"),l=[];t&&!t.match(n)&&(t=t&&t.trim(),l.push(e.message));let r={errors:l,warnings:[]};return a&&a(r),r}}function I(e){return(t,a)=>{t=t&&t.trim();let i=[],n=new Date(t);t&&!n.getTime()&&i.push(e.message);let l={errors:i,warnings:[]};return a&&a(l),l}}function T(e){return(t,a)=>{let i=t&&t.trim(),n=[];i&&!i.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&n.push(e.message);let l={errors:n,warnings:[]};return a&&a(l),l}}function j(e){return(t,a)=>{let i=[];e.pattern.test(t)||i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function z(e,t){return[].concat(...e.map(e=>e(t).errors))}async function E(e,t){return[].concat(...await Promise.all(e.map(async e=>{let a=e(t);return a instanceof Promise?(await a)(t).errors:a.errors})))}function B(e,t){let a="";return t.some(t=>{let i=t(e);return i.errors.length>0&&(a=i.errors[0],!0)}),a}async function R(e,t){let a="";for(let i of t){let t=i(e);if(t instanceof Promise){let i=(await t)(e);if(i.errors.length>0){a=i.errors[0];break}}else if(t.errors.length>0){a=t.errors[0];break}}return a}},171972:function(e,t,a){a.r(t),a.d(t,{default:()=>c});var i=a(686659),n=a(667294),l=a(740097),r=a(24246),s=a(116321),o=a(495629),d=a(785893);function c(e){(0,n.useEffect)(()=>{(0,i.Z)("PinRepEditButton","/app/www/AuthDesktopPinRep/components/PinRepEditButton.tsx")},[]);let t=(0,r.Z)(),{clientTrackingParams:a,style:c,useLegoStyles:u=!1,usePersistentOneClickSaveStyles:h,wrappingIconStyle:_,shouldUseLegoStyles:p,carouselSlotCurrentIndex:g,component:f,onDelete:m,onSubmit:b,onToggleModal:y,pinId:v,surface:x}=e,[S,P]=(0,n.useState)(!1),{onClick:A,carouselSlotCurrentIndex:w}=(0,o.Z)({carouselSlotCurrentIndexProp:g,component:f,pinId:v,setShowEditModal:P}),k=t._('Pin Saved', 'PinRepEditButton.SavedButtonLabel', 'saved button label on pin'),C=(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(l.hU,{accessibilityLabel:t._('Edit', 'edit button on pin', 'edit button on pin'),bgColor:c&&c.bgColor||"white",icon:"edit",iconColor:c&&c.iconColor||"darkGray",onClick:A,size:c&&c.size||"md"}),S&&v&&(0,d.jsx)(s.Z,{carouselSlotCurrentIndex:w,clientTrackingParams:a,onDelete:m,onHide:()=>{P(!1),y?.(!1)},onSubmit:b,pinId:v})]});return p?(0,d.jsx)(l.Fm,{accessibilityLabel:k,color:"primary",dataTestId:"saved-button",onClick:m,selected:!0,size:"VideoCarouselModule"===x?"sm":"lg",text:t._('Saved', 'PinRepEditButton.SavedButton', 'saved button on pin')}):u||h?(0,d.jsx)("div",{"data-test-id":"use-lego-styles-div",style:{..._||{}},children:C}):C}},841270:function(e,t,a){a.d(t,{KA:()=>l,T3:()=>n,Ur:()=>r,i5:()=>i,kx:()=>s});let i={AT:14,BE:13,BG:14,HR:16,CY:14,CZ:15,DK:13,EE:14,FI:13,FR:15,DE:16,GR:15,HU:16,IE:16,IT:14,LV:13,LT:14,LU:16,MT:13,NL:16,PL:16,PT:13,RO:16,SK:16,SI:15,ES:14,SE:13,GB:13},n={...i,KR:14},l=16,r=13,s=5},389222:function(e,t,a){a.d(t,{Z:()=>u});var i=a(686659),n=a(667294),l=a(740097),r=a(319226),s=a(935059),o=a(24246),d=a(785893);function c({collaborator:e,isSelected:t,onToggle:a}){(0,n.useEffect)(()=>{(0,i.Z)("CollaboratorItem","/app/www/BoardCreate/AddCollaborators/CollaboratorItem.tsx")},[]);let c=(0,o.Z)(),u=(0,s.Z)(),h=u.isAuth?u?.avatar_color_index:void 0;return(0,d.jsxs)(l.kC,{children:[(0,d.jsxs)(l.kC,{flex:"grow",children:["email"===e.type||"email_share_suggestion"===e.type?(0,d.jsx)(l.xu,{alignItems:"center",color:"secondary",display:"flex",flex:"none",height:48,justifyContent:"center",marginEnd:3,rounding:"circle",width:48,children:(0,d.jsx)(l.JO,{accessibilityLabel:c._('Email icon', 'Email icon on board create modal', 'boardCreate.emailIcon'),color:"default",icon:"envelope",size:24})}):(0,d.jsx)(l.xu,{display:"flex",flex:"none",height:48,marginEnd:3,width:48,children:(0,d.jsx)(r.qE,{color:h,name:e.full_name||"",size:"fit",src:e.image_medium_url||e.image_large_url})}),"email"===e.type||"email_share_suggestion"===e.type?(0,d.jsx)(l.kC,{alignItems:"center",children:(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.xv,{size:"300",children:e.id})})}):(0,d.jsxs)(l.kC,{direction:"column",justifyContent:"center",children:[(0,d.jsx)(l.xu,{marginBottom:1,tabIndex:0,children:(0,d.jsx)(l.xv,{lineClamp:1,size:"300",children:e.full_name})}),(0,d.jsx)(l.xu,{tabIndex:0,children:(0,d.jsx)(l.xv,{size:"200",children:`@${e.username||""}`})})]})]}),(0,d.jsx)(l.kC,{flex:"none",children:(0,d.jsx)(l.zx,{onClick:()=>a(e),selected:t,size:"lg",text:t?c._('Added', 'Text that lets the user know they have added the contact', 'boardCreate.addedContactButton'):c._('Add', 'Text that lets the user know they can add that contact', 'boardCreate.addContactButton')})})]})}function u({contacts:e,selectedContactIds:t,onCollaboratorToggle:a,itemPadding:r=2}){return(0,n.useEffect)(()=>{(0,i.Z)("CollaboratorList","/app/www/BoardCreate/AddCollaborators/CollaboratorList.tsx")},[]),(0,d.jsx)(n.Fragment,{children:e.map(e=>(0,d.jsx)(l.xu,{paddingY:r,children:(0,d.jsx)(c,{collaborator:e,isSelected:t.includes(e.id),onToggle:a})},e.id))})}},983141:function(e,t,a){a.d(t,{Z:()=>u});var i=a(686659),n=a(667294),l=a(740097),r=a(104999),s=a(562400),o=a(24246),d=a(346632),c=a(785893);function u({searchValue:e,onSearchChange:t,onTypeaheadSuggestionsChange:a}){(0,n.useEffect)(()=>{(0,i.Z)("CollaboratorSearch","/app/www/BoardCreate/AddCollaborators/CollaboratorSearch.tsx")},[]);let u=(0,o.Z)(),h=(0,r.Z)(),_=(0,n.useMemo)(()=>(0,s.Z)(e=>{0!==e.length&&h({event_type:7383,view_type:5,view_parameter:3059,component:43,aux_data:{entered_query:e}})},3e3),[h]);return(0,c.jsx)(d.Z,{onTypeaheadSuggestionsChange:a,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:(0,c.jsx)(l.Um,{accessibilityLabel:u._('Search for collaborators by name or email', 'users can search for other people and add them as collaborators to a board', 'boardCreate.searchBar.accessibilityLabel'),id:"CollaboratorInviteSearchField",onChange:({value:e})=>{t({value:e}),_(e)},placeholder:u._('Search by name or email', 'text in search field to indicate that users could search for other users here', 'boadCreate.searchBar.placeHolder'),size:"lg",value:e})})}},771729:function(e,t,a){a.d(t,{Z:()=>r});var i=a(667294),n=a(661376),l=a(269941);function r({selectedContacts:e,onSelectedContactsChange:t}){let{data:a}=(0,n.Z)({name:"ShareSuggestionsResource",options:{field_set_key:"default",hide_group_conversations:!0},noCache:!0}),[r,s]=(0,i.useState)([]),[o,d]=(0,i.useState)("");(0,i.useEffect)(()=>{a&&s(a.map(e=>"email_share_suggestion"===e.type?{...e,id:e.email||""}:e))},[a]);let c=e.map(e=>e.id),u=[...e,(0,l.Z)(o)&&!c.includes(o)?{id:o,type:"email"}:null,...r.filter(e=>!c.includes(e.id))].filter(Boolean);return{searchValue:o,allContacts:u,handleTextFieldChange:({value:e})=>{d(e)},handleTypeaheadSuggestionsChange:e=>{s(e)},handleCollaboratorClick:a=>{c.includes(a.id)?t?.((e||[]).filter(e=>e.id!==a.id)):t?.([...e,a])}}}},477760:function(e,t,a){a.d(t,{Z:()=>Z});var i=a(686659),n=a(667294),l=a(740097),r=a(104999),s=a(319226),o=a(935059),d=a(907939),c=a(24246),u=a(774838),h=a(893957),_=a(496883),p=a(748261),g=a(230201),f=a(389222),m=a(983141),b=a(771729);function y(e){return e.map(({id:e})=>e)}function v(e,t){return e.filter(({type:e})=>t.includes(e))}var x=a(785893);function S({selectedContacts:e,setSelectedContacts:t}){(0,n.useEffect)(()=>{(0,i.Z)("BoardCreateGlowupAddCollaborator","/app/www/BoardCreateGlowup/BoardCreateGlowupAddCollaborator.tsx")},[]);let a=(0,n.useRef)(!1),{logContextEvent:r}=(0,g.u)();(0,h.Z)(()=>(r({event_type:13,view_type:5,view_parameter:3059,component:13305}),()=>{a.current||r({event_type:10521,view_type:5,view_parameter:3059,component:13305})}));let{searchValue:s,allContacts:o,handleTextFieldChange:d,handleTypeaheadSuggestionsChange:u,handleCollaboratorClick:_}=(0,b.Z)({selectedContacts:e,onSelectedContactsChange:t}),p=y(e),v=(0,c.Z)();return(0,x.jsxs)(l.kC,{direction:"column",gap:6,children:[(0,x.jsxs)(l.kC,{direction:"column",gap:2,children:[(0,x.jsx)(l.xv,{size:"200",children:v._('Collaborators can...', 'BoardCreateGlowupModal.collaborators.content.paragraph-1', 'Text before explaining current collaborator permission setting')}),(0,x.jsxs)(l.kC,{direction:"column",gap:1,children:[(0,x.jsx)(l.xv,{size:"400",weight:"bold",children:v._('Do (almost) everything', 'BoardCreateGlowupModal.collaborators.content.paragraph-2', 'Text explaining current collaborator permission setting')}),(0,x.jsx)(l.xv,{size:"200",children:v._('Add, move or delete Pins and sections, comment and react', 'BoardCreateGlowupModal.collaborators.content.paragraph-3', 'Text explaining current collaborator permission setting')})]})]}),(0,x.jsxs)(l.kC,{direction:"column",gap:2,children:[(0,x.jsx)(l.xv,{size:"200",children:v._('Invite someone on Pinterest', 'BoardCreateGlowupModal.collaborators.content.collaborator-picker-label', 'Text before explaining how to invite someone on Pinterest')}),(0,x.jsx)(m.Z,{onSearchChange:d,onTypeaheadSuggestionsChange:u,searchValue:s}),(0,x.jsx)(f.Z,{contacts:o,itemPadding:2,onCollaboratorToggle:e=>{_(e),a.current=!0},selectedContactIds:p})]})]})}function P({labelId:e,label:t,subtext:a,children:r}){return(0,n.useEffect)(()=>{(0,i.Z)("BoardCreateGlowupModalField","/app/www/BoardCreateGlowup/BoardCreateGlowupModalField.tsx")},[]),(0,x.jsxs)(l.kC,{alignItems:"center",children:[(0,x.jsx)(l.xu,{flex:"grow",children:(0,x.jsxs)(l.__,{htmlFor:e,children:[(0,x.jsx)(l.xv,{size:"300",weight:"bold",children:t}),(0,x.jsx)(l.xv,{color:"subtle",size:"200",children:a})]})}),r]})}var A=a(249459),w=a(236269),k=a(211731),C=a(427475),I=a(183230);let T=[96,58],j=["email","email_share_suggestion"],z=["user","user_share_suggestion"];var E=a(753806),B=a(333821),R=a(571808),F=a(659575),D=a(201198);function Z({boardCreateSource:e,images:t=[],initialValues:a,onBoardCreate:g,onClose:f}){(0,n.useEffect)(()=>{(0,i.Z)("BoardCreateGlowupModal","/app/www/BoardCreateGlowup/BoardCreateGlowupModal.tsx")},[]);let{suggestedBoardName:m,completeExperience:b,dismissExperience:Z}=function(e){let{completeExperience:t,dismissExperience:a}=(0,B.ZP)(),{experience:i}=(0,R.Z)(1000673),l=(0,n.useRef)(!1),r=(0,E.dG)(i)?i.display_data?.suggested_board_name:void 0;return{suggestedBoardName:r,completeExperience(){r&&!l.current&&(t(1000673,i?.experience_id),l.current=!0)},dismissExperience(){r&&!l.current&&(a(1000673,i?.experience_id),l.current=!0)}}}(1000673),L=m??a?.boardName,[O,N]=(0,n.useState)(L??""),[K,M]=(0,n.useState)(a?.privacy==="secret"),[U,H]=(0,n.useState)(),[V,G]=(0,n.useState)(!1),[q,W]=(0,n.useState)(a?.collaborators??[]),$=(0,c.Z)(),Y=(0,r.Z)(),{isRTL:Q}=(0,u.B)(),J=(0,o.Z)(),X=J.isAuth?J?.avatar_color_index:void 0,ee=!!U,{state:et,submitAction:ea,isPending:ei}=function({boardCreateSource:e,onBoardCreate:t,onRequestComplete:a,selectedCollaborators:i,auxData:l={}}){let r=(0,C.Z)(),s=(0,k.zC)(),o=(0,k.DK)(),[d,c,u]=(0,n.useActionState)(async(n,d)=>{let c={name:d.get("boardName"),privacy:null!=d.get("isSecretBoard")?A.Z.BoardPrivacy.SECRET:A.Z.BoardPrivacy.PUBLIC,aux_data:{...l,source:e}};try{let e=await r({boardCreateOptions:c}),a=v(i,j),n=v(i,z),l=[];a.length>0&&l.push(s(e.id,y(a))),n.length>0&&l.push(o(e.id,y(n)));try{await Promise.all(l)}catch(e){(0,I.T)({name:"BoardCreateGlowupFormSubmitActionState",message:"Failed to invite collaborators",message_detail:(0,w.Z)(e,"message"),stack:(0,w.Z)(e,"stack")})}t(e)}catch(t){let e=(0,w.Z)(t,"api_error_code");if(void 0!==e&&T.includes(e))return{serverBoardNameError:(0,w.Z)(t,"message")}}finally{a?.()}return{}},{});return{state:d,submitAction:c,isPending:u}}({boardCreateSource:e,onBoardCreate:g,onRequestComplete:()=>{G(!1)},selectedCollaborators:q,auxData:{...L?{suggested_board_name:L}:{}}}),{serverBoardNameError:en}=et;(0,h.Z)(()=>{Y({event_type:13,view_type:5,view_parameter:87,component:13025})});let el=()=>!V&&en?en:ee?U:void 0,[er,es]=(0,n.useState)("main"),eo=()=>{Y({event_type:101,view_type:5,view_parameter:87,component:13025,element:10592}),(0,n.startTransition)(()=>{es("collaborators")})},ed={main:{content:(0,x.jsxs)(l.kC,{direction:"column",gap:6,children:[(0,x.jsx)(l.kC,{justifyContent:"center",children:(0,x.jsx)(l.xu,{paddingY:2,width:213,children:(0,x.jsx)(p.Z,{images:t})})}),(0,x.jsx)(l.nv,{errorMessage:el(),id:"board-name",label:$._('Board name', 'BoardCreateGlowupModal.boardNameInput.label', 'Label for board name input'),name:"boardName",onChange:({value:e})=>{N(e);let t=(0,_.FU)((0,F.D)($),e);t.length>0?H(t[0]):H(void 0),G(!0),Z()},placeholder:$._('Name your board', 'BoardCreateGlowupModal.boardNameInput.placeholder', 'Placeholder for board name input'),size:"lg",value:O}),(0,x.jsx)(P,{label:$._('Make this board secret', 'BoardCreateGlowupModal.privacySettings.label', 'Label for privacy settings'),labelId:"secret-board-toggle",subtext:$._('Only you and collaborators will see this board', 'BoardCreateGlowupModal.privacySettings.subtext', 'Subtext for privacy settings'),children:(0,x.jsx)(l.rs,{id:"secret-board-toggle",name:"isSecretBoard",onChange:({value:e})=>{M(e),Y({event_type:e?106:107,view_type:5,view_parameter:87,component:13025,element:53})},switched:K})}),(0,x.jsx)(P,{label:$._('Group board', 'BoardCreateGlowupModal.groupBoardSettings.label', 'Label for group board settings'),labelId:"invite-collaborators-button",subtext:$._('Invite others to collaborate on this board', 'BoardCreateGlowupModal.groupBoardSettings.subtext', 'Subtext for group board settings'),children:q.length>0?(0,x.jsx)(l.xu,{"data-test-id":"avatar-group",children:(0,x.jsx)(s.HE,{addCollaborators:!0,collaborators:q.map(e=>({color:X,name:e.full_name??"",src:e.image_medium_url??""})),onClick:eo,role:"button",size:"md"})}):(0,x.jsx)(l.hU,{accessibilityLabel:$._('Invite collaborators', 'BoardCreateGlowupModal.groupBoardSettings.accessibilityLabel', 'Accessibility label for invite collaborators button'),bgColor:"lightGray",icon:"person-add",onClick:eo,size:"lg"})})]}),footer:(0,x.jsx)(D.Z,{disabled:!!el()||!O.trim(),form:"board-create-glowup-form",fullWidth:!0,onClick:()=>{Y({event_type:101,view_type:5,view_parameter:87,component:13025,element:249}),O===m&&b()},size:"lg",submitting:ei,text:$._('Create', 'BoardCreateGlowupModal.createButton', 'The button to submit the board creation form')}),heading:$._('Create a board', 'BoardCreateGlowupModal.heading', 'Heading for board create glowup modal'),accessibilityModalLabel:$._('Create a board', 'BoardCreateGlowupModal.accessibilityModalLabel', 'Accessibility label for board create glowup modal')},collaborators:{content:(0,x.jsx)(S,{selectedContacts:q,setSelectedContacts:W}),footer:null,heading:$._('Invite collaborators', 'BoardCreateGlowupModal.collaborators.heading', 'Heading for invite collaborators screen'),accessibilityModalLabel:$._('Invite collaborators', 'BoardCreateGlowupModal.collaborators.accessibilityModalLabel', 'Accessibility label for invite collaborators screen')}};return(0,x.jsx)(s.u_,{accessibilityModalLabel:ed[er].accessibilityModalLabel,align:"center",footer:ed[er].footer,heading:(0,x.jsx)(l.xu,{position:"relative",children:(0,x.jsxs)(l.kC,{alignItems:"center",justifyContent:"center",width:"100%",children:["main"!==er&&(0,x.jsx)(l.xu,{left:!Q,position:"absolute",right:Q,children:(0,x.jsx)(l.hU,{accessibilityLabel:$._('Go back', 'BoardCreateGlowupModal.backButton.accessibilityLabel', 'Accessibility label for back button'),icon:"arrow-back",onClick:()=>{(0,n.startTransition)(()=>{es("main")})},size:"lg"})}),"main"===er&&(0,x.jsx)(l.xu,{left:Q,position:"absolute",right:!Q,children:(0,x.jsx)(l.hU,{accessibilityLabel:(0,d.Z)("CLOSE",$),icon:"cancel",onClick:f,size:"lg"})}),(0,x.jsx)(l.kC.Item,{flex:"grow",children:(0,x.jsx)(l.qd,{accessibilityLevel:1,align:"center",size:"600",children:ed[er].heading})})]})}),onDismiss:f,size:"md",children:(0,x.jsx)("form",{id:"board-create-glowup-form",onSubmit:e=>{e.preventDefault();let t=e.currentTarget;(0,n.startTransition)(async()=>{await ea(new FormData(t))})},children:(0,x.jsx)(l.xu,{minHeight:600,paddingX:6,paddingY:3,children:ed[er].content})})})}},659575:function(e,t,a){a.d(t,{D:()=>o,e:()=>s});var i=a(249459),n=a(696749),l=a(496883);let r=(e,t)=>(0,l.Gy)({max:e,maxErrorString:(0,n.Z)(t._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a string is too long', 'Validation error when a string is too long'),{maxLength:e})}),s=e=>[r(i.Z.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)],o=e=>[(0,l.aH)({message:e._('Don\'t forget to name your board!', ' - ', ' -- ')}),r(i.Z.MAX_CHARS_FOR_BOARD_TITLE,e)]},514821:function(e,t,a){a.d(t,{q:()=>P,Z:()=>A});var i,n=a(686659),l=a(667294),r=a(686930);a(244311);var s=a(740097),o=a(104999),d=a(183e3),c=a(24246),u=a(774838),h=a(739405),_=a(893957),p=a(631284),g=a(785893);function f({action:e,viewType:t,auxData:a={}}){(0,l.useEffect)(()=>{(0,n.Z)("ButtonLinkAction","/app/www/ContentSensitivity/ButtonLinkAction.tsx")},[]);let i=(0,o.Z)(),r=(0,h.HG)(),{button:d}=e,c=d?.text||"",u=d?.link||"";return c&&u?(0,g.jsx)(s.ZP,{href:u,iconEnd:"arrow-up-right",onClick:()=>{(0,p.qA)({logContextEvent:i,auxData:{url:u,...a},isDesktop:r,viewType:t})},target:r?"blank":"self",text:c}):null}let m={0:"phone",1:"speech-ellipsis",2:"speech-outline",3:"globe",4:"whatsapp",5:"search"};function b({button:e,contactType:t,viewType:a,auxData:i={},viewParameter:r}){(0,l.useEffect)(()=>{(0,n.Z)("CustomActionLink","/app/www/ContentSensitivity/CustomActionLink.tsx")},[]);let d=(0,o.Z)(),c=(0,h.HG)(),u=[0,1].includes(t),_=e?.link||"",f=c&&u?`${e?.text} ${function(e){let[,t]=e.split(":");return t}(_)}`:e?.text,b=m[t]||"arrow-up-right";return f&&_?(0,g.jsx)(s.ZP,{href:_,iconStart:b,onClick:()=>{(0,p.qA)({viewParameter:r,logContextEvent:d,viewType:a,auxData:{url:_,...i},isDesktop:c})},target:"blank",text:f}):null}var y=a(384544),v=a(767415),x=a(903523);let S=(void 0!==i||(i=a(566436)).hash&&"6e21ec048bb4ac7d621865a42cf02a6c"!==i.hash&&console.error("The definition of 'SensitiveNotice_sensitivity' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function P({query:e,sensitivityKey:t,viewParameter:a}){(0,l.useEffect)(()=>{(0,n.Z)("SensitiveNotice","/app/www/ContentSensitivity/SensitiveNotice.tsx")},[]);let i=(0,d.Z)(S,t),r=i?.notices;return r?.map(t=>(0,g.jsx)(A,{notice:t,query:e,sensitivity:i,viewParameter:a,viewType:2},t.noticeId))}function A({boardId:e,boardSectionId:t,boardName:a,notice:i,viewType:d,viewParameter:m,query:S,sensitivity:P,objectType:A}){(0,l.useEffect)(()=>{(0,n.Z)("SensitiveNotice","/app/www/ContentSensitivity/SensitiveNotice.tsx")},[]);let w=(0,h.HG)(),k=(0,c.Z)(),C=(0,o.Z)(),{title:I,footer:T,description:j,image_type:z,content_image_url:E}=i||{},B=i?.actions??[],R=i?.suggested_resource,F=(0,u.B)(),{imageSRC:D,imageALT:Z}=function(e,t){let a={[x.b.HIDDEN]:k._('Hidden Illustration.', 'sensitiveNotice.hiddenIllustration', 'Sensitive illustration for hidden content'),[x.b.HOPE]:k._('An illustration of a landscape, clouds, and the sun seen through a window with both shutters open.', 'sensitiveNotice.hopeIllustration', 'Sensitive illustration for hope content'),[x.b.LOVE]:k._('An illustration of heart-shaped flowers arranged in a vase', 'sensitiveNotice.loveIllustration', 'Sensitive illustration for love content')};return e===x.b.CUSTOM?{imageSRC:t,imageALT:k._('Illustration.', 'sensitiveNotice.customIllustration', 'Sensitive illustration for custom content')}:e===x.b.NONE?{imageSRC:"",imageALT:""}:{imageSRC:p.HY[e],imageALT:a[e]}}(null==z?x.b.NONE:z,E||""),L={advisory_level:P?.advisory,entered_query:S,severity_level:P?.severity,stage:F.stage,advisory_type:P?.advisory_type,resource_country:P?.resource_country,board_name:a,board_id:e,board_section_id:t};return(0,_.Z)(()=>{d&&(C({aux_data:L,event_type:120,component:13367,view_parameter:m,view_type:d}),(0,v.QX)("webapp.advisories.view",1,{sampleRate:1,tags:{advisory_level:L.advisory_level,advisory_type:L.advisory_type,app:w?"DESKTOP_WEB":"MOBILE_WEB",resource_country:L.resource_country,placement:d,object_type:A}})),e&&5===d&&C({aux_data:{board_id:e,board_section_id:t??0},component:178,event_type:15549,view_parameter:m,view_type:d})}),(0,g.jsx)(s.xu,{"data-test-id":"search-advisory",children:(0,g.jsxs)(s.xu,{"data-test-id":"fresh-search-advisory",margin:"auto",maxWidth:"800px",padding:6,rounding:2,children:[D&&(0,g.jsx)(s.kC,{justifyContent:w?"center":"start",children:(0,g.jsx)(s.xu,{height:120,marginBottom:4,width:120,children:(0,g.jsx)(s.Ee,{alt:Z,fit:"contain",naturalHeight:1,naturalWidth:1,src:D})})}),!!I&&(0,g.jsx)(s.xu,{display:"flex",marginBottom:2,children:(0,g.jsx)(s.qd,{size:"400",children:I})}),!!j&&(0,g.jsx)(s.xu,{marginBottom:4,children:(0,g.jsx)(s.xv,{size:"200",children:(0,y.Z)(j?.text||"",j?.text_tags||[],C,L,w)})}),R&&(0,g.jsxs)(s.xu,{marginBottom:4,children:[(0,g.jsx)(s.xv,{size:"200",weight:"bold",children:k._('Suggested resource', 'sensitiveNotice.suggestedResource', 'This string is a subtitle. It appears in an alert message to users who may benefit from receiving mental health and crisis resources. Underneath the subtitle, we\u2019ll show a single resource that seems the most helpful for  the user. We use \u201Csuggested\u201D rather than \u201Crecommended\u201D to soften the framing, as this resource isn\u2019t personalized or an endorsement from Pinterest. The tone of this string is helpful, but not strongly encouraging')}),(0,g.jsx)(s.xu,{marginTop:2,children:(0,g.jsx)(s.xv,{size:"200",children:R})})]}),(0,g.jsx)(s.kC,{direction:"column",gap:2,children:B.map(e=>e?.button?.contact_type?(0,g.jsx)(b,{auxData:L,button:e.button,contactType:e.button.contact_type,viewParameter:m,viewType:d},e.id||e.actionId):(0,g.jsx)(f,{action:e,auxData:L,viewParameter:m,viewType:d},e.id))}),!!T&&(0,g.jsx)(s.xu,{marginTop:4,children:(0,g.jsx)(s.xv,{color:"subtle",size:"100",children:(0,g.jsx)(r.ZP,{options:{overrides:{b:{component:({children:e})=>(0,g.jsx)(s.rU,{display:"inline",href:T.link??"",onClick:()=>{(0,p.qA)({logContextEvent:C,auxData:{...L,url:T.link},isDesktop:w,placement:d,objectType:A,viewType:d,viewParameter:m})},target:"blank",children:(0,g.jsx)(s.xv,{color:"subtle",inline:!0,size:"100",weight:"bold",children:e})},T.link)}}},children:T.text})})})]})})}},631284:function(e,t,a){a.d(t,{Fx:()=>s,HY:()=>r,IR:()=>l,Uz:()=>o,qA:()=>d});var i=a(767415),n=a(903523);let l={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2},r={[n.b.HIDDEN]:"https://i.pinimg.com/originals/0d/fc/e7/0dfce74a82e89659495f1c9257fed188.png",[n.b.HOPE]:"https://i.pinimg.com/originals/46/d7/70/46d7705570b3c23562a70f39817b7b19.png",[n.b.LOVE]:"https://i.pinimg.com/originals/60/7e/d2/607ed2380d9fa28047f211dc6a7e8576.png"};function s(e){return null!=e&&!!e.notices&&e.notices.length>0}function o(e){return!!e&&e.severity===l.ABUSIVE}function d({auxData:e,isDesktop:t,logContextEvent:a,objectType:n,placement:l,viewType:r,viewParameter:s}){a({aux_data:e,component:13367,element:11180,event_type:t?101:102,view_parameter:s||43,view_type:r||2}),(0,i.QX)("webapp.advisories.action",1,{sampleRate:1,tags:{advisory_level:e.advisory_level,advisory_type:e.advisory_type,app:t?"DESKTOP_WEB":"MOBILE_WEB",url:e.url,resource_country:e.resource_country,object_type:n,placement:l}})}},384544:function(e,t,a){a.d(t,{Z:()=>r});var i=a(740097),n=a(631284),l=a(785893);function r(e,t,a,s={},o){let d=[],c=0;for(let r=0;r<t.length;r+=1){let u=t[r];if(5===u.tag_type&&u.link){let{offset:t,length:h,link:_}=u;if(null!=t&&null!=h&&null!=_){let u=e.substring(t,t+h),p=(0,l.jsx)(i.rU,{display:"inline",href:_,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),(0,n.qA)({auxData:{...s,url:_},isDesktop:o,logContextEvent:a})},target:"blank",underline:"hover",children:(0,l.jsx)(i.xv,{inline:!0,weight:"bold",children:u})},`link-${r}-${u}`);d.push((0,l.jsx)(i.xv,{inline:!0,children:e.substring(c,t)},`text-${r}-${u}`)),d.push(p),c=t+h}}}return(c>0&&d.push((0,l.jsx)(i.xv,{inline:!0,children:e.substring(c)},e.substring(c))),0===d.length)?[(0,l.jsx)("span",{children:e},e)]:d}},181735:function(e,t,a){a.d(t,{Z:()=>F});var i,n,l,r,s=a(686659),o=a(667294),d=a(230201),c=a(501010),u=a(774838),h=a(739405),_=a(893957),p=a(514821);a(167912);var g=a(740097),f=a(183e3),m=a(104999),b=a(748336),y=a(631284),v=a(166613),x=a(785893);let S=(void 0!==i||(i=a(222078)).hash&&"6ddea2ecd3dff2e1001c1e4d037cc858"!==i.hash&&console.error("The definition of 'CallToAction_advisoryAction' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function P({auxData:e,actionKey:t,alignCenter:a}){(0,o.useEffect)(()=>{(0,s.Z)("CallToAction","/app/www/ContentSensitivityOnDesktop/CallToAction.tsx")},[]);let i=(0,f.Z)(S,t),n=(0,m.Z)(),l=(0,h.HG)(),{title:r,description:d,button:c}=i,u=c?.text,_=r?.text,p=d?.text,P=c?.link??"",A=P.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""),w=u&&P.startsWith("http"),k=(0,b.Z)({url:P}),C=w&&k?"nofollow":"none";return e?.advisory_type===v.Uv?(0,x.jsx)(o.Fragment,{children:(0,x.jsxs)(g.kC,{direction:"column",gap:3,justifyContent:"start",children:[!!_&&(0,x.jsx)(g.xv,{align:"start",weight:"bold",children:_}),!!p&&(0,x.jsx)(g.xv,{align:"start",children:p}),(0,x.jsx)(g.ZP,{color:"tertiary",href:P,onClick:()=>{(0,y.qA)({auxData:{...e,url:P},isDesktop:l,logContextEvent:n})},rel:C,text:u||"Visit"})]})}):w?(0,x.jsxs)(o.Fragment,{children:[(0,x.jsx)(g.xu,{marginBottom:1,children:(0,x.jsx)(g.xv,{align:a?"center":"start",weight:"bold",children:""!==u?u:"Visit"})}),(0,x.jsx)(g.xu,{marginBottom:1,children:(0,x.jsx)(g.rU,{href:P,onClick:()=>{(0,y.qA)({logContextEvent:n,auxData:{...e,url:P},isDesktop:l})},rel:C,children:(0,x.jsx)(g.xv,{align:a?"center":"start",lineClamp:1,underline:!0,weight:"normal",children:A})})})]}):(0,x.jsxs)(o.Fragment,{children:[!!_&&(0,x.jsx)(g.xu,{marginBottom:1,children:(0,x.jsx)(g.xv,{align:a?"center":"start",weight:"bold",children:_})}),!!p&&(0,x.jsx)(g.xu,{marginBottom:1,children:(0,x.jsx)(g.xv,{align:a?"center":"start",children:p})})]})}let A=(void 0!==n||(n=a(52950)).hash&&"4970946a36017d9ad0c751fd70cc512c"!==n.hash&&console.error("The definition of 'HyperlinkFormatText_textTag' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function w({text:e,textTags:t,auxData:a}){let i=(0,m.Z)(),n=(0,h.HG)(),l=[],r=0;for(let s=0;s<t.length;s+=1){let o=t[s];if(5===o.tagType&&o.link){let{offset:t,length:d,link:c}=o;if(null!=t&&null!=d&&null!=c){let o=e.substring(t,t+d),u=(0,x.jsx)(g.xv,{inline:!0,weight:"bold",children:(0,x.jsx)(g.rU,{display:"inlineBlock",href:c,onClick:()=>{(0,y.qA)({logContextEvent:i,auxData:{...a,url:c},isDesktop:n})},target:"blank",underline:"hover",children:o})},`link-${s}-${t}`);l.push((0,x.jsx)("span",{children:e.substring(r,t)},`text-${s}-${r}`)),l.push(u),r=t+d}}}return(r>0&&l.push((0,x.jsx)("span",{children:e.substring(r)},`text-end-${r}`)),0===l.length)?[(0,x.jsx)("span",{children:e},"text-full")]:l}function k({auxData:e,textTagKey:t,text:a}){(0,o.useEffect)(()=>{(0,s.Z)("HyperlinkFormatText","/app/www/ContentSensitivityOnDesktop/HyperlinkFormatText.tsx")},[]);let i=(0,f.Z)(A,t);return(0,x.jsx)(w,{auxData:e,text:a,textTags:i})}let C=[4,14],I={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},T={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},j=(void 0!==l||(l=a(5755)).hash&&"5879c4710b107f258f42156bf3e47e37"!==l.hash&&console.error("The definition of 'DefaultNotice_advisoryNotice' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function z({auxData:e,advisory:t,inModal:a,noticeKey:i}){(0,o.useEffect)(()=>{(0,s.Z)("DefaultNotice","/app/www/ContentSensitivityOnDesktop/DefaultNotice.tsx")},[]);let{title:n,description:l,actions:r}=(0,f.Z)(j,i),d=!!r?.length&&(e?.advisory_type===v.Uv||!!t&&C.includes(t)),c=r?.length===1,u=l&&l.text||"";return(0,x.jsxs)(g.xu,{dangerouslySetInlineStyle:{__style:a?T:I},padding:6,rounding:2,children:[!!n&&!a&&(0,x.jsx)(g.xu,{display:"flex",marginBottom:2,children:(0,x.jsx)(g.qd,{size:"600",children:n})}),!!u&&l?.textTags!=null&&(0,x.jsx)(g.xu,{"data-test-id":"search-advisory",marginBottom:4,children:(0,x.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:(0,x.jsx)(g.xv,{align:a?"center":"start",overflow:"normal",children:(0,x.jsx)(k,{auxData:e,text:u,textTagKey:l.textTags})})})}),d&&(0,x.jsx)(g.xu,{direction:a?"column":"row",display:"flex",marginEnd:-2,marginStart:-2,wrap:!0,children:r?.map(t=>(0,x.jsx)(g.xu,{column:a||c?12:6,paddingX:2,paddingY:1,children:(0,x.jsx)(P,{actionKey:t,alignCenter:a||c,auxData:e})},t.actionId))})]})}let E=(void 0!==r||(r=a(90486)).hash&&"fa2efeb6b4c660680d9f3a0e156c8007"!==r.hash&&console.error("The definition of 'LegoNotice_advisoryNotice' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function B({auxData:e,noticeKey:t}){(0,o.useEffect)(()=>{(0,s.Z)("LegoNotice","/app/www/ContentSensitivityOnDesktop/LegoNotice.tsx")},[]);let a=(0,f.Z)(E,t),i=(0,m.Z)(),n=(0,h.HG)(),l={color:"#004b91",display:"block",fontSize:"28px",WebkitFontSmoothing:"antialiased"};return(0,x.jsxs)(g.xu,{alignItems:"center",direction:"column",display:"flex",marginBottom:3,width:"100%",children:[(0,x.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#86d1ce"}},display:"flex",justifyContent:"center",rounding:8,width:656,children:(0,x.jsxs)(g.xu,{"data-test-id":"search-advisory",height:"100%",padding:10,width:"100%",children:[(0,x.jsx)("span",{style:l,children:a.description?.textTags&&(0,x.jsx)(k,{text:a.description?.text||"",textTagKey:a.description.textTags})}),(0,x.jsx)(g.xu,{marginTop:6,children:(a.actions??[]).map(t=>{let a=t.button?.link;return a&&a.startsWith("tel")?(0,x.jsxs)(g.xu,{children:[(0,x.jsx)("span",{style:{fontWeight:"600",...l},children:t.title?.text}),(0,x.jsx)("span",{style:l,children:t.description?.text})]},t.actionId):(0,x.jsx)(g.rU,{href:a||"",onClick:()=>{(0,y.qA)({logContextEvent:i,auxData:{...e,url:a||"",isLegoNotice:!0},isDesktop:n})},children:(0,x.jsx)(g.xu,{display:"inlineBlock",children:(0,x.jsx)(g.xu,{alignItems:"center",color:"infoBase",display:"flex",height:44,justifyContent:"center",paddingX:12,rounding:"pill",children:(0,x.jsx)(g.xv,{color:"inverse",weight:"bold",children:t.button?.text||""})})})},t.actionId)})})]})}),!!a.footer&&(0,x.jsx)(g.xu,{paddingY:2,width:540,children:(0,x.jsx)(g.rU,{display:"inlineBlock",href:a.footer.link??"",onClick:()=>{(0,y.qA)({logContextEvent:i,auxData:{...e,url:a.footer?.link??"",isLegoNotice:!0},isDesktop:n})},target:"blank",underline:"hover",children:(0,x.jsx)(g.xv,{align:"center",color:"subtle",size:"100",children:(0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:a.footer.text??""}})})},a.footer.link)})]})}var R=a(767415);function F({boardId:e,isOwnBoard:t,boardName:a,boardSectionId:i,notices:n,query:l,sensitivity:r,viewParameter:g,viewType:f,inModal:m}){(0,o.useEffect)(()=>{(0,s.Z)("SensitiveContentNotice","/app/www/ContentSensitivityOnDesktop/SensitiveContentNotice.tsx")},[]),function({advisoryDetails:e,boardId:t,boardName:a,boardSectionId:i,query:n,sensitivity:l,viewParameter:r,viewType:s}){let{logContextEvent:o}=(0,d.u)(),c=(0,h.HG)();(0,_.Z)(()=>{s&&(o({aux_data:{entered_query:n,advisory_details:e,advisory_level:l?.advisory,severity_level:l?.severity,advisory_type:l?.advisory_type,resource_country:l?.resource_country},component:13367,event_type:120,view_parameter:r,view_type:s}),(0,R.QX)("webapp.advisories.view",1,{sampleRate:1,tags:{advisory_level:l?.advisory,advisory_type:l?.advisory_type,app:c?"DESKTOP_WEB":"MOBILE_WEB",resource_country:l?.resource_country,placement:5===s?"board":"search"}})),t&&5===s&&o({aux_data:{board_name:a,board_id:t,board_section_id:i??0},component:178,event_type:15549,view_parameter:r,view_type:s})})}({advisoryDetails:r?.advisory_details,boardId:e,boardSectionId:i,query:l,sensitivity:{advisory:r?.advisory,severity:r?.severity},viewParameter:g,viewType:f});let{checkExperiment:b}=(0,c.Z)(),y=(0,u.B)(),v={advisory_level:r?.advisory||null,severity_level:r?.severity||null,advisory_type:r?.advisory_type||"",stage:y.stage,resource_country:r?.resource_country||"",entered_query:l||""};if(b("ps_board_advisories_ui_refresh").anyEnabled){let l=t?4173:4174;return(0,x.jsx)(o.Fragment,{children:n?.map(t=>(0,x.jsx)(p.Z,{boardId:e,boardName:a,boardSectionId:i,notice:t,objectType:i?164:5,sensitivity:r,viewParameter:i?l:g,viewType:i?164:5},t.id))})}return(0,x.jsx)(o.Fragment,{children:n?.map(e=>2===e.style?(0,x.jsx)(B,{auxData:v,noticeKey:{type:"Legacy",data:e}},e.id):(0,x.jsx)(z,{advisory:r?.advisory,inModal:m,noticeKey:{type:"Legacy",data:e}},e.id))})}},166613:function(e,t,a){a.d(t,{IR:()=>n,St:()=>i,Uv:()=>r,Uz:()=>l});let i={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},n={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function l(e){return!!e&&e.severity===n.ABUSIVE}let r="THIRD_PARTY_TL"},728270:function(e,t,a){a.d(t,{CU:()=>u,ZP:()=>c,hi:()=>d});var i,n=a(422578),l=a(477738),r=a(148),s=a(657476);let o=(void 0!==i||(i=a(464788)).hash&&"547e5abdb645851996d6a1b1a4027c56"!==i.hash&&console.error("The definition of 'hasSensitivityNotices_sensitivity' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function d(e){let{notices:t,advisory:a,severity:i}=(0,n.useFragment)(o,e)||{};return{hasNotices:!!(t?.[0]&&null!==t[0].title),advisory:a,severity:i}}function c(e){if(null==e)return{hasNotices:!1};let{advisory:t,severity:a}=e,i=!!e.notices&&e.notices.length>0;return e.notices&&e.notices.length>0&&e.notices[0]?.title===null&&(i=!1),{hasNotices:i,advisory:t,severity:a}}function u(e){let{scope:t}=(0,r.n)(),{data:a,isLoaded:i}=(0,s.Z)(),n=d(e);if(t===l.lw.USERS)return n;if(!i||!a)return{hasNotices:!1};let{sensitivity:o}=a;return c(o)}},92242:function(e,t,a){a.d(t,{H:()=>d,W:()=>o});var i=a(667294),n=a(213491),l=a(57887),r=a(785893);let{Provider:s,get:o}=(0,n.Z)("LastSavedTo");function d({children:e}){let[t,a]=(0,i.useState)();(0,l.Z8)("BoardPickerBoardsShortlistResource",e=>{if(!t){let{data:t}=e.response.resource_response;a(t)}});let n=(0,i.useCallback)(e=>{let i=t?t.filter(t=>t.id!==e.id):[];a([e,...i])},[t]),o=(0,i.useMemo)(()=>({lastSavedTo:t,saveToBoard:n}),[t,n]);return(0,r.jsx)(s,{value:o,children:e})}},716848:function(e,t,a){a.d(t,{H:()=>i,J:()=>n});let{Provider:i,getMaybe:n}=(0,a(213491).Z)("PinCreateDeleteContext")},285676:function(e,t,a){a.d(t,{r:()=>T,Z:()=>I});var i,n,l,r,s,o=a(686659),d=a(667294);a(167912);var c=a(2171),u=a(470205),h=a(935059),_=a(707855),p=a(183e3),g=a(917569),f=a(890678),m=a(739405),b=a(621134),y=a(914253),v=a(228612),x=a(785893);let S=(void 0!==i||(i=a(46354)).hash&&"bb4e0fc2e1a319a6b7c65cb9ad5c8cb6"!==i.hash&&console.error("The definition of 'UnifiedPinRep_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),P=(void 0!==n||(n=a(748100)).hash&&"cf7ae619f5ec8cf58cf3302e69136b1d"!==n.hash&&console.error("The definition of 'UnifiedPinRepVariant_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),A=(void 0!==l||(l=a(128851)).hash&&"970c9e8a0b93cdd43095e6934563c7eb"!==l.hash&&console.error("The definition of 'UnifiedPinRepVariant_parentPin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),w=(void 0!==r||(r=a(268047)).hash&&"4706485911e34fec99070a2a4c272d94"!==r.hash&&console.error("The definition of 'UnifiedPinRepDefaultPinRep_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),k=(void 0!==s||(s=a(64219)).hash&&"cb2594cad81be6eec825977b7bcb2003"!==s.hash&&console.error("The definition of 'UnifiedPinRepDefaultPinRep_parentPin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s),C=e=>{var t,a,i,n;let{pinId:l,pinKey:r,parentPinKey:s,hideContextMenu:o,hideSendButton:h,hideEditButton:g,...f}=e,m=r&&"GraphQL"===(0,_.o)(r),S=(0,p.Z)(w,r),P=(0,p.Z)(k,s),A=(0,v.S6)()(l),C=(0,y.gC)(),I=(t=!!m,S||t?S:A?{type:"Legacy",data:A}:null),T=(0,c.Z)(),j=(0,d.useMemo)(()=>A?{type:"Legacy",data:A}:null,[A]),z=S||m||!T?I:j;return z&&(0,x.jsx)(u.Z,{name:"DefaultPinRep",type:"critical",children:(0,x.jsx)(d.Suspense,{children:(0,x.jsx)(b.Z,{...f,boardKey:(a=!!m,i=S?.pinnedToBoard||S?.board||null,n=C(A?.pinned_to_board?.id||A?.board?.id||""),a?i??null:n?{type:"Legacy",data:n}:null),hideContextMenu:o,hideEditButton:g,hideSendButton:h,parentPinKey:P,pinKey:z})})})};function I({duploQueryRef:e,...t}){(0,d.useEffect)(()=>{(0,o.Z)("UnifiedPinRep","/app/www/PinRep/UnifiedPinRep.tsx")},[]);let a=(0,p.Z)(S,e),i=(0,h.Z)(),n=(0,m.HG)(),l=(0,g.Z)();return(0,f.Z)(i.isAuth&&n&&l()?{name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}:null),(0,x.jsx)(C,{...t,parentPinKey:null,pinKey:a})}function T({pinKey:e,parentPinKey:t,...a}){(0,d.useEffect)(()=>{(0,o.Z)("UnifiedPinRep","/app/www/PinRep/UnifiedPinRep.tsx")},[]);let i=(0,p.Z)(P,e),n=(0,p.Z)(A,t);return(0,x.jsx)(C,{...a,parentPinKey:n,pinKey:i})}},738932:function(e,t,a){a.d(t,{Z:()=>u});var i=a(686659),n=a(667294),l=a(740097),r=a(24246),s=a(514223),o=a(785893);function d(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends n.Component{constructor(...e){super(...e),d(this,"setInputRef",e=>{e&&(this._input=e)}),d(this,"handleKeyDown",e=>{let{event:t}=e,{disabled:a,indexManager:i}=this.props;if(!a)switch(t.which){case s.Z.ENTER:case s.Z.NUMPAD_ENTER:t.preventDefault(),i.select();break;case s.Z.UP:t.preventDefault(),i.prev();break;case s.Z.DOWN:t.preventDefault(),i.next()}})}componentDidMount(){(0,i.Z)("PickerSearchField","/app/www/RepinPicker/PickerSearchField/PickerSearchField.tsx"),this._input&&this._input.focus()}render(){let{onChange:e,value:t}=this.props;return(0,o.jsx)(l.xu,{"data-test-id":"picker-search-field-container",role:"presentation",width:"100%",children:(0,o.jsx)(l.Um,{ref:this.setInputRef,accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:"lg",value:t})})}}let u=function(e){let t=(0,r.Z)();return(0,o.jsx)(c,{...e,i18n:t})}},103457:function(e,t,a){a.d(t,{Z:()=>f});var i=a(686659),n=a(667294),l=a(740097),r=a(24246),s=a(343111),o=a(71919),d=a(738932),c=a(694220),u=a(809995),h=a(653316),_=a(785893);function p(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends n.Component{constructor(...e){super(...e),p(this,"state",{searchQuery:""}),p(this,"handleSelectItem",e=>{let{onCreate:t,onSelected:a}=this.props;if(!e&&t){let{searchQuery:e}=this.state;t(e)}else e&&a(e);(t||e)&&this.setState({searchQuery:""})}),p(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),p(this,"renderSectionHeader",e=>{let{isRepin:t}=this.props;return e.title?(0,_.jsx)(l.xu,{children:(0,_.jsx)(l.xu,{paddingX:3,paddingY:1,children:(0,_.jsx)(l.qd,{accessibilityLevel:t?2:4,children:(0,_.jsx)(l.xv,{size:"200",children:e.title})})})}):null}),p(this,"renderRow",({item:e,hovered:t,sectionProps:a={}})=>{let{boardSavedTo:i,isSelectMode:n,disabledRowId:l}=this.props,{searchQuery:r}=this.state,{inSectionSelection:s=!1}=a,o=i&&i.board===e.id?i&&i.state:null,d="board_section"===e.type;return(0,_.jsx)(c.Z,{disabled:e.id===l&&s,isSection:d,isSelectMode:n,isWithinSectionPicker:s,item:e,saveState:o,searchQuery:r,selected:t})})}render(){let{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:a,getSections:i,isLoaded:n,onCreate:r,pinId:c}=this.props;if(!n)return(0,_.jsx)(l.xu,{paddingY:5,children:(0,_.jsx)(l.xH,{accessibilityLabel:this.props.i18n._('loading section picker', 'accessibility label for the loading spinner the repin picker', 'accessibility label for the loading spinner the repin picker'),show:!0})});{let{searchQuery:n}=this.state,p=i(n);return this.indexManager=new s.Z(p.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),(0,_.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{zIndex:0}},direction:"column",display:"flex",flex:"grow",height:"100%",minHeight:0,overflow:"auto",children:[!a&&(0,_.jsx)(l.xu,{children:(0,_.jsx)(l.xu,{marginBottom:4,marginTop:1,paddingX:3,children:(0,_.jsx)(d.Z,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:n})})}),(0,_.jsx)(o.Z,{disabled:!!e,grow:!a&&!n,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:p}),r&&(0,_.jsx)(l.xu,{borderStyle:p.length>1?"shadow":"none",children:(0,_.jsx)(h.Z,{buttonLabel:t,hasHoverState:!0,name:n,onClick:()=>r(n)})}),a&&r&&c&&(0,_.jsx)(u.Z,{onBoardSelected:r,pinId:c})]})}}componentDidMount(){(0,i.Z)("RepinPicker","/app/www/RepinPicker/RepinPicker.tsx")}}function f(e){(0,n.useEffect)(()=>{(0,i.Z)("RepinPicker","/app/www/RepinPicker/RepinPicker.tsx")},[]);let t=(0,r.Z)();return(0,_.jsx)(g,{...e,i18n:t})}},105435:function(e,t,a){a.d(t,{Z:()=>r});var i=a(667294),n=a(730448);function l(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r extends i.PureComponent{constructor(...e){super(...e),l(this,"setContainerRef",e=>{this.containerRef=e}),l(this,"fetchMoreIfNecessary",(0,n.Z)(()=>{let{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:a},i)=>e+t+(i?i(t):2*t)>a)(this.containerRef,t)&&e()},200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){let{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},832333:function(e,t,a){a.d(t,{Z:()=>u});var i=a(686659),n=a(667294),l=a(740097),r=a(785893);function s(e){return`${Math.min(100*e,100)}%`}function o({customCover:e,imgPos:t,imgUrl:a}){let[i,l]=(0,n.useState)({height:0,loaded:!1,width:0}),{height:r,loaded:o,width:d}=i;if((0,n.useEffect)(()=>{let e=new Image;e.onload=()=>{l({height:e.naturalHeight,loaded:!0,width:e.naturalWidth})},e.src=a},[a]),!e||!t||!r||!d)return{loaded:o,position:"center center"};let c=d-t.width,u=r-t.height,h=c>0?s(t.x/c):"center",_=u>0?s(t.y/u):"center";return{loaded:o,position:`${h} ${_}`}}function d(e){let{loaded:t,position:a}=o(e),{imgUrl:i}=e,n={backgroundImage:`url(${i})`,backgroundPosition:a,backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:"100%",backgroundColor:"#EFEFEF",position:"relative"};return(0,r.jsx)(l.xu,{"data-test-id":"cover-image-box",height:"100%",width:"100%",children:t&&(0,r.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:n},"data-test-id":"cover-image",children:(0,r.jsx)("div",{className:"imageWash",style:{position:"absolute"}})})})}function c(e){let{loaded:t,position:a}=o(e),{alt:i,color:n,imgUrl:s}=e;return(0,r.jsx)(l.zd,{height:"100%",width:"100%",children:t&&(0,r.jsx)("img",{alt:i||"",src:s,style:{backgroundColor:n||"#EFEFEF",fetchPriority:"cover",height:"100%",loading:"auto",objectFit:"cover",objectPosition:a,width:"100%"}})})}function u(e){(0,n.useEffect)(()=>{(0,i.Z)("CoverImage","/app/www/board/CoverImage.tsx")},[]);let{renderAsImage:t}=e;return t?(0,r.jsx)(c,{...e}):(0,r.jsx)(d,{...e})}},748261:function(e,t,a){a.d(t,{Z:()=>A});var i,n,l=a(686659),r=a(667294);a(244311);var s=a(740097),o=a(183e3),d=a(24246),c=a(78835),u=a(501010),h=a(774838),_=a(739405),p=a(594502),g=a(464094),f=a(832333),m=a(785893);function b({backgroundColor:e="darkGray",iconColor:t="inverse",iconSize:a,privacy:i,size:n=20}){(0,r.useEffect)(()=>{(0,l.Z)("PrivacyIcon","/app/www/board/duplo/PrivacyIcon.tsx")},[]);let o=(0,d.Z)();return(0,m.jsx)(s.xu,{alignItems:"center",color:e,direction:"column",display:"flex",height:n,justifyContent:"center",rounding:"circle",width:n,children:(0,m.jsx)(s.JO,{accessibilityLabel:o._('Secret board icon', 'Icon indicating that a board is secret', 'Icon indicating that a board is secret'),color:t,icon:"secret"===i?"lock":"security",size:a??n/2})})}var y=a(227866),v=a(235623);let x=(void 0!==i||(i=a(53713)).hash&&"0e2c441822700a6145ea7cd142c0425b"!==i.hash&&console.error("The definition of 'DrawerImageGroup_board' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),S=(void 0!==n||(n=a(943751)).hash&&"35b139c2e951baaa6624b30e45f913ce"!==n.hash&&console.error("The definition of 'DrawerImageGroup_coverPin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),P="100%";function A(e){(0,r.useEffect)(()=>{(0,l.Z)("DrawerImageGroup","/app/www/board/DrawerImageGroup.tsx")},[]);let t=(0,d.Z)(),{boardKey:a,canEdit:i,containerBackgroundColor:n="white",coverPhoto:A,coverPinKey:w,fullSize:k,hideSecretBoardIcon:C,images:I,isActive:T,isHomePageBoards:j,isProtected:z,isSecret:E,layout:B,onEditClick:R,renderAsImage:F,showSensitivityScreen:D}=e,Z=(0,_.HG)(),{isRTL:L,isAuthenticated:O}=(0,h.B)(),N=(0,o.Z)(x,a),K=(0,o.Z)(S,w),M=(0,r.useRef)(null),U=Z&&O,{checkExperiment:H}=(0,u.Z)(),[V,G]=(0,r.useState)(!1);(0,r.useEffect)(()=>{T&&U&&N&&!E&&!V&&G(H("ce_dweb_board_preview_share_button").anyEnabled)},[T,U,N,E,V,H]);let q=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{T?q.current&&(clearTimeout(q.current),q.current=void 0):q.current||(q.current=window.setTimeout(()=>{q.current=void 0,T||G(!1)},200))},[T]),(0,r.useEffect)(()=>()=>{q.current&&clearTimeout(q.current)},[]);let W=I[0],$=!A&&I[0]?.name||t._('Cover image', 'DrawerImageGroup', 'Alt text for the main image of a board'),Y=[,,].fill(0),Q=new s.Ry(1),J="square"===B?g.M0:g.z9,X="square"===B?g.FP:g.FC,ee=W?.url?(0,m.jsx)(s.Ee,{alt:$,color:"#efefef",fit:"cover",naturalHeight:133,naturalWidth:133,src:W.url}):(0,m.jsx)(s.xu,{color:"secondary",height:"100%",width:"100%"}),et=D?{filter:"blur(20px)"}:{};return(0,m.jsxs)(s.zd,{height:k?"100%":void 0,rounding:4,width:"100%",children:[(0,m.jsxs)(s.kC,{alignItems:"stretch",direction:"row",height:"100%",justifyContent:"start",children:[(0,m.jsx)(s.sg,{span:8,children:(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:et},height:k?"100%":void 0,position:"relative",children:(0,m.jsx)(s.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{paddingBottom:P}},overflow:"hidden",width:"100%",children:(0,m.jsxs)(s.xu,{ref:M,bottom:!0,dangerouslySetInlineStyle:{__style:{borderColor:j?"#FFDFE9":n,borderStyle:"solid",borderWidth:"1px 0 1px 1px",borderRadius:"16px 0 0 16px"}},"data-test-id":"drawer-image-group-first-image-container",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,children:[(z||E)&&!C&&(0,m.jsx)(s.xu,{left:!L,margin:2,position:"absolute",right:L,top:!0,zIndex:Q,children:(0,m.jsx)(b,{backgroundColor:"default",iconColor:"default",privacy:E?"secret":"protected",size:U?32:24})}),A?.url?(0,m.jsx)(s.zd,{height:"100%",wash:!0,width:"100%",children:(0,m.jsx)(f.Z,{customCover:A.isCustom,height:X,imgPos:K?function(e){let{crop:t,size:a}=e||{};if(Array.isArray(t)&&Array.isArray(a))return{x:t[0]||0,y:t[1]||0,width:a[0]||0,height:a[1]||0}}(K):A.position||{width:0,height:0,x:0,y:0},imgUrl:K?.imageUrl??(A.url||""),renderAsImage:F,width:Math.floor(J/3*2)})}):ee]})})})}),(0,m.jsx)(s.sg,{span:4,children:(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:et},height:"100%",children:[(i||V)&&(0,m.jsxs)(s.xu,{bottom:!0,display:V?"flex":void 0,left:L,margin:2,opacity:+!!T,position:"absolute",right:!L,zIndex:Q,children:[i&&(0,m.jsx)(s.iP,{onTap:({event:e})=>R?.(e),children:(0,m.jsx)(s.hU,{accessibilityLabel:t._('Edit', 'DrawerImageGroup.edit', 'Icon indicating that a board is editable'),bgColor:"white",icon:"edit",iconColor:"darkGray",size:"sm",tabIndex:-1})}),V&&(0,m.jsx)(s.iP,{onTap:({event:e})=>{e.preventDefault(),e.stopPropagation()},children:(0,m.jsx)(s.xu,{marginStart:1,children:(0,m.jsx)(v.Z,{boardKey:N,disableSelectedStyle:!0,handleCreatePincode:()=>{},iconColor:"darkGray",size:"sm"})})})]}),Y.map((e,t)=>{let a=A?I[t]:I[t+1];return(0,m.jsx)(s.xu,{height:k?"50%":void 0,position:"relative",children:(0,m.jsx)(s.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{paddingBottom:P}},overflow:"hidden",width:"100%",children:(0,m.jsx)(s.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{borderColor:j?"#FFDFE9":n,borderStyle:"solid",borderWidth:0===t?1:"0 1px 1px 1px",borderRadius:0===t?"0 16px 0 0":"0 0 16px 0"}},left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,children:a?.url?(0,m.jsx)(s.zd,{height:"100%",wash:!0,width:"100%",children:(0,m.jsx)(s.Ee,{alt:"",color:"#efefef",fit:"cover",naturalHeight:133,naturalWidth:133,src:a.url})}):(0,m.jsx)(s.xu,{color:"secondary",height:"100%",width:"100%"})})})},t)})]})}),D&&(0,m.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.5)"}},display:"flex",height:"100%",justifyContent:"center",position:"absolute",top:!0,width:"100%",children:(0,m.jsx)(s.qd,{align:"center",color:"light",size:"400",children:t._('This board may contain sensitive content', 'drawerImageGroup.sensitivityScreen.heading', 'Warning text for a board that may have sensitive content')})})]}),(0,m.jsx)(p.Z,{visibility:T?"visible":"none",children:(0,m.jsx)(y.Z,{additionalStyles:{backgroundColor:c.Dv.LEGO_WASH}})})]})}},244525:function(e,t,a){a.d(t,{Z:()=>i});let i=4},319752:function(e,t,a){a.r(t),a.d(t,{default:()=>ek,PinBetterSave:()=>ew});var i,n,l,r,s=a(686659),o=a(667294),d=a(581722);a(167912);var c=a(312048),u=a(740097),h=a(27399),_=a(34531),p=a(270434),g=a(4533),f=a(230201),m=a(419025),b=a(943152),y=a(552841),v=a(470205),x=a(236269),S=a(753806),P=a(924591),A=a(935059),w=a(183e3),k=a(400962),C=a(24246),I=a(216975),T=a(424868),j=a(501010),z=a(661376),E=a(34550),B=a(521679),R=a(577356),F=a(575820),D=a(575647),Z=a(477760),L=a(113759),O=a(683372),N=a(244525),K=a(33529),M=a(785893);function U({accessibilityControls:e,accessibilityExpanded:t,accessibilityHaspopup:a,dropdownRef:i,hideDropdown:n=!1,isSaved:l,onBoardDropdownClick:r,onSaveClick:d,promotedIsLeadAd:c,renderPinSaveTooltip:h,selectedTitle:_,showBoardFlyout:p,unselectedText:g,view:f,surface:m}){(0,o.useEffect)(()=>{(0,s.Z)("BoardSelectionDisplay","/app/www/common/PinBetterSave/BoardSelectionDisplay.tsx")},[]);let[b,y]=(0,o.useState)(!1),v=(0,C.Z)(),x=(0,o.useRef)(null),{closeupWithinMasonryEnabled:S}=(0,L.x4)();(0,o.useEffect)(()=>{b&&y(!1)},[b]);let P=_||g,A="closeup"===f,w="media-viewer"===f,k="comparison"===f,T="VideoCarouselModule"===m,j=(0,o.useMemo)(()=>k?"inverse":w?p?"inverse":"default":p||!A?"inverse":"default",[A,p,w,k]),z=(0,o.useCallback)(({event:e})=>{r(e)},[r]),E=A?"transparent":"transparentInverse";E=w?"tertiarySemiTransparent":E,E=k?"transparentInverse":E;let B=l?v._('Saved', 'PinBetterSave.BoardSelection.SavedButton', 'BetterSave Saved label'):v._('Save', 'PinBetterSave.BoardSelection.SaveButton', 'BetterSave Save label');return(0,M.jsxs)(u.xu,{alignItems:w?"start":"center",dangerouslySetInlineStyle:{__style:{gap:"4px"}},display:"flex",paddingX:S?0:void 0,width:"100%",children:[!n&&(0,M.jsx)(u.xu,{"data-test-id":_?"board-selection-item-selected":"board-selection-placeholder",flex:"grow",width:"100%",children:(0,M.jsx)(u.zx,{ref:i,accessibilityControls:e,accessibilityExpanded:t,accessibilityHaspopup:a,accessibilityLabel:(0,I.Wc)(v._('Select a board to save to: {{ boardName }}', 'PinBetterSave.BoardSelection.DropdownIcon', 'Accessibility label used to prompt the user to select the board where the Pin will be saved. boardName: The name of the board'),{boardName:P}),color:E,dataTestId:"PinBetterSaveDropdown",iconEnd:"arrow-down",onClick:z,selected:p,size:T?"sm":"lg",text:(0,M.jsx)(u.xv,{color:j,lineClamp:1,overflow:"breakAll",size:T?"100":"300",weight:"bold",children:P})})}),(0,M.jsx)(u.xu,{alignSelf:A?"center":"start","data-test-id":"PinBetterSaveButton",flex:"none",marginStart:"auto",children:(0,M.jsx)(u.Fm,{ref:x,color:c?"secondary":"primary",onClick:({event:e})=>{n?r(e):d(e)},selected:l,size:T?"sm":"lg",text:B})}),!!h&&!!x.current&&A&&h(x.current)]})}var H=a(148266);class V extends o.PureComponent{constructor(...e){var t,a,i;super(...e),t="handleClick",a=()=>{let{boardId:e,logContextEvent:t}=this.props;t({event_type:101,component:20,element:10805,object_id_str:e})},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[t]=a}componentDidMount(){let{toastShown:e}=this.props;e()}render(){let{boardName:e,boardUrl:t,onHide:a}=this.props;return(0,M.jsx)(P.Z,{duration:5e3,href:`${t}more_ideas/?ideas_referrer=16`,onClick:this.handleClick,onHide:a,text:(0,M.jsx)(u.xv,{weight:"bold",children:(0,I.nk)(this.props.i18n._('Find more ideas for {{ boardName }}', 'postRepinUpsellToast.findMoreIdeas.toast', 'Find more ideas for you board'),{boardName:e}).join("")})})}}function G(e){(0,o.useEffect)(()=>{(0,s.Z)("PostRepinUpsellToast","/app/www/common/PinBetterSave/PostRepinUpsellToast.tsx")},[]);let{logContextEvent:t}=(0,f.u)(),a=(0,C.Z)(),i=(0,d.I0)();return(0,M.jsx)(V,{...e,i18n:a,logContextEvent:t,toastShown:()=>i((0,H.ND)(e.boardId))})}var q=a(351736),W=a(319226),$=a(100424),Y=a(317109),Q=a(893957);let J=(0,o.lazy)(()=>Promise.all([a.e("5696"),a.e("79338")]).then(a.bind(a,87918)));function X(e){(0,o.useEffect)(()=>{(0,s.Z)("PostSavedPinBoardCollabUpsell","/app/www/common/PinBetterSave/PostSavedPinBoardCollabUpsell.tsx")},[]);let{board:t,hideToast:a}=e,i=(0,C.Z)(),n=(0,A.Z)(),[l,r]=(0,o.useState)(!1),[d,c]=(0,o.useState)(!1),h=()=>{a()};(0,Q.Z)(()=>{setTimeout(()=>c(!0),100)});let{marginTop:_,opacity:p,pointerEvents:g,transform:f,transition:m,visibility:b}=(0,$.ZP)({deviceType:"desktop",hiding:!1,visible:d}),y=t.name,v=(0,M.jsxs)(u.xv,{children:[(0,M.jsxs)(u.xv,{weight:"bold",children:[" ",(0,I.nk)(i._('Invite people to your new board', 'postSavedPinBoardCreateCollabUpsell.title.1', 'Title to inform user that they have successfully saved a pin to their board'),{boardName:y})]}),(0,M.jsx)(u.xv,{children:i._('Get ideas from your favorite people', 'postSavedPinBoardCollabUpsell.message', 'Message to upsell invite collaborator feature')})]}),x=n.isAuth&&n.firstName&&(0,M.jsxs)(u.xu,{height:48,position:"relative",width:48,children:[(0,M.jsx)(u.xu,{position:"absolute",children:(0,M.jsx)(W.qE,{color:n.avatar_color_index,name:n.firstName,outline:!0,size:"sm",src:n.imageMediumUrl})}),(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{left:"25%",top:"25%"}},position:"absolute",rounding:4,children:(0,M.jsx)(u.Sj,{bgColor:"lightGray",hovered:!0,icon:"person-add",iconColor:"darkGray",size:"sm"})})]}),S=(0,M.jsx)(u.kC,{alignContent:"center",alignItems:"center",justifyContent:"start",children:(0,M.jsxs)(u.hE,{children:[(0,M.jsx)(u.zx,{accessibilityLabel:i._('Not now', 'postSavedPinBoardCollabUpsell.notNowLabel', 'Accessibility label for declining upsell'),color:"gray",onClick:h,text:i._('Not now', 'postSavedPinBoardCollabUpsell.notNowLabel', 'Label for decline button on upsell')}),(0,M.jsx)(u.zx,{accessibilityLabel:i._('Invite', 'postSavedPinBoardCollabUpsell.inviteFriendsLabel', 'Accessibility label for inviting friends on upsell'),color:"red",onClick:()=>{r(!0)},text:i._('Invite', 'postSavedPinBoardCollabUpsell.inviteFriendsLabel', 'Label for invite friends button on upsell')})]})});return(0,M.jsx)(u.mh,{zIndex:new u.H3([new u.Ry(1e3)]),children:l?(0,M.jsx)(Y.Z,{children:(0,M.jsx)(J,{board:t,fromBoardCollabUpsell:!0,onDismiss:h})}):(0,M.jsx)(u.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{transform:f,transition:m,visibility:b,pointerEvents:g}},display:"flex",justifyContent:"center",marginBottom:5,marginTop:_,opacity:p,position:"fixed",width:"100%",children:(0,M.jsxs)(u.xu,{borderStyle:"shadow",color:(0,q.Yc)()?"elevationFloating":"default",direction:"column",display:"flex",paddingY:4,rounding:4,smDirection:"row",children:[(0,M.jsxs)(u.xu,{smDisplay:"flex",smMarginBottom:-3,smMarginTop:-3,width:"100%",wrap:!0,children:[(0,M.jsxs)(u.xu,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",justifyContent:"center",padding:4,smDirection:"row",smPaddingY:3,children:[x,(0,M.jsx)(u.xu,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",marginBottom:"auto",marginTop:"auto",smDisplay:"block",smMarginEnd:6,smMarginStart:2,children:(0,M.jsx)(u.xu,{maxWidth:648,children:v})})]}),S]}),(0,M.jsx)(u.hU,{accessibilityLabel:"cancel",icon:"cancel",iconColor:"darkGray",onClick:h,padding:4,size:"sm"})]})})})}var ee=a(410890),et=a(699549),ea=a(38181),ei=a(166613),en=a(728270),el=a(380108),er=a(716848),es=a(845805),eo=a(328299),ed=a(160587),ec=a(267092),eu=a(779686),eh=a(229103),e_=a(826681),ep=a(438274),eg=a(248380);let ef=(void 0!==i||(i=a(934627)).hash&&"03aa6b9cad1d5fb9b12a7c896ccdaffd"!==i.hash&&console.error("The definition of 'PinSaveRequestRepinWithSectionSuggestions_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),em=(void 0!==n||(n=a(852501)).hash&&"6bd1eb83cfe5391288164b17cc5d85b7"!==n.hash&&console.error("The definition of 'PinSaveRequestRepinWithSectionSuggestions_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function eb(e){(0,o.useEffect)(()=>{(0,s.Z)("PinSaveRequestRepinWithSectionSuggestions","/app/www/save/pin-to-board/PinToBoard/PinSaveRequestRepinWithSectionSuggestions.tsx")},[]);let{action:t,additionalCreateFields:a,boardWithSection:i,clientTrackingParams:n,children:l,onClose:r,pinKey:d,setCompletionPromise:c,shouldHideToast:u,shuffleAssetKey:h}=e,_=(0,w.Z)(ef,d),p=(0,w.Z)(em,h);return(0,M.jsx)(eg.K,{action:t,additionalCreateFields:a,boardWithSection:i,clientTrackingParams:n,onClose:r,pinKey:_,setCompletionPromise:c,shouldShowToast:!u,showCreate:!0,shuffleAssetKey:p,urlPinInfo:null,children:e=>l(e)})}var ey=a(904946),ev=a(767415);function ex(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let eS=(void 0!==l||(l=a(88058)).hash&&"09fbcefa1cef908739da123ebf62a14b"!==l.hash&&console.error("The definition of 'PinBetterSave_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),eP=(void 0!==r||(r=a(784502)).hash&&"1f53887e43dccddcc1fb109a988e5c3d"!==r.hash&&console.error("The definition of 'PinBetterSave_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function eA({ref:e,savedInfo:t,variant:a}){let i=(0,C.Z)(),{closeupWithinMasonryEnabled:n}=(0,L.x4)(),l="closeup"===a,r="boardless"===t.type?i._('Profile', 'PinBetterSave.PinBetterSaveSavedStatus.savedTitle', 'Text indicating saved to your profile'):t.title??"";return(0,M.jsx)(u.rU,{ref:e,href:t.url||"",onClick:({event:e})=>{e.stopPropagation()},children:(0,M.jsx)(u.xu,{alignItems:l?"center":void 0,dangerouslySetInlineStyle:{__style:{color:n?"#FFF":"#333"}},"data-test-id":"saved-board-title",display:l?"flex":"block",marginEnd:4*!!l,marginStart:+!!l,minHeight:l?52:void 0,children:(0,M.jsx)(u.xv,{align:l?"end":void 0,color:"cutout"===a||"media-viewer"===a?"light":"default",lineClamp:l?1:void 0,overflow:"breakAll",size:"300",weight:"bold",children:r})})})}class ew extends o.Component{constructor(...e){super(...e),ex(this,"state",{boardWithSection:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null,showBoardCollabUpsell:!1,hasItemSelected:!1}),ex(this,"setBoardSaveCompletionPromise",e=>{let{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;let{board:{id:a,name:i,url:n}}=e,l={boardId:a,title:i,url:n};this.updateSelectedBoardOrSection(l),this.updateSavedState({...l,localPinId:e.id}),this.props.onVisitButtonAnimate?.(),t&&(0,ei.Uz)(t.sensitivity)&&(0,en.ZP)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notices[0]}):this.handleRepinHide()})}),ex(this,"updateSavedState",e=>{let{currentHistoryStack:t,location:a,save:i,searchQueryInvalidated:n,onSave:l,pin:r}=this.props,s=(0,F.mB)(a.search).q||(0,O._)(t);i({pinId:r.entityId,nodeId:r.__id,boardId:e.boardId??"",localPinId:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??"",type:e.type??"",url:e.url??""}),s&&n(s),l&&e.localPinId&&l()}),ex(this,"updateSelectedBoardOrSection",e=>{let{selectBoardOrSection:t,pin:a}=this.props;t({pinId:a.entityId,nodeId:a.__id,boardId:e.boardId??"",localPinId:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??"",type:e.type??"",url:e.url??""})}),ex(this,"updateSelectedItem",()=>{let{initialSelection:e,selectedItem:t}=this.props;!t&&e&&(this.updateSelectedBoardOrSection(e),this.setState({hasItemSelected:!0}))}),ex(this,"dropdownRef",(0,o.createRef)()),ex(this,"boardSelectedRef",(0,o.createRef)()),ex(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save({item:e})}),ex(this,"handleBoardCreate",({title:e=""}={})=>{let{requireAuth:t,i18n:a}=this.props;if(t)return void t({loginModalHeader:(0,m.is)(a)});this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));let{onToggleFlyout:i}=this.props;i&&i(!0,!0)}),ex(this,"handleBoardCreated",e=>{this.setState({createdBoard:e});let{toastManagerContext:t}=this.props;this.isViewerEligibleForBoardCollabUpsell(e)&&(this.setState({showBoardCollabUpsell:!0}),(0,E.M0)().setItem(g.zq,+new Date),setTimeout(()=>t.showOneToast(({hideToast:t})=>(0,M.jsx)(X,{board:e,hideToast:t})),4e3))}),ex(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));let{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),ex(this,"handleBoardDropdownClick",e=>{let{setAbortNoActionPlacementTimeout:t,pin:{entityId:a},viewParameter:i,viewType:n,clientTrackingParams:l,logContextEvent:r}=this.props;t(!0),e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(r({aux_data:{pin_id:a},component:13282,element:10960,event_type:101,object_id_str:a,view_parameter:i,view_type:n,clientTrackingParams:l}),this.showFlyout())}),ex(this,"handleSaveClick",async(e,t)=>{let{i18n:a,selectedItem:i,requireAuth:n}=this.props;if(n){e.stopPropagation(),n({loginModalHeader:(0,m.Bx)(a)});return}if(t||!i)return void this.handleBoardDropdownClick(e);e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.logClickEvent({isSaveClick:!0}),await this.save({item:i})}),ex(this,"logClickEvent",({isSaveClick:e})=>{let{clientTrackingParams:t,pin:a,selectedItem:i,viewType:n,viewParameter:l,logContextEvent:r}=this.props,s=i?.score?JSON.stringify([i.score]):void 0;r({event_type:101,...n?{view_type:n}:Object.freeze({}),...l?{view_parameter:l}:Object.freeze({}),component:13282,element:36,object_id_str:i?.boardId,clientTrackingParams:t,aux_data:{board_id:i?.boardId,grid_index:N.Z,is_profile_save:i?.type==="boardless",is_undo:!e,pin_id:a.entityId,suggested_boards_score_list:s}})}),ex(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),ex(this,"handleEditSubmit",({boardId:e,sectionId:t,url:a,title:i})=>{let{savedInfo:n}=this.props,l=n?.localPinId;this.updateSavedState({localPinId:l||"",boardId:e,sectionId:t||"",url:a,title:i})}),ex(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),ex(this,"deleteSavedState",({isDisableToast:e,newPinId:t})=>{let{clientTrackingParams:a,i18n:i,onDelete:n,pin:l,toastManagerContext:r,unsave:s}=this.props;s({pinId:l.entityId,nodeId:l.__id}),t&&h.Z.create("PinResource",{id:t,client_tracking_params:a}).callDelete().then(()=>{e||r.showToast(({hideToast:e})=>(0,M.jsx)(P.Z,{dataTestId:"pin-better-save-removed-pin-toast",onHide:e,text:l.savedInfo?.boardId?i._('Removed from your board!', 'PinBetterSave.SavedPin.RemovedFromYourBoard', 'User removed their pin'):i._('Pin removed!', 'PinBetterSave.SavedPin.PinRemoved', 'User removed their pin')}))}),n&&n()}),ex(this,"save",async({item:e,movedBoardTitle:t})=>{let{onClickCallback:a,requireAuth:i,onVisitButtonAnimate:n}=this.props;if(i)return void i();n?.();let{addNewPinToPinsFeed:l,i18n:r,isLimitedLogin:s,mostRecentBoard:o,pin:d,postRepinMoreIdeasUpsell:c,postRepinUpsellDisabled:u,save:h,setMostRecentBoard:_,toastManagerContext:g,showEmailVerificationReminderModal:f,mountAfterActionPlacement:m,pinnerBlockedByMe:b}=this.props;b||this.updateSavedState(e);let y=!!e.sectionId,v="boardless"===e.type,S=!1;try{let{resource_response:{data:i}}=await this.getPinResource(e).callCreate({showError:!1}),n=e.url,{checkExperiment:s,incrementBoardPinCount:f,updateUserPinCount:b,viewer:x,viewerUserId:A}=this.props;!u&&n&&!v&&(({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:a})=>{if(!t)return!1;let{recentSaves:i,recentUpsell:n}=a;if(n[e])return!1;let l=i.findIndex(t=>t.boardId!==e);return(-1===l?i.length:l)+1>=3})({boardId:e.boardId??"",boardUrl:n,postRepinMoreIdeasUpsell:c})&&(g.showToast(({hideToast:t})=>(0,M.jsx)(G,{boardId:e.boardId??"",boardName:e.title??"",boardUrl:n,onHide:t})),S=!0),h({pinId:d.entityId,nodeId:d.__id,boardId:e.boardId??(i.board.id||""),localPinId:i.id?i.id:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??(i.board.title||""),type:e.type??"",url:e.url??(i.board.url||""),localPin:i}),this.props.onPinCreate&&this.props.onPinCreate({boardId:i.board.id,pinId:i.id}),f({boardId:e.boardId??"",sectionId:e.sectionId}),b(A);let w=e.sectionId?e.sectionId:e.boardId;v?(w=A,l(w,i.id,!1,v)):l(w??"",i.id,y,!1);let{id:k,images:C,board:T}=i,j=C["236x"];this.updateSavedState({...e,localPinId:k});let z=x?.isAuth&&x?.pinCount,E=x?.isAuth&&x?.boardCount,B=(2===z||3===z)&&E&&E<2?s("ap_dweb_first_board_creation").group:null;if((B&&"control"!==B&&"enabled_three"!==B||2!==z)&&("enabled_four"!==B&&"enabled_genie"!==B||3!==z)||t)S||g.showToast(({hideToast:a})=>t?(0,M.jsx)(P.Z,{onHide:a,text:(0,I.nk)(r._('Moved to {{ boardName }}', 'PinBetterSave.SavedPin.MovedToBoard', 'User moved their pin. boardName: the board name where the pin is moved to'),{boardName:t}).join("")}):(0,M.jsx)(ee.Z,{boardName:(e.title||T.name)??"",boardUrl:e.url||T.url,isBoardlessPin:v,onHide:a,onUndo:()=>this.deleteSavedState({newPinId:k}),pinImageUrl:j.url}));else{let t=e=>{this.props.updateHeaderState?.({type:"showRepinAnimation",payload:e})};g.showOneToast(({hideToast:a})=>(0,M.jsx)(p.Z,{boardId:e.boardId??"",boardUrl:e.url||T.url,firstBoardCreationExperimentEnabled:B?.startsWith("enabled"),imageUrl:d.imageSpec_474x?.url,onComplete:t,onHide:a,title:d.title,toastDuration:5e3}))}m("Save",{is_promoted:d.isPromoted,pin_id:d.entityId,repin_id:k}),o&&e.boardId!==o.id&&!v&&_(e.boardId??"",e.title??"",e.url??""),"function"==typeof a&&a(),setTimeout(()=>{this.boardSelectedRef.current?.focus()},0)}catch(t){let e=(0,x.Z)(t,"message_detail")||(0,x.Z)(t,"message")||"";(0,x.Z)(t,"api_error_code")===T.H9?f():s||g.showToast(({hideToast:t})=>(0,M.jsx)(P.Z,{dataTestId:"pin-save-error-toast",duration:5e3,onHide:t,text:e})),this.resetPinSavedState()}}),ex(this,"hideFlyout",(e=!1)=>{let{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)})}componentDidMount(){(0,s.Z)("PinBetterSave","/app/www/common/PinBetterSave/PinBetterSave.tsx");let{autoQuicksaveCallback:e,onMount:t,shouldAutoQuicksave:a}=this.props;this.updateSelectedItem(),t&&t(),a&&(this.save({item:{boardId:"",url:"/me/",title:"Profile",type:"boardless"}}),e?.())}componentDidUpdate(){this.state.hasItemSelected||this.updateSelectedItem(),this.props.saveToBoardFromPostDownloadUpsell&&(this.showFlyout(),this.props.setSaveToBoardFromPostDownloadUpsell?.(!1))}getPinResource(e){let{carouselData:t,clientTrackingParams:a,pin:i,getStringifiedCommerceAuxData:n,shuffleAsset:l}=this.props,r={carousel_slot_index:t&&t.index||0,clientTrackingParams:a,description:i.description||"",image_base64:i.imageBase64,is_buyable_pin:!1,is_promoted:i.isPromoted,is_removable:i.promotedIsRemovable,link:i.link,pin_id:i.entityId||"",title:i.title||"",...l?{shuffle_asset:l.entityId}:{},...e.boardId&&"boardless"!==e.type?{board_id:e.boardId}:null,...e.sectionId?{section:e.sectionId}:null,...n()};return h.Z.create("RepinResource",r)}showFlyout(){let{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}isViewerEligibleForBoardCollabUpsell(e){let{viewer:t}=this.props;if(t?.isAuth&&e){if(!(0,B.Z)(g.zq))return!1;let a=(0,E.M0)().getItem(g.zq)||"0",i=new Date,n=Number(a)<i.getTime()-6048e5,l=(t.boardCount??0)>=2&&(t.pinCount??0)>=3,r=!e.is_collaborative&&!!e.url&&e.url.split("/")[1]===t.username;return l&&r&&n}return!1}render(){let{boardResource:e,carouselData:t,clientTrackingParams:a,hideAlreadySavedMsg:i,onToggleModal:n,pin:l,popoverId:r,renderPinSaveTooltip:s,renderSavedStatus:o,savedInfo:d,savedCutout:c,selectedItem:h,unselectedText:_,variant:p,viewParameter:g,hideDropdown:f,showSaveToProfile:m,shuffleAsset:b,nodeRef:y,surface:x}=this.props,{boardWithSection:P,showBoardFlyout:A,showRepinModal:w,sensitiveContentNotice:k,suggestedBoardTitle:C}=this.state,I=d||c,{entityId:T,imageSignature:z}=l,{showSelectTextOnBoardSelectionDisplay:E,shouldAllowSaveToProfile:B,shouldSeePinBetterSave:R}=(0,es.Z)({dangerouslySkipActivation:!0}),F=(0,M.jsx)(K.xH,{boardResource:e,clientTrackingParams:a,hideAlreadySavedMsg:i,imageSignature:z,onBoardCreate:this.handleBoardCreate,onItemChosen:this.handleItemChosen,pinId:T,selectedItem:h,setBoardWithSection:this.setBoardWithSection,showSaveToProfile:m||B,surfaceOriginViewParameter:g}),D=()=>{this.logClickEvent({isSaveClick:!1}),this.deleteSavedState({newPinId:I?.localPinId??""})},{checkExperiment:L}=(0,j.Z)();return(0,M.jsx)(v.Z,{name:"PinBetterSave",children:(0,M.jsxs)(u.xu,{ref:y??void 0,"data-test-id":"pin-better-save-button",display:["closeup","media-viewer"].includes(p)?"flex":void 0,height:"closeup"===p||"media-viewer"===p?void 0:60,children:[I?.title?(0,M.jsx)(et.Z,{clientTrackingParams:a,currentCarouselIndex:t&&t.index,onDeleteSavedState:D,onEditSubmit:this.handleEditSubmit,onToggleModal:n,pinId:I.localPinId,shouldUseLegoStyles:!0,surface:x,variant:p,viewParameter:g,children:o&&I&&o({ref:this.boardSelectedRef,savedInfo:I,variant:p})}):(0,M.jsx)(U,{accessibilityControls:r,accessibilityExpanded:A,accessibilityHaspopup:!0,dropdownRef:this.dropdownRef,hideDropdown:f,isSaved:!!I?.boardId,onBoardDropdownClick:this.handleBoardDropdownClick,onSaveClick:e=>this.handleSaveClick(e,R),promotedIsLeadAd:l.promotedIsLeadAd,renderPinSaveTooltip:s,selectedItem:R?void 0:h,selectedTitle:E?_:h?.title,showBoardFlyout:A,surface:x,unselectedText:_,view:p}),(0,M.jsx)(eb,{action:"create",additionalCreateFields:{is_stl_pin:(l.shoppingFlags??[]).includes(2)},boardWithSection:P,clientTrackingParams:a,onClose:this.handleRepinHide,pinKey:l,setCompletionPromise:this.setBoardSaveCompletionPromise,shouldHideToast:this.state.showBoardCollabUpsell,shuffleAssetKey:b,urlPinInfo:null,children:({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:a,handleAbort:i,handleNewBoardAnimationCompletion:n,handleSaveToBoard:r,newPin:s,updateDescription:o,modalTitle:d,setModalTitle:c})=>{if(!w)return null;let u=function(e,t){let a=t?.cutoutImages_236x??e.imageSpec_236x,i=a?.url;return i?{url:i,name:e.title||null}:null}(l,b);return!P&&L("dweb_board_create_glowup").anyEnabled?(0,M.jsx)(Z.Z,{boardCreateSource:"board_picker",images:u?[u]:void 0,initialValues:{boardName:C},onBoardCreate:e=>{this.handleBoardCreated(e),r(e)},onClose:()=>{i(),setTimeout(()=>{this.dropdownRef.current?.focus()},0)}}):(0,M.jsx)(ey.Z,{boardSavedTo:e,boardWithSection:P,dismissModal:()=>{t(),setTimeout(()=>{this.boardSelectedRef.current?.focus()},0)},displaySuccessAnimation:a,handleAbort:()=>{i(),setTimeout(()=>{this.dropdownRef.current?.focus()},0)},handleNewBoardAnimationCompletion:n,handleSaveToBoard:r,isInModal:!0,modalTitle:d,newPin:s,onBoardCreated:this.handleBoardCreated,pinKey:l,pwtAuxData:{pin_create_method:"repin"},sensitiveContentNotice:k,setModalTitle:c,shouldRenderContent:w,showCreate:!0,shuffleAssetKey:b,suggestedBoardTitle:C,updateDescription:o,urlPinInfo:null})}}),A&&(0,M.jsx)(u.mh,{zIndex:new u.H3([ea.k]),children:(0,M.jsx)(u.J2,{anchor:this.dropdownRef.current,id:r,idealDirection:"down",onDismiss:()=>{this.hideFlyout(),this.dropdownRef.current?.focus()},positionRelativeToAnchor:!1,size:"xl",children:F})}),(0,M.jsx)(S.k6,{placementId:1000578})]})})}}ex(ew,"defaultProps",{variant:"pin",renderSavedStatus:({ref:e,savedInfo:t,variant:a})=>(0,M.jsx)(eA,{ref:e,savedInfo:t,variant:a})});let ek=(0,o.memo)(function({pinKey:e,shuffleAssetKey:t,surface:a,...i}){let{logContextEvent:n}=(0,f.u)(),l=(0,C.Z)(),r=(0,o.useId)(),s=(0,c.TH)(),u=(0,w.Z)(eS,e),h=(0,w.Z)(eP,t),p=u.selectedItem,g=(0,z.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),m=(0,z.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:u.entityId,shortlist_length:1,num_shortlist_suggestions:1,suggestions_only:!0,min_confidence:.5}}),v=(0,er.J)()?.onPinCreate,x=(0,R.dI)(),{showEmailVerificationReminderModal:P}=(0,y.H7)(),I=(0,A.Z)(),T=(0,d.I0)(),E=(0,d.v9)(({mostRecentBoard:e})=>e),{previous:B}=(0,k.ou)(),F=(0,k.aX)(),Z=(0,d.v9)(({ui:e})=>e.postRepinMoreIdeasUpsell),O=u&&u.board?.layout!=="default",{initialSelection:N}=i,K=N?.title||"",U=!0,{showEnabledSaveBehavior:V}=(0,eo.ZP)(I.isAuth&&I.id||""),G=(0,S.cO)(),{setAbortNoActionPlacementTimeout:q}=(0,L.x4)(),{checkExperiment:W}=(0,j.Z)(),{updateHeaderState:$}=(0,el.Z)(),Y={boardId:"",title:l._('Profile', 'pinBetterSave.initialSelection.boardlessPinsOption', 'Option to save to profile without a board.'),type:"boardless",url:"/me/"},Q=(0,b.Z)();if(!N){let e=m&&m.data&&m.data[0];N=u.board?.name&&!O&&I.isAuth&&u.board.owner?.entityId===I.id&&{title:u.board.name,boardId:u.board.entityId,url:u.board.url??""}||u.recommendationReason?.board&&{title:u.recommendationReason.board.name??"",boardId:u.recommendationReason.board.entityId??"",url:u.recommendationReason.board.url??""}||m&&m.isLoaded&&e&&{boardId:e.id,score:JSON.parse(e?.recommendation_reason??"{}").score,title:e.name,url:e.url}||m&&m.isLoaded&&!e&&V&&Y||m&&m.isLoaded&&!e&&E&&{boardId:E.id,title:E.name,url:E.url}||void 0,K=m&&m.isLoaded?l._('Select', 'BetterSave label to pick a board from the list', 'BetterSave label to pick a board from the list'):"...",U=!1}N?.url?.includes("_quick_saves")&&(N=Y);let J=(0,D.Z)(u),X=(0,o.useCallback)(e=>{let t="cutout"===i.variant?H.o4:H.a1;(0,ev.nP)(`web.closeup.media_viewer_stats.save.clicked_from.${i.variant}`),T(t(e))},[i.variant,T]),ee=(0,o.useCallback)(e=>{let t="cutout"===i.variant?H.ti:H.jg;(0,ev.nP)(`web.closeup.media_viewer_stats.unsave.clicked_from.${i.variant}`),T(t(e))},[i.variant,T]),{triggerVisitButtonAnimation:et}=(0,_.g)();return(0,M.jsx)(ew,{...i,addNewPinToPinsFeed:(e,t,a,i)=>{let n=a?ep.Z.BOARD_SECTION_PINS:ep.Z.BOARDFEED;i&&(n=ep.Z.BOARDLESS_PINS),T((0,eu.vX)({feedId:e,feedType:n,itemIds:[t],itemType:"pin"}))},boardResource:g,carouselData:u&&u.carouselData,checkExperiment:W,currentHistoryStack:F,getStringifiedCommerceAuxData:J,i18n:l,incrementBoardPinCount:({boardId:e,sectionId:t})=>T((0,ed.Br)({boardId:e,sectionId:t,increment:1})),initialSelection:N,isLimitedLogin:I.isLimitedLogin,location:s,logContextEvent:n,mostRecentBoard:E,mountAfterActionPlacement:G,onPinCreate:v,onVisitButtonAnimate:et,pin:u,popoverId:r,postRepinMoreIdeasUpsell:Z,postRepinUpsellDisabled:U,previousHistory:B,renderPinSaveTooltip:i.renderPinSaveTooltip,requireAuth:Q,save:X,savedCutout:u.savedCutout??void 0,savedInfo:u.savedInfo??void 0,searchQueryInvalidated:e=>T((0,ec.sb)(e)),selectBoardOrSection:e=>{T(("cutout"===i.variant?H.b6:H.Vp)(e))},selectedItem:p??void 0,setAbortNoActionPlacementTimeout:q,setMostRecentBoard:(e,t,a)=>T((0,eh.p)(e,t,a)),showEmailVerificationReminderModal:P,showSaveToProfile:V,shuffleAsset:h,surface:a,toastManagerContext:x,unsave:ee,unselectedText:K,updateHeaderState:$,updateUserPinCount:e=>T((0,e_.JS)({userId:e,increment:1})),viewer:I,viewerUserId:I.isAuth?I.id:""})})},410890:function(e,t,a){a.d(t,{Z:()=>u});var i=a(686659),n=a(667294),l=a(740097),r=a(230201),s=a(924591),o=a(24246),d=a(216975),c=a(785893);function u({boardName:e,boardUrl:t,isBoardlessPin:a,isFromPinBuilder:u,hasNewPin:h,onChangeButtonClick:_,onVisitButtonClick:p=()=>{},onHide:g,onUndo:f,pinImageUrl:m}){let b;(0,n.useEffect)(()=>{(0,i.Z)("PostSavedPinToast","/app/www/common/PinBetterSave/PostSavedPinToast.tsx")},[]);let y=(0,o.Z)(),{logContextEvent:v}=(0,r.u)();u?b={accessibilityLabel:y._('Visit Pin', 'PostSavedPinToast.a11yVisitButton', 'Accessibility label for Visit Pin saved from PinBuilder'),label:y._('Visit', 'PostSavedPinToast.VisitButton', 'Visit Pin saved from PinBuilder'),size:"lg",onClick:p}:(_||f)&&(b={accessibilityLabel:h&&a&&_?y._('Change Pin destination', 'PostSavedPinToast.a11yChangeButton', 'Change saved pin to a different destination'):y._('Undo Saved Pin', 'PostSavedPinToast.a11yUndoButton', 'Undo Saved Pin'),label:h&&a&&_?y._('Change', 'PostSavedPinToast.ChangeButton', 'Change saved pin to a different destination'):y._('Undo', 'PostSavedPinToast.UndoButton', 'Undo Saved Pin'),size:"lg",onClick:h&&a&&_?()=>_():f});let x=()=>{h&&a&&_&&v({event_type:101,component:14409})};return(0,c.jsx)(s.Z,{duration:a?6e3:3e3,imageUrl:m,onHide:g,primaryAction:b,text:(0,c.jsx)(l.xv,{overflow:"normal",size:"200",children:(0,d.XB)({text:y._('Saved to <a id="1">{{ boardName }}</a>', 'PostSavedPinToast.SavedToBoardToast.Message', 'Saved to label for better save. boardName: url to saved board'),markers:{boardName:e??""},jsxReplacements:{1:({innerHtmlStrings:e})=>(0,c.jsx)(l.rU,{display:"block",href:a?"/me/":t??"",onClick:x,children:(0,c.jsx)(l.xv,{lineClamp:1,size:"200",weight:"bold",children:e},"PostSavedPinToastBoardName")})}})}),thumbnail:a?{icon:(0,c.jsx)(l.JO,{accessibilityLabel:y._('Saved to profile thumbnail', 'PostSavedPinToast.thumbnail.accessibilityLabel', 'Thumbnail for saved to profile.'),color:"default",icon:"history",size:24})}:void 0})}},699549:function(e,t,a){a.d(t,{Z:()=>o});var i=a(686659),n=a(667294),l=a(740097),r=a(171972),s=a(785893);function o(e){(0,n.useEffect)(()=>{(0,i.Z)("SavedStatus","/app/www/common/PinBetterSave/SavedStatus.tsx")},[]);let{clientTrackingParams:t,children:a,currentCarouselIndex:o,hidePinRepEditButton:d=!1,onDeleteSavedState:c,onEditSubmit:u,onToggleModal:h,pinId:_,variant:p,viewParameter:g,shouldUseLegoStyles:f,surface:m}=e;return(0,s.jsxs)(l.xu,{alignItems:"center",direction:"row",display:"flex",maxHeight:"100%",paddingX:"closeup"!==p||f?void 0:2,width:"closeup"===p?"100%":void 0,children:[a&&(0,s.jsx)(l.xu,{"data-test-id":"saved-info",flex:"grow",paddingX:1,children:a}),!d&&(0,s.jsx)(l.xu,{flex:"none",marginStart:"auto",paddingX:1,children:(0,s.jsx)(r.default,{carouselSlotCurrentIndex:o,clientTrackingParams:t,component:0,onDelete:c,onSubmit:u,onToggleModal:h,pinId:_,shouldUseLegoStyles:f,style:"pin"===p?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"},surface:m,useLegoStyles:"pin"===p,viewParameter:g})})]})}},343111:function(e,t,a){a.d(t,{Z:()=>r});let i={row:0,section:0},n={row:-1,section:-1},l=()=>void 0;class r{constructor(e){this.index={...i},this.sections=e,this.updateCallback=l,this.selectItem=l}getIndex(){return this.index}isAtStart(){let{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){let{row:e,section:t}=this.index,a=this.sections[t]||[];return this.sections.length===t+1&&a.length===e+1}next(){if(this.isAtEnd())return;let{row:e,section:t}=this.index;e===n.row&&t===n.section?this.index={...i}:this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;let{row:e,section:t}=this.index;if(e===n.row&&t===n.section)this.index={...i};else if(e>0)this.index.row-=1;else{let e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){let{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index={...n},this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},71919:function(e,t,a){a.d(t,{Z:()=>d});var i=a(686659),n=a(667294),l=a(740097),r=a(105435),s=a(785893);function o(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends n.Component{constructor(e){super(e),o(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),o(this,"handleIndexUpdate",e=>{let{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),o(this,"handleSelectItem",e=>()=>{let{disabled:t,onSelectItem:a}=this.props;t||a(e)}),o(this,"handleMouseEnter",e=>()=>{let{disabled:t,indexManager:a}=this.props;t||a.updateIndex(e)}),o(this,"handleMouseLeave",()=>{let{disabled:e,indexManager:t}=this.props;e||t.setInactive()}),o(this,"renderItems",(e,t)=>{let{renderItem:a}=this.props,{selectedIndex:i}=this.state,{row:n,section:r}=i||{},{customProps:o={},items:d,renderItem:c}=e,{isDisabled:u}=o,h=t===r,_=c||a;return _&&d.map((e,a)=>{let i=u?.(e)??!1,r=h&&a===n;return(0,s.jsx)(l.xu,{ref:!i&&r?this.setSelectedItemRef:null,"data-test-id":"board-selection",children:i?_({item:e,hovered:r,sectionProps:o}):(0,s.jsx)(l.iP,{fullWidth:!1,onMouseEnter:this.handleMouseEnter({section:t,row:a}),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2,children:_({item:e,hovered:r,sectionProps:o})})},a)})}),o(this,"renderSections",()=>{let{renderSectionHeader:e,sections:t}=this.props;return t.map((t,a)=>(0,s.jsxs)(l.xu,{children:[e&&e(t,a),this.renderItems(t,a)]},a))});let{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){let{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){let e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;let a=e.getBoundingClientRect(),i=a.top,n=a.bottom,l=t.getBoundingClientRect(),r=l.top;n>=l.bottom?e.scrollIntoView(!1):i<=r&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){let{grow:e=!1,maxHeight:t,fetchMore:a}=this.props;return(0,s.jsx)(r.Z,{fetchMore:a,children:({setRef:a,onScroll:i})=>(0,s.jsx)(l.xu,{ref:e=>{this.containerRef=e,a(e)},flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:i,overflow:"auto",children:this.renderSections()})})}componentDidMount(){(0,i.Z)("SectionList","/app/www/common/SectionList/SectionList.tsx")}}},201198:function(e,t,a){a.d(t,{Z:()=>d});var i=a(686659),n=a(667294),l=a(740097),r=a(785893);let s={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function o(){return(0,r.jsx)(l.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:8,width:"100%",children:(0,r.jsx)(l.xu,{dangerouslySetInlineStyle:s,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function d({disabled:e,form:t,fullWidth:a,name:s,onClick:d,size:c,submitting:u,text:h}){return(0,n.useEffect)(()=>{(0,i.Z)("SubmitButton","/app/www/common/SubmitButton/SubmitButton.tsx")},[]),(0,r.jsxs)(l.xu,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[u&&(0,r.jsx)(o,{}),(0,r.jsx)(l.zx,{color:"red",disabled:e||u,form:t,fullWidth:a,name:s,onClick:d,size:c,text:h,type:"submit"})]})}},148:function(e,t,a){a.d(t,{n:()=>h,v:()=>_});var i=a(667294),n=a(312048),l=a(213491),r=a(477738),s=a(739405),o=a(582610),d=a(305375),c=a(785893);let{Provider:u,get:h}=(0,l.Z)("SearchParams"),_=({children:e,value:t})=>{let a=function(){let e=(0,s.HG)(),{search:t,pathname:a}=(0,n.TH)(),{scope:i}=(0,d.Z)(),l=!i&&a.includes("/_tools/shop");return(0,o.Z)({isDesktop:e,scope:l?r.lw.SHOP_TOOL:i,search:t})}(),l=(0,i.useMemo)(()=>({...a,...t}),[a,t]);return(0,c.jsx)(u,{value:l,children:e})}},901287:function(e,t,a){a.d(t,{Z:()=>x});var i,n,l=a(686659),r=a(667294);a(167912);var s=a(740097),o=a(183e3),d=a(24246),c=a(216975),u=a(785893);function h(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let _=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],p=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),g=e=>Math.PI/180*e;class f extends r.PureComponent{constructor(...e){super(...e),h(this,"animationTimer",null),h(this,"canvasRemovalTimer",null),h(this,"containerRef",(0,r.createRef)()),h(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;let{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),a=2.5*e,i=document.createElement("canvas");return i.style.position="absolute",i.style.left=`${0-(a-t)/2}px`,i.style.top=`${0-(a-e)/2}px`,i.style.pointerEvents="none",i.style.width=`${a}px`,i.style.height=`${a}px`,i.style.overflow="visible",i.width=a,i.height=a,i}),h(this,"explode",()=>{let e=this.buildCanvas(),t=this.containerRef.current;if(!e||!t)return;let a=e.getContext("2d");t.prepend(e);let i=Array.from(Array(120)).map(()=>({x:e.width/2,y:e.height/2,radius:Math.round(p(10,30)),color:_[Math.floor(Math.random()*_.length)],degree:Number(p(0,360).toFixed(1)),speed:Math.round(p(0,25)),friction:.9,opacity:Number(p(0,.5).toFixed(1)),yVel:0,gravity:.04})),n=(e,t,a,i)=>{window.requestAnimationFrame(()=>n(e,t,a,i)),t.clearRect(0,0,a,i),e.forEach(e=>{e.x+=e.speed*Math.cos(g(e.degree)),e.y+=e.speed*Math.sin(g(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};a&&n(i,a,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t.removeChild(e)},(this.props.delay||0)+800)})}componentDidUpdate(e){let{delay:t,startAnimation:a}=this.props,{startAnimation:i}=e;a&&i!==a&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,u.jsx)(s.xu,{ref:this.containerRef,position:"relative",children:this.props.children})}}function m(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}h(f,"defaultProps",{delay:0});let b=(void 0!==i||(i=a(757191)).hash&&"18c3db3fbed169f50cffd214f66ddd8e"!==i.hash&&console.error("The definition of 'BoardCreateSuccess_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),y=(void 0!==n||(n=a(488623)).hash&&"f12c153dafdb70970e02775ea0db67c2"!==n.hash&&console.error("The definition of 'BoardCreateSuccess_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class v extends r.PureComponent{constructor(...e){super(...e),m(this,"state",{isInitialized:!1}),m(this,"containerRef",(0,r.createRef)()),m(this,"pinDestinationRef",(0,r.createRef)())}componentDidMount(){window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(){let{isInitialized:e}=this.state,{onDismiss:t}=this.props;e&&t&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(t,2600))}render(){let{pin:e,firstRepin:t,pinImageRef:a,selectedBoardName:i,shuffleAsset:n}=this.props,l=n?.cutoutImages??e?.imageSpec_236x,o=e?.description??"",d=l?.height??1,h=l?.width??1,_=l?.url??"",{isInitialized:p}=this.state,{mask:g,imageContainer:m}=((e,t,a,i)=>{let n,l,r={},s=a.current?.getBoundingClientRect(),o=t.current?.getBoundingClientRect(),d=i.current?.getBoundingClientRect();if(o&&s&&d){r={left:s.left-o.left,top:s.top-o.top};let e={x:d.left-s.left,y:d.top-s.top},t={x:(d.width-s.width)/2,y:(d.height-s.height)/2};n=`translate(${e.x}px, ${e.y}px)`,l=`translate(${t.x}px, ${t.y}px)`}return{mask:{position:"absolute",left:r.left,top:r.top,width:e?d?.width:s?.width,height:e?d?.height:s?.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?n:"none",transform:e?n:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:s?.width,height:s?.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?l:"none",transform:e?l:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}})(p,this.containerRef,a,this.pinDestinationRef);return(0,u.jsx)(r.Fragment,{children:(0,u.jsxs)(s.xu,{ref:this.containerRef,bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:[(0,u.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:g},maxHeight:335,overflow:"hidden",children:(0,u.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:m},children:(0,u.jsx)(s.Ee,{alt:o,naturalHeight:d,naturalWidth:h,src:_})})}),(0,u.jsx)(s.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:+!!p,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1}},left:!0,position:"absolute",right:!0,top:!0,children:(0,u.jsxs)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:+!!p,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}},direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[(0,u.jsx)(f,{delay:1250,startAnimation:p,children:(0,u.jsx)(s.zd,{height:180,rounding:2,width:270,children:(0,u.jsxs)(s.kC,{alignItems:"stretch",height:"100%",justifyContent:"start",width:"100%",children:[(0,u.jsx)(s.xu,{ref:this.pinDestinationRef,color:"transparent",flex:"grow",height:"100%",marginEnd:1}),(0,u.jsxs)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:80,children:[(0,u.jsx)(s.xu,{color:"secondary",flex:"grow",marginBottom:1}),(0,u.jsx)(s.xu,{color:"secondary",flex:"grow"})]})]})})}),(0,u.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{opacity:+!!p,WebkitTransform:p?"translateY(0)":"translateY(20%)",transform:p?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"}},"data-test-id":"board-saved-heading",paddingX:2,children:(0,u.jsx)(s.qd,{align:"center",children:t?(0,c.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First board create confirmation message', 'First board create confirmation message'),{selectedBoardName:i??""}):(0,c.nk)(this.props.i18n._('You saved this Pin to {{ selectedBoardName }}!', 'Board create confirmation message', 'Board create confirmation message'),{selectedBoardName:i??""})})})]})})]})})}}function x({pinKey:e,shuffleAssetKey:t,...a}){(0,r.useEffect)(()=>{(0,l.Z)("BoardCreateSuccess","/app/www/nux/BoardCreateSuccess.tsx")},[]);let i=(0,d.Z)(),n=(0,o.Z)(b,e),s=(0,o.Z)(y,t);return(0,u.jsx)(v,{...a,i18n:i,pin:n,shuffleAsset:s})}m(v,"defaultProps",{firstRepin:!1})},582610:function(e,t,a){a.d(t,{Z:()=>l});var i=a(477738),n=a(575820);function l({isDesktop:e,scope:t,search:a}){let{auto_correction_disabled:l="",b_id:r,brands:s,category:o,colors:d,commerce_only:c="",cover_pin_sig:u,deb_d:h,domains:_,filters:p,guided_search_query:g,inline_suggestion:f,interest_id:m,journey_depth:b,on_sale:y,price_max:v,price_min:x,q:S,query_pin_sigs:P,request_params:A,rs:w,selected_one_bar_modules:k,source_id:C,source_module_id:I,tab:T,top_pin_ids:j,user:z}=(0,n.mB)(a),E="true"===c.toLowerCase()&&"shop_tool"!==t?i.lw.PINS_BUYABLE:t;return{autoCorrectionDisabled:"true"===l.toLowerCase(),brands:s,bubbleId:r,category:o,colors:d,commerceOnly:"true"===c.toLowerCase(),coverPinSig:u,currentlyAppliedFiltersParamTerm:p,debD:h,domains:_,guidedSearchQuery:g,inlineSuggestion:f,interestId:m,journeyDepth:b?parseInt(b,10):void 0,onSale:y,personalizationPinSig:P,placementId:(0,i.Hd)(E,e),priceMax:v,priceMin:x,query:S,requestParams:A,rs:w,scope:E,selectedOneBarModules:k,sourceId:C,sourceModuleId:I,tab:T||"",topPinIds:j,user:z,viewParameter:(0,i._R)(E),viewType:E===i.lw.SHOP_TOOL?1:2}}},657476:function(e,t,a){a.d(t,{X:()=>_,Z:()=>h});var i=a(312048),n=a(190665),l=a(501010),r=a(774838),s=a(661376),o=a(42676),d=a(477738),c=a(739405),u=a(148);function h(e){let{resource:t}=_(e);return t}function _(e){let{skipResourceCall:t}=e||{},{checkExperiment:a}=(0,l.Z)(),{isAuthenticated:h}=(0,r.B)(),{pathname:_,search:p}=(0,i.TH)(),g=(0,c.HG)(),f=!h||!g,m=(0,u.n)(),b=(0,n.Z)(),y=(0,o.vW)({searchParams:m,sourceUrl:_+p,isDesktop:g,isAuthenticated:h,appliedUnifiedFilters:b}),v=f;f&&(v=!!h&&!a("unify_search_resource_auth_mweb").anyEnabled);let x=t||m.scope===d.lw.USERS&&!f||v;return{resource:(0,s.Z)(x?null:y),options:y.options}}},908808:function(e,t,a){function i(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function n(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}a.d(t,{HG:()=>n,OQ:()=>l,hd:()=>i});let l=(e,t)=>({type:"BOARD_SECTION_EDIT",payload:t})},66708:function(e,t,a){a.d(t,{Z:()=>c});var i=a(27399),n=a(660322),l=a(329197),r=a(908808),s=a(779686),o=a(679602),d=a(438274);function c({boardId:e,sourceBoardId:t="",sourceSectionId:a="",name:c,nameSource:u,pinImport:h,initialPinIds:_=[]},p,g,f){let m=0;"RECOMMENDATION"===u?m=1:"EDITED_RECOMMENDATION"===u&&(m=2);let b={board_id:e,initial_pins:h&&!h.all?h.pinIds:_,name:c,name_source:m,...g?{orbac_subject_id:g}:Object.freeze({})};return c=>i.Z.create("BoardSectionResource",b).callCreate({showError:!1}).then(({resource_response:{data:i}})=>{f({event_type:7100,object_id_str:i.id}),c((0,r.hd)(e,i)),c((0,s.vX)({feedId:e,feedType:d.Z.BOARD_SECTIONS,itemIds:[i.id],itemType:"boardsection"})),c((0,l.Z)(e,"pin_count")),c((0,n.jB)("BoardSectionsRepinResource",{board_id:e,orbac_subject_id:g}));let{all:u,pinIds:_}=h||{all:!1,pinIds:[]};return u?new Promise((n,l)=>c((0,o.Z)({inverseSelection:!0,selectedPinIds:_,source:{boardId:t||e,sectionId:a||null},target:{boardId:e,sectionId:i.id}},p)).then(()=>n(i)).catch(l)):(_.length>0&&c((0,s.EX)({feedId:e,feedType:d.Z.BOARDFEED,itemIds:_,itemType:"pin"})),i)})}},773382:function(e,t,a){a.d(t,{Z:()=>n});var i=a(233597);function n(e,t){return a=>a((0,i.U)("BoardSectionResource",{options:{field_set_key:t||"board_page",section_id:e}}))}},211731:function(e,t,a){a.d(t,{A8:()=>v,CQ:()=>k,Cf:()=>b,DK:()=>g,GJ:()=>w,RZ:()=>x,SD:()=>S,aN:()=>C,h6:()=>m,tV:()=>A,xx:()=>y,yC:()=>I,zC:()=>f});var i,n,l,r,s,o,d,c=a(581722),u=a(167912),h=a(27399),_=a(230201),p=a(681698);let g=()=>{let e=(void 0!==i||(i=a(497818)).hash&&"850c5de9834cac0edfdd5652a78bffbf"!==i.hash&&console.error("The definition of 'collab_users_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),[t]=(0,u.useMutation)(e),{logContextEvent:n}=(0,_.u)();return async(e,a,i)=>{let l={boardId:e,collaboratorIds:a,message:i||""};return await new Promise((a,i)=>{t({variables:{...l},onCompleted:(t,l)=>{l&&i(l[0]),n({event_type:28,object_id_str:e}),a()},onError:e=>i(e)})})}},f=()=>{let e=(void 0!==n||(n=a(286796)).hash&&"de392a939a95d05f7ee889fe77a9e52d"!==n.hash&&console.error("The definition of 'collab_emails_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),[t]=(0,u.useMutation)(e),{logContextEvent:i}=(0,_.u)();return async(e,a,n)=>{let l={boardId:e,emails:a,message:n||""};return await new Promise((a,n)=>{t({variables:{...l},onCompleted:(t,l)=>{l&&n(l[0]),i({event_type:28,object_id_str:e}),a()},onError:e=>n(e)})})}},m=()=>{let e=(void 0!==l||(l=a(917436)).hash&&"40ae8061007ba5f53a4570e43e4ca864"!==l.hash&&console.error("The definition of 'collab_ApproveInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),[t]=(0,u.useMutation)(e),{logContextEvent:i}=(0,_.u)();return async(e,a)=>{let n={boardId:e,userId:a};return await new Promise((a,l)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&l(n[0]),i({event_type:32,object_id_str:e}),a(t)},onError:e=>l(e)})})}};function b(e,t){return async a=>{await (0,p.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"POST",data:{collaborator:t}}),a({type:"BOARD_OWNERSHIP_TRANSFER_REQUEST",payload:{boardId:e,collaboratorId:t}})}}function y(e,t){return async a=>{await (0,p.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"DELETE",data:{collaborator:t}}),a({type:"BOARD_OWNERSHIP_TRANSFER_REQUEST_CANCEL",payload:{boardId:e}})}}let v=(e,t)=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e,collaboratingUser:t}}),x=()=>{let e=(void 0!==r||(r=a(339442)).hash&&"7005ce437a6a6ff33741ab44aa02cf61"!==r.hash&&console.error("The definition of 'collab_AcceptInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),[t]=(0,u.useMutation)(e),{logContextEvent:i}=(0,_.u)();return async e=>{let a={boardId:e};return await new Promise((n,l)=>{t({variables:{...a},onCompleted:(t,a)=>{a&&l(a[0]),i({event_type:32,object_id_str:e}),n(t)},onError:e=>l(e)})})}},S=(e,t,a)=>async i=>{i(v(e,t)),(await h.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t.id}).callUpdate()).resource_response.error||a({event_type:32,object_id_str:e})};function P(e,t){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:t}}}let A=()=>{let e=(void 0!==s||(s=a(905709)).hash&&"9aa22a7713214239538142ad2c957cc3"!==s.hash&&console.error("The definition of 'collab_RequestToJoin_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s),[t]=(0,u.useMutation)(e),i=(0,c.I0)();return async e=>{let a={boardId:e};return await new Promise((n,l)=>{t({variables:{...a},onCompleted:(t,a)=>{a&&(i(P(e,!1)),l(a[0])),i(P(e,!0)),n(t)},onError:t=>{i(P(e,!1)),l(t)}})})}};function w(e,t){return a=>{(0,p.Z)({url:`/v3/boards/${e}/collaborators/invite/${t}/`,method:"DELETE",data:{board:e,user:t}}).catch(()=>{a(P(e,!0))}),a(P(e,!1))}}let k=()=>{let e=(void 0!==o||(o=a(932522)).hash&&"c62e5df78917dd238b70f366f358d487"!==o.hash&&console.error("The definition of 'collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),[t]=(0,u.useMutation)(e),{logContextEvent:i}=(0,_.u)();return async(e,a,n)=>{let l={boardId:e,userId:a,ban:n||!1};return await new Promise((a,n)=>{t({variables:{...l},onCompleted:(t,l)=>{l&&n(l[0]),i({event_type:29,object_id_str:e}),a(t)},onError:e=>n(e)})})}},C=()=>{let e=(void 0!==d||(d=a(10028)).hash&&"2c3e1508650962adfff1171e950fa419"!==d.hash&&console.error("The definition of 'collab_RemoveBoardCollaborators_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d),[t]=(0,u.useMutation)(e),{logContextEvent:i}=(0,_.u)();return async(e,a)=>{let n={board:e,collaboratorIds:[a]};return await new Promise((a,l)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&l(n[0]),i({event_type:29,object_id_str:e}),a(t)},onError:e=>l(e)})})}},I=()=>{let e=k(),t=C();return(a,i,n)=>async()=>{let{invited_user:i,status:l,board:{id:r}}=a;i&&("accepted"===l?await t(r,i.id):await e(r,i.id,n))}}},267092:function(e,t,a){function i(e,t){return{type:"SEARCH_PIN_CLOSEUP_VIEWED",payload:{pinId:e,query:t}}}function n(e){return{type:"SEARCH_QUERY_STARTED",payload:{query:e}}}function l(e){return{type:"SEARCH_QUERY_INVALIDATED",payload:{query:e}}}a.d(t,{Y4:()=>i,g4:()=>n,sb:()=>l})},229103:function(e,t,a){a.d(t,{p:()=>i});let i=(e,t,a)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:a}})},148266:function(e,t,a){function i(e){return{type:"PIN_BETTER_SAVE",payload:e}}function n(e){return{type:"PIN_BETTER_SAVE_CUTOUT",payload:e}}function l(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function r(e){return{type:"PIN_BETTER_UNSAVE_CUTOUT",payload:e}}function s(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function o(e){return{type:"PIN_BETTER_SELECT_BOARD_CUTOUT",payload:e}}function d(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}a.d(t,{ND:()=>d,Vp:()=>s,a1:()=>i,b6:()=>o,jg:()=>l,o4:()=>n,ti:()=>r})},826681:function(e,t,a){a.d(t,{Ge:()=>c,JS:()=>r,P_:()=>s,Q_:()=>_,b8:()=>p,cg:()=>o,h2:()=>u,h6:()=>h});var i=a(27399),n=a(47755),l=a(748025);function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let s=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),o=(e,t)=>({type:"USER_FOLLOWING_COUNT",payload:{id:e,following:t}}),d=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),c=({id:e,orbacSubjectId:t,blockSource:a,blockContext:i,logContextEvent:l})=>async r=>{r(d(e,!0));let s=await (0,n.Z)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"PUT",data:{orbac_subject_id:t,block_source:a,block_context:i}}).catch(()=>r(d(e,!1)));return l({event_type:54,object_id_str:e}),s},u=(e,t)=>async a=>{a(d(e,!1));let i=await (0,n.Z)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"DELETE"}).catch(()=>a(d(e,!0)));return t({event_type:55,object_id_str:e}),i};function h(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let _=(e,t)=>()=>i.Z.create("UserStateResource",{state:e,value:t}).callCreate(),p=(e,t,a)=>(i,r)=>{(0,n.Z)({url:"/v3/users/me/",method:"POST"}).then(()=>{a({event_type:48,object_id_str:r().session.userId}),e(),(0,l.Z)()},t)}},116321:function(e,t,a){a.d(t,{Z:()=>g});var i=a(686659),n=a(667294),l=a(752031),r=a(470205),s=a(935059),o=a(501010),d=a(661376),c=a(200619),u=a(601871),h=a(492137),_=a(785893);let p=(0,n.lazy)(()=>Promise.all([a.e("25418"),a.e("85195"),a.e("85607"),a.e("59789"),a.e("86926")]).then(a.bind(a,38422)));function g(e){(0,n.useEffect)(()=>{(0,i.Z)("EditPinModalLoader","/app/www/save/EditPinModal/EditPinModalLoader.tsx")},[]);let t=(0,c.Z)(),a=(0,s.Z)(),g=(0,u.lJ)(a,t),f=(0,o.Z)(),m=f?.checkExperiment("aid_exp_minified_edit_pin_fixes_2025_11").anyEnabled,b=(0,n.useMemo)(()=>m?(0,h.Tr)(e.pinId,!0,g):void 0,[m,e.pinId,g]),y=(0,d.Z)({name:"PinResource",options:m?b:(0,h.Tr)(e.pinId,!0,g)}),v=(0,n.useMemo)(()=>m&&y.data?{type:"Legacy",data:y.data}:void 0,[m,y.data]);return(0,_.jsx)(r.Z,{name:"SafeSuspense_EditPinModalLoader_EditPinModal",children:(0,_.jsx)(n.Suspense,{children:y?.data?(0,_.jsx)(l.A,{pinKey:m&&v?v:{type:"Legacy",data:y.data},children:(0,_.jsx)(p,{...e,pin:y.data,pinIsLoaded:y.isLoaded})}):null})})}},495629:function(e,t,a){a.d(t,{Z:()=>r});var i=a(581722),n=a(230201),l=a(943152);let r=({pinId:e,carouselSlotCurrentIndexProp:t,component:a,setShowEditModal:r})=>{let s,{logContextEvent:o}=(0,n.u)(),d=(0,l.Z)(),c=(0,i.v9)(({pins:e})=>e),{carousel_data:u}=c&&e&&c[e]||{},{index:h}=u||{};return void 0!==t&&(s=h||t||0),{onClick:({event:e})=>{if(d)return void d();e.stopPropagation(),o({event_type:101,element:3,...a?{component:a}:Object.freeze({})}),r(!0)},carouselSlotCurrentIndex:s}}},492137:function(e,t,a){function i(e){return!!(e&&e.trim().length)}function n(e,t){let a=i(e),n=i(t);return(a||n)&&e!==t}a.d(t,{Tr:()=>l,aU:()=>n});let l=(e,t,a)=>({field_set_key:"detailed",id:e,preserve_component_state:t,...a?{orbac_subject_id:a}:Object.freeze({})})},395878:function(e,t,a){a.d(t,{Z:()=>g});var i,n=a(686659),l=a(667294);a(167912);var r=a(740097),s=a(943152),o=a(183e3),d=a(24246),c=a(36351),u=a(500602),h=a(785893);let _=(void 0!==i||(i=a(954881)).hash&&"f459445ee8d1ea0db022e490ef5a2e80"!==i.hash&&console.error("The definition of 'SendBoardFlyout_board' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);class p extends l.Component{constructor(...e){var t,a,i;super(...e),a={flyoutOpen:!1},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="state","string"))?i:i+"")in this?Object.defineProperty(this,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[t]=a}render(){let{board:e,bgColor:t="white",children:a,disableSelectedStyle:i,iconColor:n="subtle",onCreatePincode:s,showTooltip:o,size:d="lg"}=this.props,{flyoutOpen:_}=this.state,p={description:e?.description,id:e?.entityId??"",imageUrl:e?.imageCoverUrl,name:e?.name??void 0,type:"board",url:e?.url??void 0},g=e=>{let{requireAuth:t}=this.props;if(t){e&&e.preventDefault(),t();return}this.state.flyoutOpen||this.props.onOpen(),this.setState(e=>({flyoutOpen:!e.flyoutOpen}))},f=a&&a({active:_,onClick:()=>g()})||(0,h.jsx)(r.hU,{ref:this.props.sendBoardButtonRef,accessibilityLabel:this.props.i18n._('Send Board', 'Accessible label for button to send board', 'Accessible label for button to send board'),bgColor:t,dataTestId:"send-board-button-icon",icon:"share",iconColor:n,onClick:({event:e})=>g(e),selected:!i&&_,size:d,tooltip:o?{text:this.props.i18n._('Share board', 'sendBoardFlyout.button.tooltip', 'Tooltip for button to share board')}:void 0});return(0,h.jsxs)(l.Fragment,{children:[(0,h.jsx)(r.xu,{ref:e=>{this.anchor=e},children:f}),this.state.flyoutOpen&&(0,h.jsx)(r.mh,{zIndex:u.m6,children:(0,h.jsx)(r.J2,{anchor:this.anchor,idealDirection:"down",onDismiss:()=>g(),positionRelativeToAnchor:!1,size:"flexible",children:(0,h.jsx)(c.Z,{component:13216,onCreatePincodeClick:s?()=>{g(),s()}:void 0,onHide:()=>g(),sendType:"board",sharedObject:p,viewType:5})})})]})}componentDidMount(){(0,n.Z)("SendBoardFlyout","/app/www/save/board/BoardInfoBar/SendBoardFlyout.tsx")}}let g=e=>{(0,l.useEffect)(()=>{(0,n.Z)("SendBoardFlyout","/app/www/save/board/BoardInfoBar/SendBoardFlyout.tsx")},[]);let t=(0,d.Z)(),a=(0,s.Z)(),i=(0,o.Z)(_,e.boardKey);return(0,h.jsx)(p,{...e,board:i,i18n:t,requireAuth:a,sendBoardButtonRef:e.sendBoardButtonRef})}},235623:function(e,t,a){a.d(t,{Z:()=>m});var i,n=a(686659),l=a(667294);a(244311);var r=a(740097),s=a(230201),o=a(943152),d=a(753806),c=a(183e3),u=a(24246),h=a(774838),_=a(395878),p=a(554365),g=a(785893);let f=(void 0!==i||(i=a(413044)).hash&&"8d95294efe15498023c69669c6a41e71"!==i.hash&&console.error("The definition of 'SendBoardButton_board' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function m({boardKey:e,color:t,handleCreatePincode:a,iconColor:i,hasBoardToolStyles:m,hasShadow:b,showTooltip:y,disableSelectedStyle:v,size:x="lg"}){(0,l.useEffect)(()=>{(0,n.Z)("SendBoardButton","/app/www/save/board/Headers/BoardHeader/SendBoardButton.tsx")},[]);let{logContextEvent:S}=(0,s.u)(),P=(0,u.Z)(),A=(0,o.Z)(),{userAgent:{platform:w}}=(0,h.B)(),k="android"===w,C=(0,l.useRef)(null),I=(0,c.Z)(f,e),[T,j]=(0,l.useState)(!1),z=T?"lightWash":t;return(0,g.jsxs)(l.Fragment,{children:[(0,g.jsx)(_.Z,{boardKey:I,disableSelectedStyle:v,iconColor:i,onCreatePincode:a,onOpen:()=>{if(A)return void A();(0,p.Z)(S)},sendBoardButtonRef:C,showTooltip:y,size:x,children:m?({active:e,onClick:t})=>(0,g.jsx)(r.iP,{onTap:t,rounding:5,children:(0,g.jsxs)(r.xu,{borderStyle:b?"shadow":void 0,color:e?"selected":z,display:"flex",justifyContent:"center",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),paddingX:4,paddingY:5,rounding:5,children:[(0,g.jsx)(r.xu,{marginEnd:2,children:(0,g.jsx)(r.JO,{accessibilityLabel:P._('Share', 'Board.ShareButton', 'Accessible label for button to share a board'),color:e?"light":"default",icon:k?"android-share":"share",size:20})}),(0,g.jsx)(r.xv,{color:e?"inverse":"default",children:P._('Share', 'Board.ShareButton', 'Label for button to share a board')})]})}):void 0}),(0,g.jsx)(d.N,{anchors:{3018:C.current},idealDirection:"down",onAnchorTouch:"complete",placementId:18,scrollToDismiss:!0})]})}},554365:function(e,t,a){a.d(t,{Z:()=>i});function i(e){e({event_type:101,element:10778,component:13216,view_type:5,view_parameter:3069})}},694220:function(e,t,a){a.d(t,{W:()=>c,Z:()=>u});var i=a(740097),n=a(249459),l=a(24246),r=a(409726),s=a(149119),o=a(307345),d=a(785893);function c(e,t=""){let a=e&&e.length>1?RegExp(e,"i"):"";return e&&e.length>1?t.split(a).reduce((a,i)=>{if(a.length>0&&e&&e.length){let n=t.toLowerCase().indexOf(e.toLowerCase());return a.concat(t.substring(n,n+e.length),i)}return[i]},[]):t}let u=function(e){let t=(0,l.Z)(),{disabled:a,item:u,isSection:h,isSelectMode:_,isWithinSectionPicker:p,saveState:g,searchQuery:f,selected:m}=e,b=h?null:u,y=h?u:null,v=y&&y.title||b&&b.name||"",x="",S=!1,P="",A=0;b&&({image_cover_url:x,is_collaborative:S,privacy:P,section_count:A=0}=b);let w=c(f,v),k=P===n.Z.BoardPrivacy.SECRET,C=!a&&(m||!!g),I=!p&&"number"==typeof A&&A>0,T="number"==typeof A&&A>0?"boardWithSection":"boardWithoutSection",j=_?t._('Select', 'Board select button label', 'Board select button label'):t._('Save', 'Pin save button label', 'Pin save button label');return(0,d.jsxs)(i.xu,{alignItems:"center",color:C?"secondary":"default","data-test-id":T,display:"flex",height:64,marginEnd:2,marginStart:2,marginTop:1,padding:2,rounding:3,children:[b&&(0,d.jsx)(i.xu,{color:"secondary",flex:"none",height:48,marginEnd:2,overflow:"hidden",rounding:2,width:48,children:x&&(0,d.jsx)(i.Ee,{alt:t._('Board cover image', 'boardPickerRow.image.altText', 'alt text for a board cover image'),fit:"cover",naturalHeight:1,naturalWidth:1,src:x})}),y&&!!y.preview_pins?.length&&(0,d.jsx)(s.Z,{image_url:y.preview_pins[0].image_square_url??"",naturalHeight:y.preview_pins[0].image_square_size_pixels?.height??1,naturalWidth:y.preview_pins[0].image_square_size_pixels?.width??1}),(0,d.jsxs)(i.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,d.jsx)(i.xv,{color:a?"subtle":"default",lineClamp:1,size:"300",weight:"bold",children:w}),(I||!C)&&(0,d.jsxs)(i.kC,{alignItems:"center",justifyContent:"start",children:[k&&(0,d.jsx)(o.Z,{type:"secret"}),S&&(0,d.jsx)(r.Z,{board:b,showCollaborativeIcon:S,useLegoLayout:!0}),I&&(0,d.jsx)(o.Z,{type:"sections"})]}),!I&&C&&!g&&(0,d.jsx)(i.xu,{alignItems:"center",color:"primary","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4,children:(0,d.jsx)(i.xv,{color:"inverse",overflow:"normal",size:"300",weight:"bold",children:j})}),!I&&C&&"loading"===g&&(0,d.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:(0,d.jsx)(i.xH,{accessibilityLabel:t._('Saving', 'Accessibility label for saving a pin to a board', 'Accessibility label for saving a pin to a board'),show:!0})})]})]})}},809995:function(e,t,a){a.d(t,{Z:()=>h});var i=a(686659),n=a(667294),l=a(740097),r=a(230201),s=a(24246),o=a(661376),d=a(785893);function c(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends n.Component{constructor(...e){super(...e),c(this,"state",{isHovering:!1}),c(this,"onHover",()=>{this.setState({isHovering:!0})}),c(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){let{name:e,selected:t,image:a,inFlyoutExp:i}=this.props;return i?(0,d.jsxs)(l.xu,{alignItems:"center",color:this.state.isHovering?"secondary":"transparent",direction:"row",display:"flex",onMouseOut:this.offHover,onMouseOver:this.onHover,paddingX:4,paddingY:2,children:[(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.zd,{height:40,rounding:2,width:40,children:this.state.isHovering&&a&&a.url?(0,d.jsx)(l.Ee,{alt:"",color:"",fit:"cover",naturalHeight:a.height??1,naturalWidth:a.width??1,src:a.url}):(0,d.jsx)(l.xu,{color:"secondary",height:40,width:40})})}),(0,d.jsx)(l.xu,{padding:2,children:(0,d.jsx)(l.qd,{size:"400",children:e})})]}):(0,d.jsxs)(l.xu,{alignItems:"center",color:t?"secondary":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.JO,{accessibilityLabel:"",color:t?"default":"subtle",icon:"add"})}),(0,d.jsx)(l.xu,{marginStart:3,children:(0,d.jsx)(l.xv,{color:t?"default":"subtle",weight:"bold",children:e})})]})}componentDidMount(){(0,i.Z)("BoardSuggestionListRow","/app/www/save/pin-to-board/BoardSuggestionList/BoardSuggestionListRow.tsx")}}let h=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:a,image:c,minHeight:h,onBoardSelected:_})=>{(0,n.useEffect)(()=>{(0,i.Z)("BoardSuggestionList","/app/www/save/pin-to-board/BoardSuggestionList/BoardSuggestionList.tsx")},[]);let{logContextEvent:p}=(0,r.u)(),g=(0,s.Z)(),[f,m]=(0,n.useState)(-1),{data:b=[],isLoaded:y}=(0,o.Z)({name:"ApiResource",options:{url:`/v3/pins/${String(a)}/board_title_suggestions/`,pin_id:a}}),v=(0,n.useMemo)(()=>b&&b.length?b.map(e=>e.title):[],[b]),x=()=>{m(-1)},S=(t,a)=>{let i=f===a;return(0,d.jsx)("li",{children:(0,d.jsx)(l.iP,{onMouseEnter:()=>{m(a)},onMouseLeave:x,onTap:()=>{_(v[a],!1),p({event_type:101,component:13025,element:23})},children:(0,d.jsx)(u,{image:c,inFlyoutExp:e,name:t,selected:i})})},a)};return y?v&&v.length?e?(0,d.jsx)(l.xu,{children:(0,d.jsx)("ul",{children:v.map(S)})}):t?(0,d.jsxs)(l.xu,{children:[(0,d.jsx)(l.xu,{marginBottom:3,marginStart:6,marginTop:5,children:(0,d.jsx)(l.xv,{children:g._('Suggested board names', 'text above suggested board names list', 'text above suggested board names list')})}),(0,d.jsx)("ul",{children:v.map(S)})]}):(0,d.jsxs)(l.xu,{children:[(0,d.jsx)(l.xu,{marginTop:2,paddingX:5,children:(0,d.jsx)(l.xv,{children:g._('Suggested board names', ' - ', ' -- ')})}),(0,d.jsx)("ul",{children:v.map(S)})]}):null:(0,d.jsx)(l.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:h||"",children:(0,d.jsx)(l.xH,{accessibilityLabel:g._('Loading board suggestions', 'Accesibility label for loading board suggestions', 'Accesibility label for loading board suggestions'),show:!0})})}},653316:function(e,t,a){a.d(t,{Z:()=>d});var i=a(686659),n=a(667294),l=a(740097),r=a(24246),s=a(174481),o=a(785893);function d(e){(0,n.useEffect)(()=>{(0,i.Z)("CreateBoardButton","/app/www/save/pin-to-board/CreateBoardButton/CreateBoardButton.tsx")},[]);let t=(0,r.Z)(),{buttonLabel:a,hasHoverState:d,name:c,onClick:u}=e,{isHovering:h,hoverHandlers:_}=(0,s.Z)(),p=c||a||t._('Create board', ' - ', ' -- ');return(0,o.jsx)(l.iP,{onMouseEnter:_.onMouseOver,onMouseLeave:_.onMouseLeave,onTap:u,children:(0,o.jsxs)(l.xu,{alignItems:"center",color:d&&h?"secondary":"default",display:"flex",height:"100%",padding:4,width:"100%",children:[(0,o.jsx)(l.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},marginEnd:2,rounding:2,children:(0,o.jsx)(l.JO,{accessibilityLabel:"",color:"default",icon:"add",size:20})}),c?(0,o.jsx)(l.xu,{margin:1,children:(0,o.jsxs)(l.xv,{inline:!0,overflow:"normal",children:[" ",t._('Create: ', ' - ', ' -- ')," "]})}):null,(0,o.jsxs)(l.xv,{align:"center",inline:!0,lineClamp:1,weight:"bold",children:[" ",p," "]})]})})}},533889:function(e,t,a){a.d(t,{Z:()=>b});var i=a(686659),n=a(667294),l=a(581722),r=a(740097),s=a(104999),o=a(935059),d=a(24246),c=a(514223),u=a(200619),h=a(601871),_=a(201198),p=a(66708),g=a(785893);function f(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends n.Component{constructor(e){super(e),f(this,"onCreateSection",()=>{let{board:e,sourceBoard:t,sourceSection:a,dispatch:i,completeCreateSectionAction:n,pinImport:l,viewer:r,orbacActingAs:s,logContextEvent:o}=this.props,d=(0,h.lJ)(r,s);return this.setState({isSaving:!0}),i((0,p.Z)({boardId:e.id,sourceBoardId:t&&t.id,sourceSectionId:a&&a.id,name:this.state.inputName.trim(),pinImport:l},this.props.i18n,d,o)).then(e=>{this.setState({isSaving:!1}),n(e)}).catch(e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})})}),f(this,"handleKeyDown",({event:e})=>{let{createError:t,inputName:a}=this.state;[c.Z.ENTER,c.Z.NUMPAD_ENTER].includes(e.which)&&!t&&a.trim()&&this.onCreateSection()}),f(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),f(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){let{createError:a,inputRef:i}=this.state;i&&(!t.inputRef||a)&&i.focus()}render(){let{showTitle:e,positionRelative:t}=this.props,{createError:a,inputName:i,isSaving:n}=this.state,l=!!i.trim()&&!a;return(0,g.jsxs)(r.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},direction:"column",display:"flex",flex:"grow",position:t?"relative":"absolute",right:!0,rounding:2,top:!0,width:"100%",children:[e&&(0,g.jsx)(r.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,g.jsx)(r.qd,{size:"400",children:this.props.i18n._('Add section', 'Title in the add section modal', 'Title in the add section modal')})}),(0,g.jsxs)(r.xu,{padding:4,children:[(0,g.jsx)(r.xu,{marginBottom:2,children:(0,g.jsx)(r.__,{htmlFor:"sectionEditName",children:(0,g.jsx)(r.xv,{color:a?"error":"subtle",size:"200",children:this.props.i18n._('Name', 'Board section name', 'Board section name')})})}),(0,g.jsx)(r.xu,{children:(0,g.jsx)(r.xu,{ref:this.handleInputRef,children:(0,g.jsx)(r.nv,{errorMessage:a||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"', 'Placeholder for board section name', 'Placeholder for board section name'),size:"lg",type:"text",value:i})})})]}),(0,g.jsx)(r.kC,{alignItems:"stretch",flex:"grow",justifyContent:"start"}),(0,g.jsx)(r.xu,{padding:4,children:(0,g.jsx)(r.kC,{alignItems:"stretch",justifyContent:"end",children:(0,g.jsx)(_.Z,{disabled:!l||n,onClick:this.onCreateSection,submitting:n,text:this.props.i18n._('Add', 'add a new section', 'add a new section')})})})]})}componentDidMount(){(0,i.Z)("CreateSectionPane","/app/www/save/pin-to-board/CreateSectionPane/CreateSectionPane.tsx")}}let b=function(e){let t=(0,l.I0)(),a=(0,d.Z)(),i=(0,o.Z)(),n=(0,u.Z)();return(0,g.jsx)(m,{...e,dispatch:t,i18n:a,logContextEvent:(0,s.Z)(),orbacActingAs:n,viewer:i})}},846960:function(e,t,a){a.d(t,{Z:()=>o});var i=a(686659),n=a(667294),l=a(740097),r=a(99737),s=a(785893);function o({url:e,description:t,color:a}){return(0,n.useEffect)(()=>{(0,i.Z)("ImagelessPinImage","/app/www/save/pin-to-board/ImagelessPinImage/ImagelessPinImage.tsx")},[]),a=a||"#8fa7bf",(0,s.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{background:a}},height:216,rounding:2,width:"100%",children:(0,s.jsxs)(l.xu,{maxHeight:200,overflow:"hidden",padding:4,children:[e&&(0,s.jsx)(l.xu,{marginBottom:2,children:(0,s.jsx)(l.xv,{color:"inverse",size:"100",children:(0,r.Z)(e).hostname||e})}),(0,s.jsx)(l.xu,{maxHeight:144,children:(0,s.jsx)(l.xv,{color:"inverse",overflow:"normal",weight:"bold",children:t})})]})})}},449058:function(e,t,a){a.d(t,{Z:()=>g});var i=a(686659),n=a(667294),l=a(740097),r=a(681698),s=a(24246),o=a(507006),d=a(216975),c=a(514223),u=a(771690),h=a(785893);function _(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends n.Component{constructor(...e){super(...e),_(this,"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),_(this,"onDismiss",()=>{}),_(this,"mounted",!1),_(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),_(this,"handleKeyDown",e=>{e.keyCode===c.Z.UP?this.handlePrevHashtag(e):e.keyCode===c.Z.DOWN?this.handleNextHashtag(e):e.keyCode===c.Z.ESCAPE?this.handleClose(e):e.keyCode===c.Z.ENTER&&this.handleSubmit(e)}),_(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),_(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),_(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),_(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),_(this,"callResource",e=>{let{makeCancelablePromise:t}=this.props;t((0,r.Z)({url:"/v3/search/autocomplete/",data:{q:e,show_pin_count:!0}}),"typeahead").then(e=>{if(!this.mounted)return;let{data:t}=e.resource_response;this.setState({recommendations:t.slice(0,5),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){let{recommendations:e,resourceLoaded:t,selectedIndex:a}=this.state,{anchor:i,idealDirection:n}=this.props,r=e.filter(e=>e.query),s="flyout_"+r.length;return t&&r.length>0?(0,h.jsx)(l.J2,{anchor:i,idealDirection:n||"down",onDismiss:this.onDismiss,size:"sm",children:(0,h.jsx)(l.xu,{width:"100%",zIndex:new l.Ry(3),children:r.length>0?r.map((e,t)=>(0,h.jsx)(l.iP,{fullWidth:!1,onTap:()=>this.addHashtag(e.query),children:(0,h.jsxs)(l.xu,{alignItems:"center",color:t===a?"secondary":"transparent",display:"flex",justifyContent:"between",padding:1,children:[(0,h.jsx)(l.xu,{flex:"grow",children:(0,h.jsx)(l.xv,{inline:!0,size:"200",weight:"bold",children:e.query})}),(0,h.jsx)(l.xu,{flex:"none",children:(0,h.jsx)(l.xv,{inline:!0,size:"100",children:(0,d.nk)(this.props.i18n.ngettext('{{ count }} pin', '{{ count }} pins', Number(e.pin_count), 'label for n pins in hashtag flyout', 'label for n pins in hashtag flyout'),{count:(0,h.jsx)(o.Z,{value:Number(e.pin_count)},"pinCount")})})})]})},e.query)):null})},s):null}}function g(e){(0,n.useEffect)(()=>{(0,i.Z)("HashtagFlyout","/app/www/save/pin-to-board/PinPane/HashtagFlyout.tsx")},[]);let t=(0,s.Z)(),a=(0,u.Z)();return(0,h.jsx)(p,{...e,i18n:t,makeCancelablePromise:a})}},194784:function(e,t,a){a.d(t,{Z:()=>T});var i,n,l,r,s,o=a(686659),d=a(667294);a(167912);var c=a(740097),u=a(230201),h=a(183e3),_=a(846960),p=a(707855),g=a(281215),f=a(24246),m=a(216975),b=a(661376),y=a(785893);let v=(void 0!==i||(i=a(217115)).hash&&"3caf9424c2af74d2b11a6ea682b57d1b"!==i.hash&&console.error("The definition of 'AlreadyPinnedCheck_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),x=(void 0!==n||(n=a(678853)).hash&&"6bb1a587f71f85424aa51845831862d4"!==n.hash&&console.error("The definition of 'AlreadyPinnedCheckQuery_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),S=(void 0!==l||(l=a(647363)).hash&&"0b5f077c08e31de36594b6918e128d12"!==l.hash&&console.error("The definition of 'AlreadyPinnedCheckQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function P({pinKey:e}){(0,d.useEffect)(()=>{(0,o.Z)("AlreadyPinnedCheck","/app/www/save/pin-to-board/PinPane/AlreadyPinnedCheck.tsx")},[]);let t=(0,f.Z)(),a=(0,h.Z)(v,e),i="GraphQL"===(0,p.o)(e),n=(0,g.Z)({strategy:i?"GraphQL":"Legacy",query:S,variables:{pinId:a.entityId},options:{fetchPolicy:"network-only"},useGetLegacyResource:({pinId:e})=>{let t=(0,b.Z)({name:"ApiResource",options:{url:`/v3/pins/${e}/`,field_sets:["pin.board()","pin.id","pin.pinned_to_board()","pin.type","pin.via_pinner()"]},noCache:!0});return{data:t.data,refresh:t.refresh}}}),l=n?.v3GetPinQuery?.__typename==="V3GetPin"?n.v3GetPinQuery.data:null,r=(0,h.Z)(x,l);return r&&r.pinnedToBoard&&"quick_creates"!==r.pinnedToBoard.layout?(0,y.jsxs)(c.xu,{children:[(0,y.jsx)(c.xu,{color:"errorBase","data-test-id":"already-pinned",display:"flex",padding:3,rounding:2,width:185,children:(0,y.jsx)(c.xv,{align:"center",color:"inverse",size:"200",weight:"bold",children:(0,m.nk)(t._('Psst! You already saved this Pin to {{ board_name }} ', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:(r.pinnedToBoard||{}).name}).join(" ")})}),(0,y.jsx)(c.xu,{display:"flex",justifyContent:"center",marginTop:-3,children:(0,y.jsx)(c.JO,{accessibilityLabel:"",color:"error",icon:"heart",size:26})})]}):null}var A=a(449058);function w(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let k=(void 0!==r||(r=a(379066)).hash&&"d928a4e793c8e81567357b1faa71d2e3"!==r.hash&&console.error("The definition of 'PinPane_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),C=(void 0!==s||(s=a(611637)).hash&&"1a4583782792fbfe92015cb2dbe50f70"!==s.hash&&console.error("The definition of 'PinPane_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);class I extends d.Component{constructor(...e){super(...e),w(this,"state",{flyoutCursorIndex:-1,description:this.props.pin?.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),w(this,"updateDescription",e=>{this.props.updateDescription&&this.props.updateDescription(e)}),w(this,"handleHashtagAddition",e=>{let{pin:t}=this.props;this.props.logContextEvent({event_type:101,component:208,element:10249,object_id_str:t?.entityId,aux_data:{hashtags:e}});let a=this.state.flyoutCursorIndex,i=Number(a+this.state.hashtagQuery.length),n=this.state.description.slice(0,a)+e+" "+this.state.description.slice(i);this.updateDescription(n),this.setState({description:n,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})})}render(){let{color:e,isFirstPin:t,pin:a,pinImageRef:i,shuffleAsset:n}=this.props,{editing:l,flyoutOpened:r,hashtagQuery:s,isHashtagFlyoutOpen:o}=this.state,d=n?.cutoutImages??a?.imageSpec_236x,u=d?.url||a?.imageBase64||this.props.urlPinInfo?.imageUrl,h=this.state.description||this.props.urlPinInfo?.description||"",p=a?.link||this.props.urlPinInfo?.link;return(0,y.jsxs)(c.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:r&&l?{transform:"translateY(-75px)"}:{}},display:"flex",justifyContent:"center",position:"relative",width:t?"50%":"",children:[(0,y.jsxs)(c.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[a?.entityId&&!n&&(0,y.jsx)(P,{pinKey:a}),(0,y.jsx)(c.xu,{paddingY:9*!!t,width:240,children:(0,y.jsx)(c.xu,{ref:i,maxHeight:r&&l?220:335,overflow:"hidden",rounding:4,children:u?(0,y.jsx)(c.Ee,{alt:h,naturalHeight:d?.height||1,naturalWidth:d?.width||1,src:u}):!!p&&(0,y.jsx)(_.Z,{color:e||"",description:h,url:p})})})]}),this.anchor&&o?(0,y.jsx)(A.Z,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,query:s}):null]})}}function T({pinKey:e,shuffleAssetKey:t,...a}){(0,d.useEffect)(()=>{(0,o.Z)("PinPane","/app/www/save/pin-to-board/PinPane/PinPane.tsx")},[]);let{logContextEvent:i}=(0,u.u)(),n=(0,h.Z)(k,e),l=(0,h.Z)(C,t);return(0,y.jsx)(I,{...a,logContextEvent:i,pin:n,shuffleAsset:l})}},248380:function(e,t,a){a.d(t,{K:()=>O});var i,n,l=a(686659),r=a(667294),s=a(581722);a(167912);var o=a(312048),d=a(27399),c=a(230201),u=a(382802),h=a(753806),_=a(375217),p=a(924591),g=a(935059),f=a(183e3),m=a(400962),b=a(24246),y=a(233597),v=a(577356),x=a(314598),S=a(380108),P=a(92242),A=a(250704),w=a(716848),k=a(160587),C=a(72034),I=a(826681),T=a(740097),j=a(216975),z=a(180483),E=a(785893),B=a(611882);function R(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let F=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>)]+/gi,D=(void 0!==i||(i=a(709869)).hash&&"bfa270bf437ef1e9195cafe07b0b3631"!==i.hash&&console.error("The definition of 'PinSaveRequest_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),Z=(void 0!==n||(n=a(150501)).hash&&"58c24e25a76e7a1c4533f3b07f490517"!==n.hash&&console.error("The definition of 'PinSaveRequest_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class L extends r.Component{constructor(...e){super(...e),R(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.getModalTitle(this.props.showCreate,!!this.props.boardWithSection),pinDescription:this.props.pin&&this.props.pin.description||this.props.urlPinInfo?.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),R(this,"unmounted",!1),R(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),R(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),R(this,"close",()=>{let{onClose:e}=this.props;e&&e(),this.props.logContextEvent({event_type:2502,component:5,element:610})}),R(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),R(this,"getPinResource",(e,t,a)=>{let{color:i,clientTrackingParams:n,pin:l,method:r,guid:s,additionalCreateFields:o,advertiser_id:c,urlPinInfo:u,shuffleAsset:h}=this.props,_=l?.entityId?"RepinResource":"PinResource",p=l?.imageUrl||u?.imageUrl,g=l?.link||u?.link,f=!l?.entityId&&p?(0,x.Z)(p,g):l?.imageSpec_orig?.url||"",m={...o,board_id:t||"",color:i||"",clientTrackingParams:(0,A.Z)(n,l?.trackingParams),description:this.state.pinDescription,guid:s||"",link:g,image_base64:l?.imageBase64??void 0,image_url:f,is_buyable_pin:!1,is_removable:l?.promotedIsRemovable??void 0,media_upload_id:l?.mediaUploadId??void 0,method:r||"",pin_id:l?.entityId||"",section:a,title:l?.title||"",...c?{advertiser_id:c}:Object.freeze({}),...h?{shuffle_asset:h.entityId}:{}};if(!e){let{facebook:e,twitter:t}=this.state.sharing;m.share_facebook=e,m.share_twitter=t}return d.Z.create(_,m)}),R(this,"triggerPubSubs",e=>{this.props.onPinCreate&&this.props.onPinCreate({boardId:e.board.id,pinId:e.id})}),R(this,"makeCancelablePromise",e=>{let t=!1;return{promise:new Promise((a,i)=>{e.then(e=>t?i({isCanceled:!0}):a(e)),e.catch(e=>t?i({isCanceled:!0}):i(e))}),cancel(){t=!0}}}),R(this,"handleLogToastClick",()=>{this.props.logContextEvent({event_type:101,component:20,view_type:52})}),R(this,"showBoardSavedToast",(e,t)=>{let{toastManagerContext:a,i18n:i}=this.props;a.showToast(({hideToast:a})=>{var n;return(0,E.jsx)(p.Z,{duration:B.A,href:t?`${e.url??""}${t.slug??""}`:e.url,imageUrl:e.image_cover_url??"",onClick:this.handleLogToastClick,onHide:a,text:(n=e.name,t?(0,z.Z)(i._('Saved to {{sectionName}} in {{boardName}}', 'Toast for successfully saving to a section within a board', 'Toast for successfully saving to a section within a board'),{sectionName:t.title??"",boardName:n??""}):(0,E.jsx)(T.xv,{children:(0,j.XB)({text:i._('Saved to <strong id="1">{{ boardName }}</strong>', 'PinToBoard.Lib.SavedToBoardToast.Message', 'Saved to label for better save. boardName: url to saved board'),markers:{boardName:n??""},jsxReplacements:{1:({innerHtmlStrings:e})=>(0,E.jsx)(T.xv,{weight:"bold",children:e})}})}))})})}),R(this,"dismissModal",()=>{let{resolve:e,newPin:t}=this.state;e&&e(t)}),R(this,"handleBoardSaveSuccess",(e,t,a,i)=>{let{action:n,saveToBoard:l,dispatch:r,pin:s,setCompletionPromise:o,shouldShowToast:d,showRepinAnimation:c,viewerUserId:u,urlPinInfo:h}=this.props;r((0,_.fO)());let p=e.resource_response.data,g=this.makeCancelablePromise(new Promise(e=>{this.triggerPubSubs(p);let n=this.state.pinDescription.match(F)||[];n.length>0&&this.props.logContextEvent({event_type:2,element:10273,object_id_str:this.props.pin?.entityId,aux_data:{hashtags:JSON.stringify(n)}});let l=()=>{d&&this.showBoardSavedToast(t,a),this.safeSetState({displaySuccessAnimation:!0,modalTitle:this.props.i18n._('Board created', 'Modal title after creating a new board', 'Modal title after creating a new board'),newPin:p,resolve:e})};i?l():e(p)}));!i&&s?.entityId&&c(s.entityId),o(g),l(t),r((0,k.Br)({boardId:t.id,sectionId:a&&a.id,increment:1})),u&&(r((0,I.JS)({userId:u,increment:1})),r((0,_.fO)())),(a||!t.image_cover_url)&&(t.image_cover_url=s?.imageUrl||h?.imageUrl||s?.imageSpec_236x?.url||"",r((0,k.yT)(t))),a&&r((0,y.U)("BoardSectionResource",{options:{field_set_key:"board_page",section_id:a.id}})),s?.entityId&&r((0,C.Ur)({id:s.entityId,nodeId:s.__id,boardId:t.id,title:t.name??"",url:t.url??"",localPinId:p.id}))}),R(this,"handleSaveToBoard",(e,t,a)=>{let{onToggleModal:i,shouldShowToast:n,mountAfterActionPlacement:l}=this.props;n&&!a&&(this.close(),this.showBoardSavedToast(e,t));let r="secret"===(e.privacy||""),s={board:t?t.id:e.id,state:B.S.LOADING};this.safeSetState({boardSavedTo:s},()=>{this.getPinResource(r,e.id,(t||{}).id).callCreate({showError:!1}).then(n=>{l("Save",{pin_id:this.props.pin?.entityId,is_promoted:this.props.pin?.isPromoted}),this.safeSetState({boardSavedTo:Object.assign(s,{state:B.S.SUCCESS})},()=>this.handleBoardSaveSuccess(n,e,t,a)),i&&!a&&i(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),u.Z.showError(e.message_detail||e.message);let t=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(t),i&&i(!1)})})}),R(this,"handleNewBoardAnimationCompletion",()=>{let{pin:e,showRepinAnimation:t}=this.props;e?.entityId&&t(e.entityId)})}getModalTitle(e,t){if(e)if(t)return this.props.i18n._('Create section', 'modal title for create section pane', 'modal title for create section pane');else return this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board');return t?this.props.i18n._('Choose section', 'modal title for choose section', 'modal title for choose section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board')}componentDidUpdate(e){let{boardWithSection:t,showCreate:a,pin:i,urlPinInfo:n,description:l}=this.props,r={};(i!==e.pin||n!==e.urlPinInfo||l!==e.description)&&(r.pinDescription=i?.description||n?.description||l||""),(a!==e.showCreate||t!==e.boardWithSection)&&(r.modalTitle=this.getModalTitle(a,!!t)),Object.keys(r).length>0&&this.safeSetState(r)}componentWillUnmount(){this.unmounted=!0}render(){let{close:e,dismissModal:t,handleNewBoardAnimationCompletion:a,handleSaveToBoard:i,setModalTitle:n,updateDescription:l}=this,{boardSavedTo:r,displaySuccessAnimation:s,modalTitle:o,newPin:d}=this.state,{color:c}=this.props;return this.props.children({boardSavedTo:r,color:c,dismissModal:t,displaySuccessAnimation:s,handleAbort:e,handleNewBoardAnimationCompletion:a,handleSaveToBoard:i,modalTitle:o,newPin:d,setModalTitle:n,updateDescription:l})}componentDidMount(){(0,l.Z)("PinSaveRequest","/app/www/save/pin-to-board/PinSaveRequest.tsx")}}function O({pinKey:e,shuffleAssetKey:t,...a}){(0,r.useEffect)(()=>{(0,l.Z)("PinSaveRequest","/app/www/save/pin-to-board/PinSaveRequest.tsx")},[]);let{saveToBoard:i}=(0,P.W)(),{logContextEvent:n}=(0,c.u)(),d=(0,w.J)()?.onPinCreate,u=(0,b.Z)(),_=(0,o.TH)(),p=(0,g.Z)(),y=(0,v.dI)(),x=(0,s.I0)(),{updateHeaderState:A}=(0,S.Z)(),k=(0,s.v9)(({advertiser:e})=>p.isAuth&&e&&e.owner_user_id!==p.id?e.id:void 0),{previous:C}=(0,m.ou)(),I=(0,h.cO)(),T=(0,f.Z)(D,e),j=(0,f.Z)(Z,t);return(0,E.jsx)(L,{...a,advertiser_id:k,dispatch:x,i18n:u,location:_,logContextEvent:n,mountAfterActionPlacement:I,onPinCreate:d,pin:T,previousHistory:C,saveToBoard:i,showRepinAnimation:e=>A({type:"showRepinAnimation",payload:e}),shuffleAsset:j,toastManagerContext:y,viewerUserId:p.isAuth?p.id:void 0})}},904946:function(e,t,a){a.d(t,{Z:()=>eo});var i,n,l,r,s=a(667294);a(167912);var o=a(740097),d=a(465784),c=a(935059),u=a(183e3),h=a(24246),_=a(501010),p=a(181735),g=a(901287),f=a(686659),m=a(581722),b=a(104999),y=a(774838),v=a(66708),x=a(785893);let S=({board:e,completeCreateSectionAction:t,height:a,onClose:i,pinImport:n,url:l,width:r})=>{(0,s.useEffect)(()=>{(0,f.Z)("SectionCreateModal","/app/www/save/board/BoardPage/ModalContents/SectionCreateModal.tsx")},[]);let c=(0,h.Z)(),{isRTL:u}=(0,y.B)(),_=(0,b.Z)(),p=(0,m.I0)(),[g,S]=(0,s.useState)(""),[P,A]=(0,s.useState)(!1),[w,k]=(0,s.useState)(null);return(0,x.jsx)(d.ZP,{accessibilityModalLabel:c._('Repin modal', 'save.pinToBoard.modal.label', 'Accessibility label on modal'),footer:(0,x.jsx)(o.kC,{children:(0,x.jsx)(o.xu,{marginStart:"auto",children:(0,x.jsx)(o.zx,{color:"red",dataTestId:"create-section-add-button",disabled:P||!g.trim()||!!w,fullWidth:!0,onClick:()=>{e&&(A(!0),p((0,v.Z)({boardId:e.id,name:g.trim(),pinImport:n},c,void 0,_)).then(a=>{t(e,a,!1)}).catch(e=>{k(e.message_detail||e.message)}).finally(()=>{A(!1)}))},size:"lg",text:c._('Add', 'sectionCreateModal.add.button', 'add a new section')})})}),heading:(0,x.jsx)(o.xu,{paddingY:8,children:(0,x.jsxs)(o.kC,{justifyContent:"center",children:[(0,x.jsx)(o.xu,{maxWidth:400,children:(0,x.jsx)(o.qd,{align:"center",size:"600",children:c._('Add section', 'sectionCreateModal.title', 'Title in the add section modal')})}),(0,x.jsx)(o.xu,{left:u,padding:8,position:"absolute",right:!u,top:!0,children:(0,x.jsx)(o.hU,{accessibilityLabel:c._('Close', 'sectionCreateModal.closeButton', 'close section create modal button'),icon:"cancel",iconColor:"darkGray",onClick:i,size:"md"})})]})}),onDismiss:i,size:"sm",children:(0,x.jsx)(o.xu,{padding:8,children:(0,x.jsxs)(o.kC,{children:[(0,x.jsx)(o.zd,{height:a,rounding:4,width:r,children:l&&(0,x.jsx)(o.Ee,{alt:"",fit:"cover",naturalHeight:a??1,naturalWidth:r??1,src:l})}),(0,x.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{width:r?`calc(100% - ${r}px)`:"100%"}},marginStart:8,children:(0,x.jsx)(o.nv,{dataTestId:"create-section-name-input-field",errorMessage:w,id:"sectionEditName",label:c._('Name', 'section.create.label', 'label text for section input'),onChange:e=>{S(e.value),k(null)},placeholder:c._('Like "Lighting"', 'sectionCreateModal.boardSection.name', 'Placeholder for board section name'),size:"lg",type:"text",value:g})})]})})})};var P=a(230201),A=a(660322),w=a(661376),k=a(337079),C=a(739405);let I=void 0;function T(e,t,a,i){return{...e?{pin_id:e}:Object.freeze({}),...t?{username:t}:Object.freeze({}),...a?{advertiser_id:a,filter:"protected"}:Object.freeze({}),field_set_key:"board_picker",limit:I,shortlist_suggestions:2,isDesktop:i}}var j=a(103457),z=a(266637);let E=(void 0!==i||(i=a(314821)).hash&&"76215b7b40cb02e76b77e58c8765d0d1"!==i.hash&&console.error("The definition of 'BoardPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);class B extends s.Component{constructor(...e){var t,a,i;super(...e),t="getSections",a=e=>{let{boardResource:{data:t}}=this.props;if(!t)return[];let{all_boards:a,boards_shortlist:i}=t,n=(e=>{let t=[],a=[];return e.forEach(e=>{e.name?.match(/^\d/)?a.push(e):t.push(e)}),[...t,...a]})(a);return n.length<=3?[{items:n}]:e.length>=k.Z?[{items:(0,z.j)(n,e)}]:[i.length?{items:i,title:this.props.i18n._('Top choices', ' - ', ' -- ')}:{items:[]},{items:n,title:this.props.i18n._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')}]},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[t]=a}render(){let{boardResource:{data:e,error:t,isLoaded:a},boardSavedTo:i,isRepin:n,isSelectMode:l,onBoardCreate:r,onBoardSelected:s,pin:o}=this.props,d=a&&!!e&&e.all_boards.length<=3;return(0,x.jsx)(j.Z,{boardSavedTo:i,getSections:this.getSections,hasLoadError:!!t,hasLowBoardCount:d,isLoaded:a,isRepin:n,isSelectMode:l,onCreate:r,onSelected:s,pinId:o?.entityId})}componentDidMount(){(0,f.Z)("BoardPicker","/app/www/RepinPicker/BoardPicker/BoardPicker.tsx")}}function R({pinKey:e,...t}){(0,s.useEffect)(()=>{(0,f.Z)("BoardPicker","/app/www/RepinPicker/BoardPicker/BoardPicker.tsx")},[]);let a=(0,h.Z)(),i=(0,c.Z)(),n=(0,C.HG)(),l=(0,u.Z)(E,e),r=(0,m.v9)(({advertiser:e})=>{if(i.isAuth&&e&&e.owner_user_id!==i.id)return e.id}),o=(0,m.v9)(({advertiser:e})=>{if(i.isAuth&&e&&e.owner_user_id!==i.id)return e.owner_user_id}),d=(0,w.Z)({name:"BoardPickerBoardsResource",options:T(l?.entityId,o,r,n)});return(0,x.jsx)(B,{...t,boardResource:d,i18n:a,pin:l})}class F extends s.Component{constructor(...e){var t,a,i;super(...e),t="getSections",a=e=>{let{board:t,i18n:a,sectionsResource:{data:i}}=this.props,n=a._('Board', 'PinSaveButton.RepinPicker.SectionListBoardTitle', 'board title on section picker'),l=a._('Section', 'PinSaveButton.BoardFlyout.SectionListSectionTitle', 'section title on section picker');return e.length>=k.Z?[{items:(0,z.j)([t],e),customProps:{inSectionSelection:!0}},{items:(0,z.j)(i??[],e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0},title:n},{items:i??[],title:l}]},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[t]=a}render(){let{sectionsResource:{error:e,isLoaded:t},boardSavedTo:a,isRepin:i,isSelectMode:n,onSectionCreate:l,onSectionSelected:r,pinId:s}=this.props;return(0,x.jsx)(j.Z,{boardSavedTo:a,createButtonLabel:this.props.i18n._('Add section', 'Button for creating a board section', 'Button for creating a board section'),getSections:this.getSections,hasLoadError:!!e,isLoaded:t,isRepin:i,isSelectMode:n,onCreate:l,onSelected:r,pinId:s})}componentDidMount(){(0,f.Z)("SectionPicker","/app/www/RepinPicker/SectionPicker.tsx")}}function D(e){(0,s.useEffect)(()=>{(0,f.Z)("SectionPicker","/app/www/RepinPicker/SectionPicker.tsx")},[]);let t=(0,h.Z)(),a=(0,w.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id}});return(0,x.jsx)(F,{...e,i18n:t,sectionsResource:a})}var Z=a(249459),L=a(346632),O=a(269941),N=a(319226),K=a(180483);function M(e){let t=(0,h.Z)(),{body:a,img:i,onClick:n,selected:l,title:r,username:s,valid:d}=e;return(0,x.jsx)(o.xu,{marginBottom:4,children:(0,x.jsx)(o.iP,{onTap:n,children:(0,x.jsxs)(o.kC,{alignItems:"center",direction:"row",justifyContent:"start",width:"100%",children:[i,(0,x.jsxs)(o.xu,{flex:"grow",marginEnd:2,marginStart:3,children:[(0,x.jsx)(o.xu,{marginBottom:1,children:(0,x.jsx)(o.xv,{lineClamp:1,weight:"bold",children:r})}),(0,x.jsx)(o.xv,{lineClamp:1,size:"100",children:s||a})]}),(0,x.jsx)(o.xu,{marginStart:2,children:s?l?(0,x.jsx)(o.JO,{accessibilityLabel:t._('Confirmation an invite will be sent', 'Alt tags on a check box on the board create flow for board invites', 'Alt tags on a check box on the board create flow for board invites'),color:"error",icon:"check-circle",size:32}):(0,x.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):(0,x.jsx)(o.zx,{color:"gray",disabled:!!l||!d,size:"sm",text:l?t._('Sent', 'Sent a board collaborator invite', 'Sent a board collaborator invite'):t._('Invite', 'Add board collaborator invite', 'Add board collaborator invite')})})]})})})}var U=a(211731);function H(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function V(e,t,a){let{id:i}=e;return t===a.findIndex(e=>e.id===i)}class G extends s.Component{constructor(...e){super(...e),H(this,"state",{selectedCollaborators:this.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),H(this,"isIdSelected",{}),H(this,"handleTextFieldChange",({value:e})=>{this.setState({value:e})}),H(this,"handleCollaboratorClick",e=>{let{id:t,type:a}=e;this.isIdSelected[t]=!this.isIdSelected[t];let{inviteUsers:i,inviteEmails:n}=this.props,{selectedCollaborators:l}=this.state,r=l.concat([e]);this.props.onSelectedCollaboratorsChange({id:t,resource:"email"===a?n:i}),this.setState({selectedCollaborators:r})}),H(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})})}componentDidMount(){let{inviteUsers:e,inviteEmails:t}=this.props;this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map(a=>{let{id:i,type:n}=a;return this.isIdSelected[i]=!this.isIdSelected[i],this.props.onSelectedCollaboratorsChange({id:i,resource:"email"===n?t:e}),null})}render(){let{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,a=t||[],i=(""===e?this.state.selectedCollaborators.concat(a).filter(V):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:(0,O.Z)(e)}).concat(a).filter(V)).map(e=>(function(e,t,a,i){if("user_share_suggestion"===e.type||"user"===e.type){let i=(0,x.jsx)(N.qE,{accessibilityLabel:"",name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return(0,x.jsx)(M,{img:i,onClick:()=>a(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){let n,l,{id:r,valid:s}=e,d=(0,x.jsx)(o.xu,{alignItems:"center",color:"secondary",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:(0,x.jsx)(o.JO,{accessibilityLabel:i._('Email icon', 'Email icon on board create modal', 'Email icon on board create modal'),color:"default",icon:"envelope",size:20})}),c=(0,K.Z)(i._('Email {{ email }}', ' - ', ' -- '),{email:r});return t?(n=i._('Done!', 'Text that lets the user know we sent the board invite email', 'Text that lets the user know we sent the board invite email'),l=()=>void 0):(n=s?i._('Click to send!', 'Text that lets the user know they can successfully send a board invite email', 'Text that lets the user know they can successfully send a board invite email'):i._('Keep typing!', 'Text that lets a user know the email they are typing is not valid yet', 'Text that lets a user know the email they are typing is not valid yet'),l=()=>s?a(e):void 0),(0,x.jsx)(M,{body:n,img:d,onClick:l,selected:t,title:c,valid:s})}})(e,this.isIdSelected[e.id],this.handleCollaboratorClick,this.props.i18n)).map((e,t)=>(0,x.jsx)("li",{children:e},t));return(0,x.jsxs)(o.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,x.jsx)(o.xu,{paddingX:3,paddingY:2,children:(0,x.jsx)(o.xv,{size:"100",children:this.props.i18n._('Add collaborators (optional)', 'Optional field to add collaborators to a board on board create', 'Optional field to add collaborators to a board on board create')})}),(0,x.jsx)(o.xu,{marginBottom:4,marginTop:2,paddingX:3,width:"100%",children:(0,x.jsx)(o.xu,{flex:"grow",children:(0,x.jsx)(L.Z,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:(0,x.jsx)(o.Um,{accessibilityLabel:this.props.i18n._('Search for collaborators by name or email', ' - ', ' -- '),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:this.props.i18n._('Search by name or email', ' - ', ' -- '),size:"lg",value:e})})})}),(0,x.jsx)(o.xu,{marginBottom:14,overflow:"auto",paddingX:3,children:(0,x.jsx)("ul",{children:i})})]})}}function q(e){(0,s.useEffect)(()=>{(0,f.Z)("BoardCreateCollaborators","/app/www/BoardCreate/BoardCreateCollaborators.tsx")},[]);let t=(0,h.Z)(),a=(0,w.Z)({name:"ShareSuggestionsResource",noCache:!0}),i=(0,U.zC)(),n=(0,U.DK)();return(0,x.jsx)(G,{...e,i18n:t,inviteEmails:i,inviteUsers:n,shareSuggestionsResource:a})}var W=a(201198),$=a(607565);function Y({isOverlayPanelEnabled:e,onCancel:t,onCreate:a,onInvite:i,prefilledName:n,preselectedCollaborators:l,showTitle:r}){(0,s.useEffect)(()=>{(0,f.Z)("CreateBoardPane","/app/www/save/pin-to-board/CreateBoardPane/CreateBoardPane.tsx")},[]);let d=(0,h.Z)(),{isRTL:c}=(0,y.B)(),{handleCreate:u,handleChangeName:_,handleChangePrivacy:p,isAdAccountOwner:g,state:{createBoardError:m,inputName:b,nameValidatorErrors:v,privacy:S,saving:P}}=(0,$.Z)({onCreate:a,prefilledName:n}),A=0===v.length,w=S===Z.Z.BoardPrivacy.SECRET,k=(0,x.jsxs)(s.Fragment,{children:[(0,x.jsx)(o.kC,{children:(0,x.jsx)(o.zx,{onClick:t,text:d._('Cancel', 'cancel board create', 'cancel board create')})}),(0,x.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"end",children:[!!m&&(0,x.jsx)(o.xu,{paddingX:2,children:(0,x.jsx)(o.xv,{align:"center",color:"error",size:"200",weight:"bold",children:m})}),(0,x.jsx)(W.Z,{disabled:!b.trim()||!A||!!m||P,submitting:P,text:d._('Create', 'create a new board', 'create a new board')})]})]});return(0,x.jsx)(o.xu,{color:"default",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:(0,x.jsx)("form",{onSubmit:e=>{e.preventDefault(),u()},style:{height:"100%"},children:(0,x.jsxs)(o.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[r&&(0,x.jsx)(o.xu,{display:"flex",marginTop:3,paddingX:6,paddingY:3,children:(0,x.jsx)(o.qd,{size:"400",children:d._('Create board', ' - ', ' -- ')})}),(0,x.jsxs)(o.xu,{padding:3,children:[(0,x.jsx)(o.xu,{marginBottom:2,children:(0,x.jsx)(o.__,{htmlFor:"boardEditName",children:(0,x.jsx)(o.xv,{size:"100",children:d._('Name', ' - ', ' -- ')})})}),(0,x.jsx)(o.xu,{children:(0,x.jsx)(o.nv,{errorMessage:v.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>_(e),placeholder:d._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:b})})]}),g&&(0,x.jsxs)(s.Fragment,{children:[(0,x.jsxs)(o.xu,{padding:3,children:[(0,x.jsx)(o.xu,{marginBottom:2,children:(0,x.jsx)(o.__,{htmlFor:"secret",children:(0,x.jsx)(o.xv,{size:"100",children:d._('Secret', 'secret board', 'secret board')})})}),(0,x.jsx)(o.xu,{children:(0,x.jsx)(o.rs,{id:"secret",onChange:p,switched:w})})]}),(0,x.jsx)(o.kC,{alignItems:"stretch",flex:"grow",justifyContent:"start",overflow:"hidden",children:(0,x.jsx)(o.xu,{width:"100%",children:(0,x.jsx)(q,{onSelectedCollaboratorsChange:i,preselectedCollaborators:l})})})]}),!g&&(0,x.jsx)(s.Fragment,{children:(0,x.jsxs)(o.xu,{padding:3,children:[(0,x.jsx)(o.xu,{marginBottom:2,children:(0,x.jsx)(o.__,{htmlFor:"protected",children:(0,x.jsx)(o.xv,{size:"100",children:d._('Protected board (not listed on user\'s profile)', 'protected board', 'protected board')})})}),(0,x.jsx)(o.xu,{children:(0,x.jsx)(o.rs,{disabled:!0,id:"protected",onChange:()=>void 0,switched:!0})})]})}),e?(0,x.jsx)(o.xu,{bottom:!0,color:"default","data-test-id":"create-board-footer-overlay",display:"flex",justifyContent:"between",left:c,position:"absolute",right:!c,width:672,children:k}):(0,x.jsx)(o.xu,{borderStyle:"shadow",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px"}},"data-test-id":"create-board-footer-default",display:"flex",justifyContent:"between",left:c,paddingX:4,paddingY:2,position:"absolute",right:!c,width:720,children:k})]})})})}var Q=a(533889);function J(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let X=(void 0!==n||(n=a(52911)).hash&&"56f620fbd63abf8f7cb32f9a378198f8"!==n.hash&&console.error("The definition of 'BoardsPane_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class ee extends s.Component{constructor(...e){super(...e),J(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),J(this,"close",()=>{let{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:a}=this.props;t&&e?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):a()}),J(this,"sendInvites",e=>{let{inviteQueue:t}=this.state;Object.keys(t).forEach(a=>{t[a].resource(e.id??"",[a])})}),J(this,"handleInvite",e=>{let{inviteQueue:t}=this.state;if(t[e.id]){let a={...t};delete a[e.id],this.setState({inviteQueue:a})}else{let a={...t,[e.id]:e};this.setState({inviteQueue:a})}}),J(this,"handleBoardCreate",e=>{let{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)}),J(this,"handleBoardSave",(e,t)=>{let{selectedSectionBoard:a}=this.state,{onBoardSave:i,invalidatePinBetterSaveResource:n,invalidateResource:l}=this.props,r="board_section"===e.type;if(l(),n(),a&&("boardsection"===e.type||r))return i(a,e,t);let{section_count:s=0}=e;!a&&"number"==typeof s&&s>0?this.setState({selectedSectionBoard:e},this.manageModalTitle):(this.sendInvites(e),i(e,void 0,t))}),J(this,"handleCreate",e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle),this.props.logContextEvent({event_type:101,component:e?13105:13025,element:e?10306:249})}),J(this,"manageModalTitle",()=>{let{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:a}=this.state;e&&e(a&&t?this.props.i18n._('Add section', 'Repin title for making a board section', 'Repin title for making a board section'):a&&!t?this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board'):t&&!a?this.props.i18n._('Choose section', 'Repin title for choosing a board section', 'Repin title for choosing a board section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board'))})}render(){let{boardSavedTo:e,isOverlayPanelEnabled:t,isRepin:a,isSelectMode:i,pin:n,preselectedCollaborators:l,setModalTitle:r,suggestedBoardTitle:s}=this.props,{newName:d,selectedSectionBoard:c,showCreate:u}=this.state,h=!!c,_=!r;return(0,x.jsxs)(o.xu,{display:"flex",position:"relative",width:"100%",children:[!u&&(0,x.jsx)(o.xu,{direction:"column",display:"flex",marginTop:4,width:"100%",children:c?(0,x.jsx)(D,{board:c,boardSavedTo:e,isRepin:a,isSelectMode:i,onSectionCreate:this.handleCreate(h),onSectionSelected:this.handleBoardSave}):(0,x.jsx)(R,{boardSavedTo:e,isRepin:a,isSelectMode:i,onBoardCreate:this.handleCreate(h),onBoardSelected:this.handleBoardSave,pinKey:n})}),u&&!c&&(0,x.jsx)(Y,{isOverlayPanelEnabled:t,onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,prefilledName:d||s,preselectedCollaborators:l,showTitle:_}),u&&c&&(0,x.jsx)(Q.Z,{board:c,completeCreateSectionAction:this.handleBoardSave,initialName:d,isRepin:a,onClearModal:this.close,showTitle:_})]})}componentDidMount(){(0,f.Z)("BoardsPane","/app/www/save/pin-to-board/BoardsPane/BoardsPane.tsx")}}function et({pinKey:e,...t}){(0,s.useEffect)(()=>{(0,f.Z)("BoardsPane","/app/www/save/pin-to-board/BoardsPane/BoardsPane.tsx")},[]);let{logContextEvent:a}=(0,P.u)(),i=(0,h.Z)(),n=(0,u.Z)(X,e),l=(0,m.I0)();return(0,x.jsx)(ee,{...t,i18n:i,invalidatePinBetterSaveResource:()=>{l((0,A.jB)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},invalidateResource:()=>{l((0,A.jB)("BoardPickerBoardsResource",T(n?.entityId)))},logContextEvent:a,pin:n})}var ea=a(194784),ei=a(500602);function en(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let el=(void 0!==l||(l=a(892341)).hash&&"616d5be8fea6092b51f23b548a1a5dca"!==l.hash&&console.error("The definition of 'PinToBoard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),er=(void 0!==r||(r=a(591418)).hash&&"4435ca5e135b834ea8a6425f68eb2f7a"!==r.hash&&console.error("The definition of 'PinToBoard_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);class es extends s.PureComponent{constructor(...e){super(...e),en(this,"pinImageRef",(0,s.createRef)()),en(this,"handleSavePinToBoard",(e,t,a)=>{let{handleSaveToBoard:i}=this.props;i(e,t,a)}),en(this,"close",()=>{let{handleAbort:e}=this.props;e()}),en(this,"dismissModal",()=>{let{dismissModal:e}=this.props;e&&e()})}render(){let{boardSavedTo:e,boardWithSection:t,color:a,displaySuccessAnimation:i,handleNewBoardAnimationCompletion:n,isInModal:l,newPin:r,pin:c,preselectedCollaborators:u,onBoardCreated:h,sensitiveContentNotice:f,setModalTitle:m,showCreate:b,shouldRenderContent:y,suggestedBoardTitle:v,updateDescription:P,urlPinInfo:A,shuffleAsset:w}=this.props,k=A?.description||A?.link||A?.imageUrl;if(!c&&!k||!y)return null;if(b&&t)return(0,x.jsx)(S,{board:t,completeCreateSectionAction:this.handleSavePinToBoard,height:c?.imageSpec_236x?.height??0,onClose:this.close,url:c?.imageSpec_236x?.url??A?.imageUrl??"",width:c?.imageSpec_236x?.width??0});let C=null;r&&r.board&&(C=r.board.name);let I=f&&f.title||this.props.modalTitle,{checkExperiment:T}=(0,_.Z)(),j=l&&T("web_board_create_overlay_panel").anyEnabled,z=f?(0,x.jsx)(p.Z,{inModal:!0,notices:[f]}):(0,x.jsx)(o.kC,{alignItems:"stretch",dataTestId:"pin-to-board-content",height:j?"100%":"calc(90vh - 97px)",justifyContent:"center",maxHeight:j?void 0:"703px",width:"100%",children:(0,x.jsxs)(s.Fragment,{children:[(0,x.jsxs)(o.xu,{color:"default",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%",children:[(0,x.jsx)(o.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",width:"40%",children:(0,x.jsx)(o.xu,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3,children:(0,x.jsx)(ea.Z,{color:a,pinImageRef:this.pinImageRef,pinKey:c,shuffleAssetKey:w,updateDescription:P,urlPinInfo:A})})}),(0,x.jsx)(o.kC,{alignItems:"stretch",width:"60%",children:(0,x.jsx)(et,{boardSavedTo:e,boardWithSection:t,isOverlayPanelEnabled:j,isRepin:!0,onBoardCreated:h,onBoardSave:this.handleSavePinToBoard,onClose:this.close,pinKey:c,preselectedCollaborators:u,setModalTitle:l?m:void 0,showCreate:b,suggestedBoardTitle:v})})]}),i&&(0,x.jsx)(g.Z,{onDismiss:()=>{n(),this.dismissModal()},pinImageRef:this.pinImageRef,pinKey:c,selectedBoardName:C,shuffleAssetKey:w})]})});if(!l)return z;let E=I||this.props.i18n._('Repin modal', 'save.pin-to-board.PinToBoard.PinToBoard', 'Accessibility label on modal');return j?(0,x.jsx)(o.mh,{zIndex:new o.H3([ei.BO]),children:(0,x.jsx)(o.To,{accessibilityLabel:E,heading:I||void 0,onDismiss:this.close,size:"md",children:z})}):(0,x.jsx)(d.ZP,{accessibilityModalLabel:E,heading:I,onDismiss:this.close,size:"md",children:z})}}en(es,"defaultProps",{pwtAuxData:{}});let eo=function({pinKey:e,shuffleAssetKey:t,...a}){let i=(0,h.Z)(),n=(0,c.Z)(),l=(0,u.Z)(el,e),r=(0,u.Z)(er,t);return(0,x.jsx)(es,{...a,i18n:i,pin:l,shuffleAsset:r,viewer:n})}},611882:function(e,t,a){a.d(t,{A:()=>i,S:()=>n});let i=4e3,n={LOADING:"loading",SUCCESS:"success"}},607565:function(e,t,a){a.d(t,{Z:()=>p});var i=a(667294),n=a(581722),l=a(249459),r=a(236269),s=a(935059),o=a(24246),d=a(216975),c=a(660322),u=a(496883),h=a(44849),_=a(427475);function p({onCreate:e,prefilledName:t}){let a=(0,o.Z)(),p=(0,n.v9)(({advertiser:e})=>e),g=(0,n.I0)(),f=(0,s.Z)(),m=!p||f.isAuth&&p.owner_user_id===f.id,b=p&&p.id,y=(0,_.Z)(),[v,x]=(0,i.useState)({createBoardError:null,inputName:t||"",nameValidatorErrors:[],privacy:m?l.Z.BoardPrivacy.PUBLIC:l.Z.BoardPrivacy.PROTECTED,saving:!1}),S=()=>{let{inputName:t,privacy:i}=v;x({...v,saving:!0,createBoardError:null}),y({boardCreateOptions:{name:t,privacy:i,...!m&&b?{advertiser_id:b}:Object.freeze({}),aux_data:{source:"board_picker"}}}).then(t=>{x({...v,saving:!1}),e(t)}).catch(e=>{let t=a._('Uh oh! Something went wrong.', ' - ', ' -- ');if("string"==typeof e)t=e;else{let a=(0,r.Z)(e,"message");if(a){let i=(0,r.Z)(e,"message_detail");t=i?`${a} ${i}`:a}}x({...v,saving:!1,createBoardError:t})}),g((0,c.jB)("BoardsResource",(0,h.Z)(f.isAuth?f.username:"",i===l.Z.BoardPrivacy.SECRET)))};return{handleChangeName:(e,t)=>{x({...v,inputName:e,nameValidatorErrors:(0,u.FU)([(0,u.aH)({message:a._('Don\'t forget to name your board!', ' - ', ' -- ')}),(0,u.Gy)({max:l.Z.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:(0,d.nk)(a._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a user input is too long', 'Validation error when a user input is too long'),{maxLength:l.Z.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],e),createBoardError:null}),t&&S()},handleChangePrivacy:()=>{x({...v,privacy:v.privacy===l.Z.BoardPrivacy.SECRET?l.Z.BoardPrivacy.PUBLIC:l.Z.BoardPrivacy.SECRET})},handleCreate:S,isAdAccountOwner:m,state:v}}},903523:function(e,t,a){a.d(t,{b:()=>i});let i={CUSTOM:0,HIDDEN:1,HOPE:2,LOVE:3,NONE:4}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/98677-34534dcbd4df9582.mjs.map