(self.modernJsonp=self.modernJsonp||[]).push([["30644"],{456578:function(e,t,o){o.r(t),o.d(t,{default:()=>A});var n=o(686659),s=o(667294),i=o(581722),r=o(740097),a=o(689157),m=o(331128),c=o(458465),l=o(812928),d=o(230201),u=o(236269),p=o(924591),_=o(935059),g=o(24246),f=o(424868),C=o(577356),h=o(107889),y=o(113759),x=o(426130),I=o(785893);let Z=(0,s.memo)(function({aggregatedPinDataId:e,closeupAttributionId:t,commentCount:o,disablePhotoCommentSelection:n,inCommentsImprovedDropdownExp:Z,isEligibleForPinReactions:A,isPDP:P,orbacSubjectId:j,pinId:w,privatePin:N,reactionByMe:S,reactionCounts:b,setIsLoadingNewlyCreatedComment:v,showCommentComposer:E,showReactBackground:T,storyPinDataId:D,viewParameter:k}){let B=(0,g.Z)(),J=(0,_.Z)(),M=(0,i.I0)(),{logContextEvent:O}=(0,d.u)(),z=(0,m.Z)(),{showOneToast:L}=(0,C.dI)(),{clientTrackingParams:R}=(0,y.x4)(),W=(0,a.Z)({showProductDetailPage:!!P}),[U,F]=(0,s.useState)(!1),[G,H]=(0,s.useState)(c.A9.NONE);async function K(o){let{commentMedia:n,contentMarkdown:s,force:i,imageSignatures:r,tags:a}=o;if(null===e)return!1;v(!0);try{if(e){if(r.length){let t={aggregatedPinDataId:e,details:s,image_signatures:r,pin_id:w??"",username:J.isAuth?J.username:"",fromUnifiedComment:!0};await M((0,x.DD)(t))}else await z({commentMedia:n,force:i,fromUnifiedComment:!0,objectType:h.o.pin,objectId:e,pinId:w,tags:a,text:s,orbacSubjectId:j});O({event_type:7,clientTrackingParams:R,object_id_str:w,aux_data:{num_user_mention_tags:(a?JSON.parse(a):[]).length,...D?{creator_id:t,story_pin_data_id:D}:{}}})}}catch(e){return[f.ky,f.LJ].includes((0,u.Z)(e,"api_error_code")??0)?H((0,u.Z)(e,"api_error_code")===f.ky?c.A9.WARNING:c.A9.BLOCK):L(({hideToast:t})=>(0,I.jsx)(p.Z,{onHide:t,text:(0,u.Z)(e,"message_detail")||(0,u.Z)(e,"message")||B._('There was an issue posting your comment.', 'comment.post.errorMessage', 'error message for posting comment in toast'),type:"error"})),v(!1),!1}return F(!1),v(!1),!0}return(0,I.jsx)(r.xu,{marginTop:4*!!W,children:(0,I.jsx)(l.Z,{clientTrackingParams:R,commentCount:o,commentWarningModalState:G,disablePhotoCommentSelection:n,dismissCommentWarningModal:()=>H(c.A9.NONE),iconSize:P?20:void 0,inCommentsImprovedDropdownExp:Z,isEligibleForPinReactions:A,isLeftAligned:P,objectType:h.o.pin,onAddItem:K,onCancelItem:()=>F(!1),onEnter:()=>F(!0),pinId:w,privatePin:N,reactionByMe:S,reactionCounts:b,showCommentComposer:E,showReactBackground:!P&&T,statusType:U?"textInflightCreation":"textStaticDisplay",viewParameter:k})})});function A(e){return(0,s.useEffect)(()=>{(0,n.Z)("CloseupInlineCommentComposer","/app/common/react/components/closeup/CloseupBody/CloseupInlineCommentComposer.tsx")},[]),(0,I.jsx)(Z,{...e})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer-5557d97f7d00ae98.mjs.map